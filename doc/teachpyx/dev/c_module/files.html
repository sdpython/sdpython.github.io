
<!DOCTYPE html>


<html lang="fr" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Fichiers &#8212; Documentation teachpyx 0.3.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=e5fbc548" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=83beb07c"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/translations.js?v=d99ca74e"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'c_module/files';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Sérialisation" href="serialization.html" />
    <link rel="prev" title="Entrées, Sorties, Modules" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Passer au contenu principal</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/project_ico.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/project_ico.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Navigation du site">
    Navigation du site
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../introduction.html">
                        Introduction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_lang/index.html">
                        Variables et fonctions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_classes/index.html">
                        Classes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_exception/index.html">
                        Exceptions
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Entrées, Sorties, Modules
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_regex/index.html">
                        Expression régulières
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_parallelisation/index.html">
                        Parallélisation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_gui/index.html">
                        Interfaces graphiques
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_data/index.html">
                        Matrices et DataFrames
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_resume/index.html">
                        Précis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        Code inclus dans cette librairie
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../articles/index.html">
                        Collections d’articles inclassables
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../i_ex.html">
                        Exemples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../i_faq.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../auto_examples/index.html">
                        Bouts de code à conserver
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../defthe_index.html">
                        Syntaxes, Définitions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../CHANGELOGS.html">
                        Change Logs
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Navigation du site">
    Navigation du site
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../introduction.html">
                        Introduction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_lang/index.html">
                        Variables et fonctions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_classes/index.html">
                        Classes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_exception/index.html">
                        Exceptions
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Entrées, Sorties, Modules
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_regex/index.html">
                        Expression régulières
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_parallelisation/index.html">
                        Parallélisation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_gui/index.html">
                        Interfaces graphiques
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_data/index.html">
                        Matrices et DataFrames
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_resume/index.html">
                        Précis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        Code inclus dans cette librairie
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../articles/index.html">
                        Collections d’articles inclassables
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../i_ex.html">
                        Exemples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../i_faq.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../auto_examples/index.html">
                        Bouts de code à conserver
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../defthe_index.html">
                        Syntaxes, Définitions
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../CHANGELOGS.html">
                        Change Logs
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Navigation de la section">
  <p class="bd-links__title" role="heading" aria-level="1">Navigation de la section</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Fichiers</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="serialization.html">Sérialisation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/plot_serialisation_examples.html">Sérialisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module ou extension</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Fils d'Ariane">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Fil d'Ariane">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Acceuil">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Entrées, Sorties, Modules</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Fichiers</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="fichiers">
<span id="chap-fichier"></span><span id="l-files"></span><h1>Fichiers<a class="headerlink" href="#fichiers" title="Lien permanent vers cette rubrique">#</a></h1>
<nav class="contents local" id="sommaire">
<ul class="simple">
<li><p><a class="reference internal" href="#format-texte" id="id2">Format texte</a></p>
<ul>
<li><p><a class="reference internal" href="#ecriture" id="id3">Ecriture</a></p></li>
<li><p><a class="reference internal" href="#ecriture-en-mode-ajout" id="id4">Ecriture en mode « ajout »</a></p></li>
<li><p><a class="reference internal" href="#lecture" id="id5">Lecture</a></p></li>
<li><p><a class="reference internal" href="#encoding-et-les-accents" id="id6">Encoding et les accents</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fichiers-zip" id="id7">Fichiers zip</a></p>
<ul>
<li><p><a class="reference internal" href="#lecture-zip" id="id8">Lecture (zip)</a></p></li>
<li><p><a class="reference internal" href="#ecriture-zip" id="id9">Ecriture (zip)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#manipulation-de-fichiers" id="id10">Manipulation de fichiers</a></p>
<ul>
<li><p><a class="reference internal" href="#gestion-des-noms-de-chemins" id="id11">Gestion des noms de chemins</a></p></li>
<li><p><a class="reference internal" href="#copie-suppression" id="id12">Copie, suppression</a></p></li>
<li><p><a class="reference internal" href="#liste-de-fichiers" id="id13">Liste de fichiers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sans-format-ou-format-binaire" id="id14">Sans format ou format binaire</a></p>
<ul>
<li><p><a class="reference internal" href="#ecriture-dans-un-fichier-binaire" id="id15">Ecriture dans un fichier binaire</a></p></li>
<li><p><a class="reference internal" href="#lecture-d-un-fichier-binaire" id="id16">Lecture d’un fichier binaire</a></p></li>
<li><p><a class="reference internal" href="#exemple-fichier-binaire" id="id17">Exemple fichier binaire</a></p></li>
<li><p><a class="reference internal" href="#objets-plus-complexes" id="id18">Objets plus complexes</a></p></li>
</ul>
</li>
</ul>
</nav>
<p id="index-0">Lorsqu’un programme termine son exécution, toutes les informations stockées
dans des variables sont perdues. Un moyen de les conserver est de les
enregistrer dans un fichier sur disque dur. A l’intérieur de celui-ci,
ces informations peuvent apparaître sous un format texte qui est lisible
par n’importe quel éditeur de texte, dans un format compressé, ou sous
un autre format connu par le concepteur du programme. On appelle ce dernier
type un <a class="reference external" href="https://fr.wikipedia.org/wiki/Fichier_binaire">format binaire</a>,
il est adéquat lorsque les données à conserver
sont très nombreuses ou lorsqu’on désire que celles-ci ne puissent
pas être lues par une autre application que le programme lui-même. En
d’autres termes, le format binaire est illisible excepté pour celui qui l’a conçu.</p>
<p>Ce chapitre abordera pour commencer les formats texte, binaire et
compressé (<em>zip</em>) directement manipulable depuis <em>python</em>.
Les manipulations de fichiers suivront pour terminer sur les
expressions régulières qui sont très utilisées pour effectuer
des recherches textuelles. A l’issue de ce chapitre, on peut envisager
la recherche à l’intérieur de tous les documents textes présents sur
l’ordinateur, de dates particulières, de tous les numéros de téléphones
commençant par 06… En utilisant des modules tels que
<a class="reference external" href="https://pypi.python.org/pypi/reportlab">reportlab</a>
ou encore <a class="reference external" href="https://pypi.python.org/pypi/openpyxl">openpyxl</a>,
il serait possible d’étendre cette fonctionnalité aux fichiers de type
<a class="reference external" href="https://fr.wikipedia.org/wiki/Portable_Document_Format">pdf</a>
et aux fichiers <a class="reference external" href="https://fr.wikipedia.org/wiki/Microsoft_Excel">Excel</a>.</p>
<section id="format-texte">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Format texte</a><a class="headerlink" href="#format-texte" title="Lien permanent vers cette rubrique">#</a></h2>
<p id="index-1">Les <a class="reference external" href="https://fr.wikipedia.org/wiki/Fichier_texte">fichiers texte</a> sont les plus
simples : ce sont des suites de caractères. Le format
<a class="reference external" href="https://fr.wikipedia.org/wiki/Hypertext_Markup_Language">HTML</a> et <a class="reference external" href="https://fr.wikipedia.org/wiki/Extensible_Markup_Language">XML</a> font partie de
cette catégorie. Ils servent autant à conserver des informations qu’à en
échanger comme par exemple transmettre une matrice à
<a class="reference external" href="https://fr.wikipedia.org/wiki/Microsoft_Excel">Excel</a>.</p>
<p>Ce format, même s’il est simple, implique une certaine organisation dans la
façon de conserver les données afin de pouvoir les récupérer. Le cas le
plus fréquent est l’enregistrement d’une matrice : on choisira d’écrire les
nombres les uns à la suite des autres en choisissant un séparateur de
colonnes et un séparateur de lignes. Ce point sera abordé à la fin de cette section.
Les fichiers texte que les programmes informatiques manipulent sont souvent structurées.</p>
<section id="ecriture">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Ecriture</a><a class="headerlink" href="#ecriture" title="Lien permanent vers cette rubrique">#</a></h3>
<p>La première étape est l’écriture. Les informations sont toujours écrites
sous forme de chaînes de caractères et toujours ajoutées à la fin du
fichier qui s’allonge jusqu’à ce que toutes les informations y
soient écrites. L’écriture s’effectue toujours selon le même schéma.</p>
<ol class="arabic simple">
<li><p>création ou ouverture du fichier,</p></li>
<li><p>écriture,</p></li>
<li><p>fermeture.</p></li>
</ol>
<p>Lors de l’ouverture, le fichier dans lequel seront écrites les
informations est créé s’il n’existe pas ou nettoyé s’il existe déjà.
La fermeture permet à d’autres programmes de lire ce que vous
avez placé dans ce fichier. Sans cette dernière étape, il sera
impossible d’y accéder à nouveau pour le lire ou y écrire à nouveau.
A l’intérieur d’un programme informatique, écrire dans un
fichier suit toujours le même schéma :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;nom-fichier&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>    <span class="c1"># ouverture</span>

<span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="n">s</span> <span class="p">)</span>    <span class="c1"># écriture de la chaîne de caractères  s</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="n">s2</span> <span class="p">)</span>   <span class="c1"># écriture de la chaîne de caractères  s2</span>
<span class="o">...</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>  <span class="c1"># fermeture</span>
</pre></div>
</div>
<p id="index-2">Les étapes d’ouverture et de fermeture sont toujours présentes en ce qui
concerne les fichiers. Il s’agit d’indiquer au système d’exploitation que
le programme souhaite accéder à un fichier et interdire à tout autre programme
l’accès à ce fichier. Un autre programme qui souhaiterait créer un fichier du
même nom ne le pourrait pas tant que l’étape de fermeture n’est pas exécutée.
En revanche, il pourrait tout à fait le lire car la lecture ne perturbe pas l’écriture.</p>
<p>Il faut donc toujours fermer le fichier à la fin pour indiquer que le fichier
est accessible pour un autre usage. Un fichier est une
<a class="reference external" href="https://fr.wikipedia.org/wiki/Ressource_(informatique)">ressource</a>.
Et comme ce schéma se répète toujours, le langage <em>Python</em> a prévu une syntaxe
avec le mot-clé <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#the-with-statement">with</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;nom-fichier&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    <span class="c1"># ouverture</span>

    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="n">s</span> <span class="p">)</span>    <span class="c1"># écriture de la chaîne de caractères  s</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="n">s2</span> <span class="p">)</span>   <span class="c1"># écriture de la chaîne de caractères  s2</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>L’instruction <code class="docutils literal notranslate"><span class="pre">f.close()</span></code> est implicite et automatiquement exécutée
dès que le programme sort de la section <em>with</em>.
Lorsque que le programme se termine, même s’il reste des fichiers « ouverts »
pour lesquels la méthode <code class="docutils literal notranslate"><span class="pre">close</span></code> n’a pas été appelée, ils seront automatiquement fermés.</p>
<p>Certains caractères sont fort utiles lors de l’écriture de fichiers texte
afin d’organiser les données. Le symbole <code class="docutils literal notranslate"><span class="pre">;</span></code> est très utilisé comme
séparateur de colonnes pour une matrice, on utilise également le
passage à la ligne ou la tabulation. Comme ce ne sont pas des
caractères « visibles », ils ont des codes :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> : passage à la ligne</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\t</span></code> : tabulation, indique un passage à la colonne suivante dans
le format <a class="reference external" href="https://fr.wikipedia.org/wiki/Tabulation-separated_values">tsv</a>
(Tabulation-separated values).</p></li>
</ul>
<p>Il existe peu de manières différentes de conserver une matrice dans un
fichier, le programme ressemble dans presque tous les cas à celui qui suit :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span>  <span class="o">...</span> <span class="c1"># matrice de type liste de listes</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;mat.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span> <span class="p">(</span><span class="n">mat</span><span class="p">))</span> <span class="p">:</span>                <span class="c1"># la fonction join est aussi</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span> <span class="p">(</span><span class="n">mat</span> <span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="p">:</span>       <span class="c1"># fréquemment utilisée</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="nb">str</span> <span class="p">(</span><span class="n">mat</span> <span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>    <span class="c1"># pour assembler les chaînes</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>                            <span class="c1"># un une seule et réduire le</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>                                    <span class="c1"># nombre d&#39;appels à f.write</span>
</pre></div>
</div>
<p>Ou encore :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span>  <span class="o">...</span> <span class="c1"># matrice de type liste de listes</span>
<span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;mat.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span> <span class="p">(</span><span class="n">mat</span><span class="p">))</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span> <span class="p">(</span><span class="n">mat</span> <span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="nb">str</span> <span class="p">(</span><span class="n">mat</span> <span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html#open" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> accepte deux paramètres, le premier est le nom du fichier,
le second définit le mode d’ouverture : <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> pour écrire (<strong>w</strong> rite),
« a » pour écrire et ajouter (<strong>a</strong> ppend),
« r » pour lire (<strong>r</strong> ead). Ceci signifie que la fonction <code class="docutils literal notranslate"><span class="pre">open</span></code>
sert à ouvrir un fichier quelque soit l’utilisation qu’on en fait.</p>
<p>A la première écriture dans un fichier (premier appel à la fonction <code class="docutils literal notranslate"><span class="pre">write</span></code>,
la taille du fichier créée est souvent nulle. L’écriture dans un fichier
n’est pas immédiate, le langage <em>python</em> attend d’avoir reçu beaucoup
d’informations avant de les écrire physiquement sur le disque dur.
Les informations sont placées dans un tampon ou <a class="reference external" href="https://en.wikipedia.org/wiki/Data_buffer">buffer</a>.
Lorsque le tampon est plein, il est écrit sur disque dur. Pour éviter ce délai,
il faut soit fermer puis réouvrir le fichier soit appeler la méthode
<a class="reference external" href="https://docs.python.org/3.6/library/io.html#io.IOBase.flush">flush</a>
qui ne prend aucun paramètre. Ce mécanisme vise à réduire le nombre
d’accès au disque dur car selon les technologies,
il n’est pas nécessairement beaucoup plus long d’y écrire un caractère
plutôt que 1000 en une fois.</p>
</section>
<section id="ecriture-en-mode-ajout">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Ecriture en mode « ajout »</a><a class="headerlink" href="#ecriture-en-mode-ajout" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Lorsqu’on écrit des informations dans un fichier, deux cas se présentent.
Le premier consiste à ne pas tenir compte du précédent contenu de ce fichier
lors de son ouverture pour écriture et à l’écraser. C’est le cas traité par
le précédent paragraphe. Le second cas consiste à ajouter toute nouvelle
information à celles déjà présentes lors de l’ouverture du fichier. Ce second
cas est presque identique au suivant hormis la première ligne qui change :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;nom-fichier&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>    <span class="c1"># ouverture en mode ajout, mode &quot;a&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Pour comprendre la différence entre ces deux modes d’ouverture,
voici deux programmes. Celui de gauche n’utilise pas le mode ajout tandis
que celui de droite l’utilise lors de la seconde ouverture.</p>
<p><em>Premier programme</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot; premiere fois &quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>

<span class="k">with</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot; seconde fois &quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>
</pre></div>
</div>
<p><em>Second programme</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot; premiere fois &quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>

<span class="k">with</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1">###</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot; seconde fois &quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>
</pre></div>
</div>
<p>Le premier programme crée un fichier <code class="docutils literal notranslate"><span class="pre">&quot;essai.txt&quot;</span></code> qui ne contient que les
informations écrites lors de la seconde phase d’écriture, soit
<code class="docutils literal notranslate"><span class="pre">seconde</span> <span class="pre">fois</span></code>. Le second utilise le mode ajout lors de la seconde
ouverture. Le fichier <code class="docutils literal notranslate"><span class="pre">&quot;essai.txt&quot;</span></code>, même s’il existait avant l’exécution
de ce programme, est effacé puis rempli avec l’information <code class="docutils literal notranslate"><span class="pre">premiere</span> <span class="pre">fois</span></code>.
Lors de la seconde ouverture, en mode ajout, une seconde chaîne de caractères
est ajoutée. le fichier <code class="docutils literal notranslate"><span class="pre">&quot;essai.txt&quot;</span></code>, après l’exécution du programme
contient donc le message : <code class="docutils literal notranslate"><span class="pre">premiere</span> <span class="pre">fois</span> <span class="pre">seconde</span> <span class="pre">fois</span></code>.</p>
<p>Un des moyens pour comprendre ou suivre l’évolution d’un programme est d’écrire
des informations dans un fichier ouvert en mode ajout qui est ouvert et
fermé sans cesse. Ce sont des fichiers de <em>traces</em> ou de
<a class="reference external" href="https://fr.wikipedia.org/wiki/Historique_(informatique)">log</a>.
Ils sont souvent utilisés pour vérifier des calculs complexes. Ils permettent
par exemple de comparer deux versions différentes d’un programme pour
trouver à quel endroit ils commencent à diverger.</p>
</section>
<section id="lecture">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Lecture</a><a class="headerlink" href="#lecture" title="Lien permanent vers cette rubrique">#</a></h3>
<p>La lecture d’un fichier permet de retrouver les informations stockées
grâce à une étape préalable d’écriture. Elle se déroule selon le même principe, à savoir :</p>
<ol class="arabic simple">
<li><p>ouverture du fichier en mode lecture,</p></li>
<li><p>lecture,</p></li>
<li><p>fermeture.</p></li>
</ol>
<p>Une différence apparaît cependant lors de la lecture d’un fichier :
celle-ci s’effectue ligne par ligne alors que l’écriture ne suit
pas forcément un découpage en ligne. Les instructions à écrire
pour lire un fichier diffèrent rarement du schéma qui suit où seule
la ligne indiquée par <code class="docutils literal notranslate"><span class="pre">(*)</span></code> change en fonction ce qu’il
faut faire avec les informations lues.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># ouverture du fichier en mode lecture</span>
    <span class="k">for</span> <span class="n">ligne</span> <span class="ow">in</span> <span class="n">f</span> <span class="p">:</span>             <span class="c1"># pour toutes les lignes du fichier</span>
        <span class="nb">print</span> <span class="n">ligne</span>              <span class="c1"># on affiche la ligne (*)</span>
    <span class="c1"># f.close ()                 # on ferme le fichier, ce qui est implicite avec with</span>
</pre></div>
</div>
<p>Pour des fichiers qui ne sont pas trop gros (&lt; 100000 lignes),
il est possible d’utiliser la méthode
<a class="reference external" href="https://docs.python.org/3/library/io.html?highlight=readlines#io.IOBase.readlines">readlines</a>
qui récupère toutes les
lignes d’un fichier texte en une seule fois. Le programme suivant donne
le même résultat que le précédent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># ouverture du fichier en mode lecture</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span> <span class="p">()</span>             <span class="c1"># lecture de toutes les lignes, placées dans une liste</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>                       <span class="c1"># on affiche les lignes à l&#39;écran (*)</span>
</pre></div>
</div>
<p>Lorsque le programme précédent lit une ligne dans un fichier,
le résultat lu inclut le ou les caractères (<code class="docutils literal notranslate"><span class="pre">\n</span></code>, <code class="docutils literal notranslate"><span class="pre">\r</span></code> - sous Windows seulement)
qui marquent la fin
d’une ligne. C’est pour cela que la lecture est parfois suivie d’une
étape de nettoyage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># ouverture du fichier en mode lecture</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span> <span class="p">()</span>             <span class="c1"># lecture de toutes les lignes, placées dans une liste</span>

<span class="c1"># contiendra la liste des lignes nettoyées</span>
<span class="n">l_net</span> <span class="o">=</span> <span class="p">[</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">l</span> <span class="p">]</span>
</pre></div>
</div>
<p>Les informations peuvent être structurées de façon plus élaborée dans un fichier texte,
c’est le cas des formats <a class="reference external" href="https://fr.wikipedia.org/wiki/Hypertext_Markup_Language">HTML</a> et
<a class="reference external" href="https://fr.wikipedia.org/wiki/Extensible_Markup_Language">XML</a>.
Pour ce type de format plus complexe, il est déconseillé de concevoir soi-même
un programme capable de les lire, il existe presque toujours un module qui permette
de le faire. C’est le cas du module <a class="reference external" href="https://docs.python.org/3/library/html.parser.html#module-html.parser" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">html.parser</span></code></a> ou <a class="reference external" href="https://docs.python.org/3/library/xml.html#module-xml" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml</span></code></a>.
De plus, les modules sont régulièrement mis à jour et suivent l’évolution des
formats qu’ils décryptent.</p>
<p>Un fichier texte est le moyen le plus simple d’échanger des matrices ou des données avec un
tableur et il n’est pas besoin de modules dans ce cas. Lorsqu’on enregistre
une feuille de calcul sous format texte, le fichier obtenu est organisé en colonnes :
sur une même ligne, les informations sont disposées en colonne délimitées par
un séparateur qui est souvent une tabulation (<code class="docutils literal notranslate"><span class="pre">\t</span></code>) ou un point virgule
comme dans l’exemple suivant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nom</span>  <span class="p">;</span> <span class="n">prénom</span> <span class="p">;</span> <span class="n">livre</span>
<span class="n">Hugo</span>  <span class="p">;</span> <span class="n">Victor</span>  <span class="p">;</span> <span class="n">Les</span> <span class="n">misérables</span>
<span class="n">Kessel</span> <span class="p">;</span> <span class="n">Joseph</span>  <span class="p">;</span> <span class="n">Le</span> <span class="n">lion</span>
<span class="n">Woolf</span> <span class="p">;</span> <span class="n">Virginia</span>  <span class="p">;</span> <span class="n">Mrs</span> <span class="n">Dalloway</span>
<span class="n">Calvino</span> <span class="p">;</span> <span class="n">Italo</span>  <span class="p">;</span> <span class="n">Le</span> <span class="n">baron</span> <span class="n">perché</span>
</pre></div>
</div>
<p>Pour lire ce fichier, il est nécessaire de scinder chaque ligne en
une liste de chaînes de caractères, on utilise pour cela la méthode
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html?highlight=split#str.split">split</a>
des chaînes de caractères.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="p">[]</span>                            <span class="c1"># création d&#39;une liste vide,</span>
<span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># ouverture du fichier en mode lecture</span>
    <span class="k">for</span> <span class="n">li</span> <span class="ow">in</span> <span class="n">f</span> <span class="p">:</span>                   <span class="c1"># pour toutes les lignes du fichier</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">li</span><span class="o">.</span><span class="n">strip</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">)</span>       <span class="c1"># on enlève les caractères de fin de ligne</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span> <span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>           <span class="c1"># on découpe en colonnes</span>
        <span class="n">mat</span><span class="o">.</span><span class="n">append</span> <span class="p">(</span><span class="n">l</span><span class="p">)</span>              <span class="c1"># on ajoute la ligne à la matrice</span>
</pre></div>
</div>
<p>Ce format de fichier texte est appelé
<a class="reference external" href="https://fr.wikipedia.org/wiki/Comma-separated_values">CSV</a> (Comma Separated Value),
il peut être relu depuis un programme <em>python</em> comme le montre l’exemple précédent,
par <em>Excel</em> en précisant que le format du fichier est le format <em>CSV</em> et par
toutes les applications ou langages traitant de données. Pour les valeurs numériques,
il ne faut pas oublier de convertir en caractères lors de l’écriture et
de convertir en nombres lors de la lecture.</p>
<p>Les nombres réels s’écrivent en anglais avec un point pour séparer la partie
entière de la partie décimale. En français, il s’agit d’une virgule. Il est
possible que, lors de la conversion d’une matrice, il faille remplacer
les points par des virgules et réciproquement pour éviter les problèmes de conversion.</p>
</section>
<section id="encoding-et-les-accents">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Encoding et les accents</a><a class="headerlink" href="#encoding-et-les-accents" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-3">Par défaut, un fichier n’accepte pas d’enregistrer des accents, uniquement
les acaractères <a class="reference external" href="https://fr.wikipedia.org/wiki/American_Standard_Code_for_Information_Interchange">ascii</a>.
C’est pourquoi il faut presque tout le temps utiliser le paramètre <em>encoding</em>
de la fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html#open" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>
que ce soit pour écrire ou lire.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;fichier.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">texte</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<p>L’encoding <em>utf-8</em> est une façon de représenter les caractères, les caractères ascii sur
un octet, les autres sur deux ou trois octets. Cet encoding est le plus fréquent sur internet.</p>
</section>
</section>
<section id="fichiers-zip">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Fichiers zip</a><a class="headerlink" href="#fichiers-zip" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Les fichiers <a class="reference external" href="https://fr.wikipedia.org/wiki/ZIP_(format_de_fichier)">zip</a>
sont très répandus de nos jours et constituent un standard de compression
facile d’accès quelque soit l’ordinateur et son système d’exploitation.
Le langage <em>python</em> propose quelques fonctions pour compresser et décompresser
ces fichiers par l’intermédiaire du module
<a class="reference external" href="https://docs.python.org/3/library/zipfile.html">zipfile</a>.
Le format de compression <em>zip</em> est un des plus répandus bien qu’il ne soit pas
le plus performant. D’autres formats proposent de meilleurs taux de compression
sur les fichiers textes existent comme <a class="reference external" href="http://www.7-zip.org/">7-zip</a>.
Ce format n’est pas seulement utilisé pour compresser mais aussi comme
un moyen de regrouper plusieurs fichiers en un seul.</p>
<section id="lecture-zip">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Lecture (zip)</a><a class="headerlink" href="#lecture-zip" title="Lien permanent vers cette rubrique">#</a></h3>
<p>L’exemple suivant permet par exemple d’obtenir la liste des fichiers
inclus dans un fichier <em>zip</em> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">zipfile</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span> <span class="p">(</span><span class="s2">&quot;exemplezip.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fz</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">fz</span><span class="o">.</span><span class="n">infolist</span> <span class="p">()</span> <span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">date_time</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">file_size</span><span class="p">)</span>
</pre></div>
</div>
<p>Les fichiers compressés ne sont pas forcément des fichiers textes mais
de tout format. Le programme suivant extrait un fichier parmi ceux qui
ont été compressés puis affiche son contenu (on suppose que le fichier
lu est au format texte donc lisible).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">zipfile</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span> <span class="p">(</span><span class="s2">&quot;exemplezip.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fz</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">fz</span><span class="o">.</span><span class="n">read</span> <span class="p">(</span><span class="s2">&quot;informatique/testzip.py&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>On retrouve dans ce cas les étapes d’ouverture et de fermeture même si
la première est implicitement inclus dans le constructeur de la classe
<a class="reference external" href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile" title="(disponible dans Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">zipfile.ZipFile</span></code></a>.</p>
</section>
<section id="ecriture-zip">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Ecriture (zip)</a><a class="headerlink" href="#ecriture-zip" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Pour créer un fichier <em>zip</em>, le procédé ressemble à la création de
n’importe quel fichier. La seule différence provient du fait qu’il
est possible de stocker le fichier à compresser sous un autre nom à
l’intérieur du fichier <em>zip</em>, ce qui explique les deux premiers arguments
de la méthode <a class="reference external" href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile.write" title="(disponible dans Python v3.11)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipfile.ZipFile.write()</span></code></a>.
Le troisième paramètre indique si le fichier doit être compressé
<a class="reference external" href="https://docs.python.org/3/library/zipfile.html#zipfile.ZIP_DEFLATED">ZIP_DEFLATED</a>
ou non <a class="reference external" href="https://docs.python.org/3/library/zipfile.html#zipfile.ZIP_STORED">ZIP_STORED</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">zipfile</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span> <span class="p">(</span><span class="s2">&quot;test.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s2">&quot;fichier.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;nom_fichier_dans_zip.txt&quot;</span><span class="p">,</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span>
</pre></div>
</div>
<p>Une utilisation possible de ce procédé serait l’envoi automatique
d’un mail contenant un fichier <em>zip</em> en pièce jointe. Une requête comme
<em>python</em> précédant le nom de votre serveur de mail permettra, via un moteur
de recherche, de trouver des exemples sur Internet.</p>
<p>Selon les serveurs de mails, le programme permettant d’envoyer automatiquement
un mail en <em>python</em> peut varier. L’exemple suivant permet d’envoyer un email
automatiquement via un serveur de mails, il montre aussi comment attacher des
pièces jointes. Il faut bien sûr être autorisé à se connecter. De plus, il est
possible que l’exécution de ce programme ne soit pas toujours couronnée de succès
si le mail est envoyé plusieurs fois à répétition, ce comportement est en effet
proche de celui d’un spammeur.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">smtplib</span>
<span class="kn">from</span> <span class="nn">email.mime.multipart</span> <span class="kn">import</span> <span class="n">MIMEMultipart</span>
<span class="kn">from</span> <span class="nn">email.mime.base</span> <span class="kn">import</span> <span class="n">MIMEBase</span>
<span class="kn">from</span> <span class="nn">email.mime.text</span> <span class="kn">import</span> <span class="n">MIMEText</span>
<span class="kn">from</span> <span class="nn">email.utils</span> <span class="kn">import</span> <span class="n">formatdate</span>
<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">encoders</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">envoyer_mail</span> <span class="p">(</span><span class="n">aqui</span><span class="p">,</span> <span class="n">sujet</span><span class="p">,</span> <span class="n">contenu</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="p">[]):</span>
    <span class="n">de</span> <span class="o">=</span> <span class="s2">&quot;email de l&#39;auteur&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">()</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">de</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aqui</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">formatdate</span> <span class="p">(</span><span class="n">localtime</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sujet</span>

    <span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">MIMEText</span><span class="p">(</span><span class="n">contenu</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">MIMEBase</span><span class="p">(</span><span class="s1">&#39;application&#39;</span><span class="p">,</span> <span class="s1">&#39;octet-stream&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">part</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">encoders</span><span class="o">.</span><span class="n">encode_base64</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="n">part</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;attachment; filename=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>

    <span class="n">smtp</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s2">&quot;smtp.gmail.com&quot;</span><span class="p">,</span> <span class="mi">587</span><span class="p">)</span>
    <span class="n">smtp</span><span class="o">.</span><span class="n">ehlo</span><span class="p">()</span>
    <span class="n">smtp</span><span class="o">.</span><span class="n">starttls</span><span class="p">()</span>
    <span class="n">smtp</span><span class="o">.</span><span class="n">ehlo</span><span class="p">()</span>
    <span class="n">smtp</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="s2">&quot;mot_de_passe&quot;</span><span class="p">)</span>

    <span class="n">smtp</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">de</span><span class="p">,</span> <span class="n">aqui</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
    <span class="n">smtp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">envoyer_mail</span><span class="p">(</span><span class="s2">&quot;destinataire&quot;</span><span class="p">,</span> <span class="s2">&quot;sujet&quot;</span><span class="p">,</span><span class="s2">&quot;contenu&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;mail.py&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="manipulation-de-fichiers">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Manipulation de fichiers</a><a class="headerlink" href="#manipulation-de-fichiers" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Il arrive fréquemment de copier, recopier, déplacer, effacer des fichiers.
Lorsqu’il s’agit de quelques fichiers, le faire manuellement ne pose pas
de problème. Lorsqu’il s’agit de traiter plusieurs centaines de fichiers,
il est préférable d’écrire un programme qui s’occupe de le faire
automatiquement. Cela peut être la création automatique d’un fichier
<em>zip</em> incluant tous les fichiers modifiés durant la journée ou la
réorganisation de fichiers musicaux au format <em>mp3</em> à l’aide de modules
complémentaires tel que <a class="reference external" href="https://pypi.python.org/pypi/mutagen">mutagen</a>.</p>
<p>Pour ceux qui ne sont pas familiers des systèmes d’exploitation,
il faut noter que <em>Windows</em> ne fait pas de différences entre les majuscules et les
minuscules à l’intérieur d’un nom de fichier. Les systèmes <em>Linux</em> et <em>Mac OSX</em>
font cette différence. Ceci explique que certains programmes aient des comportements
différents selon le système d’exploitation sur lequel ils sont exécutés ou encore
que certains liens Internet vers des fichiers ne débouchent sur rien car
ils ont été saisis avec des différences au niveau des minuscules majuscules.</p>
<section id="gestion-des-noms-de-chemins">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Gestion des noms de chemins</a><a class="headerlink" href="#gestion-des-noms-de-chemins" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Le module <a class="reference external" href="https://docs.python.org/3/library/os.path.html">os.path</a>
propose plusieurs fonctions très utiles qui permettent entre autres de tester
l’existence d’un fichier, d’un répertoire, de récupérer diverses informations
comme sa date de création, sa taille… La liste qui suit est loin d’être exhaustive
mais elle donne une idée de ce qu’il est possible de faire.</p>
<table class="table">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.abspath">abspath(path)</a></p></td>
<td><p>Retourne le chemin absolu d’un fichier ou d’un répertoire.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.commonprefix">commonprefix(list)</a></p></td>
<td><p>Retourne le plus grand préfixe commun à un ensemble de chemins.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.dirname">dirname(path)</a></p></td>
<td><p>Retourne le nom du répertoire.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.exists">exists(path)</a></p></td>
<td><p>Dit si un chemin est valide ou non.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.getatime">getatime(path)</a></p></td>
<td><p>date de la dernière modification</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.getmtime">getmtime(path)</a></p></td>
<td><p>date de la dernière modification</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.getctime">getctime(path)</a></p></td>
<td><p>date de la création</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.getsize">getsize(file)</a></p></td>
<td><p>Retourne la taille d’un fichier.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.isabs">isabs(path)</a></p></td>
<td><p>Retourne <code class="docutils literal notranslate"><span class="pre">True</span></code> si le chemin est un chemin absolu.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.isfile">isfile(path)</a></p></td>
<td><p>Retourne <code class="docutils literal notranslate"><span class="pre">True</span></code> si le chemin fait référence à un fichier.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.isdir">isdir(path)</a></p></td>
<td><p>Retourne <code class="docutils literal notranslate"><span class="pre">True</span></code> si le chemin fait référence à un répertoire.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.join">join(p1, p2, …)</a></p></td>
<td><p>Construit un nom de chemin étant donné une liste de répertoires.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.split">split(path)</a></p></td>
<td><p>Découpe un chemin, isole le nom du fichier ou le dernier répertoire
des autres répertoires.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.splitext">splitext(path)</a></p></td>
<td><p>Découpe un chemin en nom + extension.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="copie-suppression">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Copie, suppression</a><a class="headerlink" href="#copie-suppression" title="Lien permanent vers cette rubrique">#</a></h3>
<table class="table">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/shutil.html?highlight=shutil#shutil.copy">copy (f1,f2)</a></p></td>
<td><p>Copie le fichier <code class="docutils literal notranslate"><span class="pre">f1</span></code> vers <code class="docutils literal notranslate"><span class="pre">f2</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.chdir">chdir (p)</a></p></td>
<td><p>Change le répertoire courant, cette fonction peut être importante lorsqu’on
utilise la fonction
<a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.system">system</a> du module
<a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.chdir">os</a>  pour lancer une
instruction en ligne de commande ou lorsqu’on écrit un fichier sans préciser le nom du répertoire,
le fichier sera écrit dans ce répertoire courant qui est par défaut le répertoire où est situé
le programme <em>python</em>. C’est à partir du
répertoire courant que sont définis les chemins relatifs.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.getcwd">getcwd ()</a></p></td>
<td><p>Retourne le répertoire courant, voir la fonction <code class="docutils literal notranslate"><span class="pre">chdir</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.mkdir">mkdir (p)</a></p></td>
<td><p>Crée le répertoire <code class="docutils literal notranslate"><span class="pre">p</span></code>. \ hline</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.makedirs">makedirs (p)</a></p></td>
<td><p>Crée le répertoire <code class="docutils literal notranslate"><span class="pre">p</span></code> et tous les répertoires des niveaux supérieurs
s’ils n’existent pas. Dans le cas du répertoire
<code class="docutils literal notranslate"><span class="pre">d:/base/repfinal</span></code>, crée d’abord <code class="docutils literal notranslate"><span class="pre">d:/base</span></code> s’il n’existe pas,
puis <code class="docutils literal notranslate"><span class="pre">d:/base/repfinal</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.remove">remove (f)</a></p></td>
<td><p>Supprime un fichier.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.rename">rename (f1,f2)</a></p></td>
<td><p>Renomme un fichier</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.rmdir">rmdir (p)</a></p></td>
<td><p>Supprime un répertoire</p></td>
</tr>
</tbody>
</table>
</section>
<section id="liste-de-fichiers">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Liste de fichiers</a><a class="headerlink" href="#liste-de-fichiers" title="Lien permanent vers cette rubrique">#</a></h3>
<p>La fonction
<a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=chdir#os.listdir">listdir</a>
permet de retourner les listes des éléments inclus dans un répertoire
(fichiers et sous-répertoires).
Le module <a class="reference external" href="https://docs.python.org/3/library/glob.html?highlight=glob#module-glob">glob</a>
propose une fonction plus intéressante qui permet de retourner la liste
des éléments d’un répertoire en appliquant un filtre. Le programme
suivant permet par exemple de retourner la liste des fichiers et
des répertoires inclus dans un répertoire.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os.path</span>


<span class="k">def</span> <span class="nf">liste_fichier_repertoire</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="nb">filter</span><span class="p">):</span>
    <span class="c1"># résultats</span>
    <span class="n">file</span><span class="p">,</span> <span class="n">fold</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="c1"># recherche des fichiers obéissant au filtre</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">folder</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">filter</span><span class="p">)</span>

    <span class="c1"># on inclut les sous-répertoires qui n&#39;auraient pas été</span>
    <span class="c1"># sélectionnés par le filtre</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">folder</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">*&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rep</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">r</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">res</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="c1"># on ajoute fichiers et répertoires aux résultats</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">r</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="c1"># un fichier, rien à faire à part l&#39;ajouter</span>
            <span class="n">file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># sous-répertoire : on appelle à nouveau la fonction</span>
            <span class="c1"># pour retourner la liste des fichiers inclus</span>
            <span class="n">fold</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">fi</span><span class="p">,</span> <span class="n">fo</span> <span class="o">=</span> <span class="n">liste_fichier_repertoire</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>  <span class="c1"># on étend la liste des fichiers</span>
            <span class="n">fold</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span>  <span class="c1"># on étend la liste des répertoires</span>
    <span class="c1"># fin</span>
    <span class="k">return</span> <span class="n">file</span><span class="p">,</span> <span class="n">fold</span>


<span class="n">folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.&quot;</span>
<span class="nb">filter</span> <span class="o">=</span> <span class="s2">&quot;*.rst&quot;</span>
<span class="n">file</span><span class="p">,</span> <span class="n">fold</span> <span class="o">=</span> <span class="n">liste_fichier_repertoire</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;fichier &quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">break</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fold</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;répertoire &quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p>Le programme repose sur l’utilisation d’une fonction récursive
qui explore d’abord le premier répertoire. Elle se contente d’ajouter à
une liste les fichiers qu’elle découvre puis cette fonction s’appelle
elle-même sur le premier sous-répertoire qu’elle rencontre.
La fonction <a class="reference external" href="https://docs.python.org/3/library/os.html?highlight=walk#os.walk">walk</a>
permet d’obtenir la liste des fichiers et des sous-répertoire.
Cette fonction parcourt automatiquement les sous-répertoires inclus,
le programme est plus court mais elle ne prend pas en compte le filtre
qui peut être alors pris en compte grâce aux expressions régulières
(voir <a class="reference internal" href="../c_regex/regex.html#l-regex"><span class="std std-ref">Expressions régulières</span></a>).</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>


<span class="k">def</span> <span class="nf">liste_fichier_repertoire</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="n">file</span><span class="p">,</span> <span class="n">rep</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">rep</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">file</span><span class="p">,</span> <span class="n">rep</span>


<span class="n">folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.&quot;</span>
<span class="n">file</span><span class="p">,</span> <span class="n">fold</span> <span class="o">=</span> <span class="n">liste_fichier_repertoire</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;fichier &quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">break</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fold</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;répertoire &quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">fichier</span>  <span class="o">./</span><span class="n">info</span><span class="o">.</span><span class="n">bin</span>
    <span class="n">fichier</span>  <span class="o">./</span><span class="n">essai</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">fichier</span>  <span class="o">./</span><span class="n">data</span><span class="o">.</span><span class="n">bin</span>
    <span class="n">fichier</span>  <span class="o">./.</span><span class="n">gitignore</span>
    <span class="n">fichier</span>  <span class="o">./.</span><span class="n">gitattributes</span>
    <span class="n">fichier</span>  <span class="o">./</span><span class="n">appveyor</span><span class="o">.</span><span class="n">yml</span>
    <span class="n">fichier</span>  <span class="o">./.</span><span class="n">local</span><span class="o">.</span><span class="n">jenkins</span><span class="o">.</span><span class="n">lin</span><span class="o">.</span><span class="n">yml</span>
    <span class="n">répertoire</span>  <span class="o">./.</span><span class="n">ruff_cache</span>
    <span class="n">répertoire</span>  <span class="o">./.</span><span class="n">circleci</span>
    <span class="n">répertoire</span>  <span class="o">./</span><span class="n">__pycache__</span>
    <span class="n">répertoire</span>  <span class="o">./.</span><span class="n">git</span>
    <span class="n">répertoire</span>  <span class="o">./</span><span class="n">dist</span>
    <span class="n">répertoire</span>  <span class="o">./</span><span class="n">teachpyx</span>
    <span class="n">répertoire</span>  <span class="o">./.</span><span class="n">github</span>
</pre></div>
</div>
</section>
</section>
<section id="sans-format-ou-format-binaire">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Sans format ou format binaire</a><a class="headerlink" href="#sans-format-ou-format-binaire" title="Lien permanent vers cette rubrique">#</a></h2>
<p id="index-4">Ecrire et lire des informations au travers d’un fichier texte revient
à convertir les informations quel que soit leur type dans un format
lisible pour tout utilisateur. Un entier est écrit sous forme de
caractères décimaux alors que sa représentation en mémoire est binaire.
Cette conversion dans un sens puis dans l’autre est parfois jugée
coûteuse en temps de traitement et souvent plus gourmande en terme
de taille de fichiers. Un fichier texte compressé, au format <em>zip</em> par
exemple, est une alternative aux fichiers binaires en terme de taille
mais il allonge la lecture et l’écriture par des étapes de compression
et de décompression. Même si elle permet de relire les informations écrites
grâce à n’importe quel éditeur de texte, il est parfois plus judicieux pour
une grande masse d’informations d’utiliser directement le format binaire,
c’est-à-dire celui dans lequel elles sont stockées en mémoire.
Les informations apparaissent dans leur forme la plus simple pour
l’ordinateur : une suite d’octets (bytes en anglais).
Deux étapes vont intervenir que ce soit pour l’écriture :</p>
<ol class="arabic simple">
<li><p>On récupère les informations dans une suite d’octets
(fonction <a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.pack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.pack()</span></code></a>
du module <a class="reference external" href="https://docs.python.org/3/library/struct.html#module-struct" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a>).</p></li>
<li><p>On les écrit dans un fichier
(méthode <a class="reference external" href="https://docs.python.org/3/library/io.html#io.RawIOBase.write" title="(disponible dans Python v3.11)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.RawIOBase.write()</span></code></a>
affiliée aux fichiers).</p></li>
</ol>
<p>Ou la lecture :</p>
<ol class="arabic simple">
<li><p>On lit une suite d’octets depuis un fichier
(méthode <a class="reference external" href="https://docs.python.org/3/library/io.html#io.RawIOBase.read" title="(disponible dans Python v3.11)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.RawIOBase.read()</span></code></a>
affiliée aux fichiers).</p></li>
<li><p>On transforme cette suite d’octets pour retrouver l’information
qu’elle formait initialement
(fonction <a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.unpack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.unpack()</span></code></a>).</p></li>
</ol>
<p>L’utilisation de fichiers binaires est moins évidente qu’il n’y paraît et
il faut faire appel à des modules spécialisés alors que la gestion des
fichiers texte ne pose aucun problème. Cela vient du fait que <em>python</em>
ne donne pas directement accès à la manière dont sont stockées les
informations en mémoire contrairement à des langages tels que le
<a class="reference external" href="https://fr.wikipedia.org/wiki/C%2B%2B">C++</a>.
L’intérêt de ces fichiers réside dans le fait que l’information qu’ils
contiennent prend moins de place stockée en binaire plutôt que convertie
en chaînes de caractères au format texte. Par exemple, un réel est toujours
équivalent à huit caractères en format binaire alors que sa conversion au
format texte va souvent jusqu’à quinze caractères.</p>
<p>L’écriture et la lecture d’un fichier binaire soulèvent les mêmes
problèmes que pour un fichier texte : il faut organiser les données
avant de les enregistrer pour savoir comment les retrouver. Les
types immuables (réel, entier, caractère) sont assez simples à gérer
dans ce format. Pour les objets complexes, <em>python</em> propose une solution grâce au module
<a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> (voir aussi le modile <a class="reference external" href="https://dill.readthedocs.io/en/latest/">dill</a>
pour des types telles que des fonctions).</p>
<section id="ecriture-dans-un-fichier-binaire">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Ecriture dans un fichier binaire</a><a class="headerlink" href="#ecriture-dans-un-fichier-binaire" title="Lien permanent vers cette rubrique">#</a></h3>
<p>L’écriture d’un fichier binaire commence par l’ouverture du fichier en mode
écriture par l’instruction <code class="docutils literal notranslate"><span class="pre">open(&quot;&lt;nom_fichier&gt;&quot;,</span> <span class="pre">&quot;wb&quot;)</span></code>.
C’est le code <code class="docutils literal notranslate"><span class="pre">&quot;wb&quot;</span></code> qui est important (<em>w</em> pour <em>write</em>, <em>b</em> pour <em>binary</em>),
il spécifie le mode d’ouverture <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> et le format <code class="docutils literal notranslate"><span class="pre">&quot;b&quot;</span></code>.
La fermeture est la même que pour un fichier texte.</p>
<p>Le module <a class="reference external" href="https://docs.python.org/3/library/struct.html#module-struct" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a>
et la fonction <a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.pack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.pack()</span></code></a>
permet de convertir les informations sous forme de chaîne de caractères
avant de les enregistrer au format binaire.
La fonction <a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.pack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.pack()</span></code></a>
construit une chaîne de caractères égale
au contenu de la mémoire. Son affichage avec la fonction <em>print</em>
produit quelque chose d’illisible le plus souvent.
Le tableau suivant montre les principaux formats de conversion
(<a class="reference external" href="https://docs.python.org/3/library/struct.html?highlight=pack#format-characters">liste complète</a>) :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code> : caractère</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">B</span></code> : caractère non signé (octet)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> : entier (4 octets)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">I</span></code> : entier non signé (4 octets)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d</span></code> : double (8 octets)</p></li>
</ul>
<p>L’utilisation de ces codes est illustrée au paragraphe suivant.</p>
</section>
<section id="lecture-d-un-fichier-binaire">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Lecture d’un fichier binaire</a><a class="headerlink" href="#lecture-d-un-fichier-binaire" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Le code associé à l’ouverture d’un fichier binaire en mode
lecture est <code class="docutils literal notranslate"><span class="pre">&quot;rb&quot;</span></code>, cela donne : <code class="docutils literal notranslate"><span class="pre">open(&quot;&lt;nom_fichier&gt;&quot;,</span> <span class="pre">&quot;rb&quot;)</span></code>.
La lecture utilise la fonction
<a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.unpack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.unpack()</span></code></a>
pour effectuer la conversion inverse, celle d’une chaîne de caractères en
entiers, réels, … Le paragraphe suivant illustre la lecture et l’écriture au format binaire.</p>
</section>
<section id="exemple-fichier-binaire">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Exemple fichier binaire</a><a class="headerlink" href="#exemple-fichier-binaire" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Cet exemple crée un fichier <code class="docutils literal notranslate"><span class="pre">&quot;info.bin&quot;</span></code> puis écrit des informations à
l’intérieur. Il ne sera pas possible d’afficher le contenu du
fichier à l’aide d’un éditeur de texte.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">struct</span>

<span class="c1"># on enregistre un entier, un réel et 4 caractères</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">x</span> <span class="o">=</span> <span class="mf">3.1415692</span>
<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;ABCD&quot;</span>

<span class="c1"># écriture</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
    <span class="n">octets</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>  <span class="c1"># il faut convertir les caractères en bytes</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;4s&quot;</span><span class="p">,</span> <span class="n">octets</span><span class="p">))</span>

<span class="c1"># lecture</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;4s&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># affichage pour vérifier que les données ont été bien lues</span>
<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="mi">10</span><span class="p">,)</span>
    <span class="p">(</span><span class="mf">3.1415692</span><span class="p">,)</span>
    <span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ABCD&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>Les résultats de la méthode <a class="reference external" href="https://docs.python.org/3/library/struct.html#struct.unpack" title="(disponible dans Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.unpack()</span></code></a>
apparaissent dans un tuple mais les données sont correctement récupérées.
Ce programme fait aussi apparaître une des particularité du format
binaire. On suppose ici que la chaîne de caractères est toujours de
longueur 4. En fait, pour stocker une information de dimension variable,
il faut d’abord enregistrer cette dimension puis s’en servir lors de
la relecture pour connaître le nombre d’octets à lire. On modifie le
programme précédent pour sauvegarder une chaîne de caractères de longueur variable.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">struct</span>

<span class="c1"># on enregistre un entier, un réel et n caractères</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">x</span> <span class="o">=</span> <span class="mf">3.1415692</span>
<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;ABCDEDF&quot;</span>

<span class="c1"># écriture</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)))</span>  <span class="c1"># on sauve la dimension de r</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)),</span> <span class="n">r</span><span class="p">))</span>

<span class="c1"># lecture</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;info.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  <span class="c1"># on récupère la dimension de s</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># l est un tuple, on s&#39;intéresse à son unique élément</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">fb</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>

<span class="c1"># affichage pour contrôler</span>
<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="mi">10</span><span class="p">,)</span>
    <span class="p">(</span><span class="mf">3.1415692</span><span class="p">,)</span>
    <span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ABCDEDF&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>Cette méthode utilisée pour les chaînes de caractères est applicable aux
listes et aux dictionnaires de longueur variable : il faut d’abord
stocker leur dimension. Il faut retenir également que la taille
d’un réel est de huit octets, celle d’un entier de quatre octets
et celle d’un caractère d’un octet. Cette règle est toujours vrai sur des ordinateurs 32 bits.
Cette taille varie sur les ordinateurs 64 bits. Le programme suivant donnera
la bonne réponse.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">pack</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;0&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">4</span>
    <span class="mi">8</span>
    <span class="mi">1</span>
</pre></div>
</div>
<p>Cette taille doit être passée en argument à la méthode <code class="docutils literal notranslate"><span class="pre">read</span></code>.</p>
</section>
<section id="objets-plus-complexes">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Objets plus complexes</a><a class="headerlink" href="#objets-plus-complexes" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-5">Il existe un moyen de sauvegarder dans un fichier des objets
plus complexes à l’aide du module <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>
Celui-ci permet de stocker dans un fichier le contenu d’un dictionnaire
à partir du moment où celui-ci contient des objets standard du
langage <em>python</em>. Le principe pour l’écriture est le suivant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">dico</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
<span class="n">lis</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s1">&#39;data.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dico</span><span class="p">,</span> <span class="n">fb</span><span class="p">)</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">lis</span><span class="p">,</span> <span class="n">fb</span><span class="p">)</span>
</pre></div>
</div>
<p>La lecture est aussi simple :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>
    <span class="n">dico</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>
    <span class="n">lis</span>  <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>
</pre></div>
</div>
<p>Un des avantages du module <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>
est de pouvoir gérer les références circulaires : il est capable d’enregistrer
et de relire une liste qui se contient elle-même,
ce peut être également une liste qui en contient une autre qui contient la première…
Le module <em>pickle</em> peut aussi gérer les classes définies par un programmeur
à condition qu’elles puissent convertir leur contenu en un dictionnaire
dans un sens et dans l’autre, ce qui correspond à la plupart des cas.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chaine</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entier</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tuple</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;j&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;c=&#39;</span><span class="si">{0}</span><span class="s2">&#39; e=</span><span class="si">{1}</span><span class="s2"> t=</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chaine</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tuple</span><span class="p">)</span>


<span class="n">t</span> <span class="o">=</span> <span class="n">Test</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>  <span class="c1"># lecture</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">fb</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>  <span class="c1"># écriture</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">c</span><span class="o">=</span><span class="s1">&#39;a&#39;</span> <span class="n">e</span><span class="o">=</span><span class="mi">5</span> <span class="n">t</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;j&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>Lorsque la conversion nécessite un traitement spécial, il faut
surcharger les opérateurs
<a class="reference external" href="https://docs.python.org/3/library/pickle.html?highlight=__getstate__#object.__getstate__">__getstate__</a>
et <a class="reference external" href="https://docs.python.org/3/library/pickle.html?highlight=__setstate__#object.__setstate__">__setstate__</a>
Ce cas se produit par exemple lorsqu’il n’est pas nécessaire d’enregistrer
tous les attributs de la classe car certains sont calculés ainsi
que le montre l’exemple suivant :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calcule_norme</span><span class="p">()</span>  <span class="c1"># attribut calculé</span>

    <span class="k">def</span> <span class="nf">calcule_norme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;conversion de Test en un dictionnaire&quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">]</span>  <span class="c1"># attribut calculé, on le sauve pas</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;conversion d&#39;un dictionnaire dic en Test&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calcule_norme</span><span class="p">()</span>  <span class="c1"># attribut calculé</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;x=</span><span class="si">{0}</span><span class="s2"> y=</span><span class="si">{1}</span><span class="s2"> n=</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>


<span class="n">t</span> <span class="o">=</span> <span class="n">Test</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>  <span class="c1"># lecture</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">fb</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fb</span><span class="p">:</span>  <span class="c1"># écriture</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">x</span><span class="o">=</span><span class="mi">5</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span> <span class="n">n</span><span class="o">=</span><span class="mf">5.830951894845301</span>
</pre></div>
</div>
<p>Le module <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(disponible dans Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>
ne permet de sérialiser tout type d’objet comme les fonctions. Il est
parfois utile de sauver une fonction car c’est un paramètre du programme.
Il faut dans ce cas soit le faire soi-même, soit utiliser le module
<a class="reference external" href="https://dill.readthedocs.io/en/latest/">dill</a>.</p>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="page précédente">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">précédent</p>
        <p class="prev-next-title">Entrées, Sorties, Modules</p>
      </div>
    </a>
    <a class="right-next"
       href="serialization.html"
       title="page suivante">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">suivant</p>
        <p class="prev-next-title">Sérialisation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Sur cette page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#format-texte">Format texte</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ecriture">Ecriture</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ecriture-en-mode-ajout">Ecriture en mode « ajout »</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture">Lecture</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#encoding-et-les-accents">Encoding et les accents</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fichiers-zip">Fichiers zip</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-zip">Lecture (zip)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ecriture-zip">Ecriture (zip)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulation-de-fichiers">Manipulation de fichiers</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-des-noms-de-chemins">Gestion des noms de chemins</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copie-suppression">Copie, suppression</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#liste-de-fichiers">Liste de fichiers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sans-format-ou-format-binaire">Sans format ou format binaire</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ecriture-dans-un-fichier-binaire">Ecriture dans un fichier binaire</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-d-un-fichier-binaire">Lecture d’un fichier binaire</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exemple-fichier-binaire">Exemple fichier binaire</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#objets-plus-complexes">Objets plus complexes</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/c_module/files.rst">
      <i class="fa-solid fa-file-lines"></i> Montrer le code source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2016-2023, Xavier Dupré.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Construit avec le <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">Thème PyData Sphinx</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>