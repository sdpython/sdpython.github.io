<!doctype html>
<html class="no-js" lang="fr" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Recherche" href="../../search.html" /><link rel="next" title="Questions" href="questions.html" /><link rel="prev" title="Classes" href="index.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Classes - Documentation teachpyx 0.5.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Documentation teachpyx 0.5.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/project_ico.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Documentation teachpyx 0.5.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Lectures</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Le langage Python</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Le langage Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_lang/index.html">Variables et fonctions</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Variables et fonctions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/types.html">Types et variables du langage python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/syntaxe.html">Syntaxe du langage Python (boucles, tests, fonctions)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/constructions.html">Constructions classiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/collections.html">Constructions classiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/dates.html">Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/encoding.html">Encoding et jeux de caractères</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Classes</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Classes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="questions.html">Questions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_exception/index.html">Exceptions</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Exceptions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_exception/exception.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_exception/exception_ext.html">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_exception/warning.html">Warning et logging</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_module/index.html">Entrées, Sorties, Modules</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Entrées, Sorties, Modules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_module/files.html">Fichiers</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../c_module/serialization.html">Sérialisation</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Sérialisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_serialisation_examples.html">Sérialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_serialisation_protobuf.html">Sérialisation avec protobuf</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../c_module/module.html">Module ou extension</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_regex/index.html">Expressions régulières</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Expressions régulières</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_regex/regex.html">Expressions régulières</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_parallelisation/index.html">Parallélisation</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Parallélisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_parallelisation/thread.html">Threads</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_gui/index.html">Interfaces graphiques</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Interfaces graphiques</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_gui/tkinter.html">tkinter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_data/index.html">Matrices et DataFrames</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Matrices et DataFrames</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../c_data/matrices.html">Calcul matriciel</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Calcul matriciel</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/nb_array.html">Calcul Matriciel, Optimisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/nb_numpy.html">Calcul matriciel avec numpy (exercices)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/numpy_broadcast.html">Numpy et tableau de contingence</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../c_data/dataframes.html">Dataframes</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Dataframes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/nb_dataframe.html">DataFrame et Graphes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/nb_pandas.html">Manipulation de données avec pandas (exercices)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/nb_dataframe_matrix_speed.html">Mesures de vitesse sur les dataframes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../c_data/graphes.html">Graphes</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Graphes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../c_data/enedis_cartes.html">Tracer une carte en Python</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_ml/index.html">Machine Learning</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Machine Learning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../c_ml/rappel.html">Quelques rappels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_ml/regclass.html">Classification et régression</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_resume/index.html">Précis</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Précis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../c_resume/python_sheet.html">Cheat sheet: Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_resume/conseil_programmes.html">Quelques conseils pour écrire un programme</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../c_resume/cheat_sheet.html">Cheat Sheets</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Cheat Sheets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../c_resume/git.html">Cheat Sheet on Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_resume/linux.html">Cheat Sheet on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../c_resume/jenkins.html">Cheat Sheet on Jenkins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../articles/index.html">Collections d’articles périssables</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Collections d’articles périssables</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2025/2025-04-01-route2025.html">2025-04-01 : feuille de route 2025 - avril</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2025/2025-03-01-route2025.html">2025-03-01 : feuille de route 2025 - mars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2025/2025-01-31-local_llm.html">2025-01-31 : local LLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2024/2024-11-31-route2024.html">2024-11-31 : rappel feuille de route 2024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2024/2024-09-04-ensae.html">2024-09-04 : ENSAE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2024/2024-03-01-route2024.html">2024-03-01 : feuille de route 2024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2024/2024-01-18-wsl.html">2024-01-18 : WSL - nettoyage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2023/2023-11-31-route2023.html">2023-11-31 : rappel feuille de route 2023</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2023/2023-09-06-ensae.html">2023-09-06 : ENSAE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2023/2023-08-09-hermionne.html">2023-08-09 : l’énigme d’Hermionne</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2023/2023-08-03-code-jam.html">2023-08-03 : Code Jam</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2022/2022-12-07-cartopy.html">2022-12-07 : Utilisation de cartopy sous Windows (sous WSL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2022/2022-11-31-route2022.html">2022-11-31 : rappel feuille de route 2022</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2022/2022-01-01-assurance.html">2022 - Assurance auto</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Exercices</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/index_python.html">Exercices sur le langage python</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Exercices sur le langage python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/code_liste_tuple.html">Liste, tuple, ensemble, dictionnaire, liste chaînée, coût des opérations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/nbheap.html">Heap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/structures_donnees_conversion.html">D’une structure de données à l’autre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/recherche_dichotomique.html">Recherche dichotomique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/exercice_hash.html">Répartition, table de hashage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_tarabiscote.html">Exercices expliqués de programmation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classes_metro.html">Un bref aperçu des classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classes_2048.html">2048 et les classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classe_de.html">Jeu de dé, rotation sur un circuit (classes)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classe_permutation.html">Classe Permutation et décomposition en transitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classe_tree.html">Une classe pour représenter un arbre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classe_iterateur.html">Itérateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/classe_user_p.html">Classe, Héritage, calcule d’une distance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/pivot_gauss.html">Pivot de gauss avec numpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/coloriage_carre.html">Jeux de coloriage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/code_multinomial.html">Simuler une loi multinomiale</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/tableau_contingence.html">Calculer un chi 2 sur un tableau de contingence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/tri_nlnd.html">Tri plus rapide que prévu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/histogramme_rapide.html">Histogramme et dictionnaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/exercice_pi.html">Calculs de surface et autres calculs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/de_rotation.html">Jeu de dé, rotation sur un circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/dame_prise.html">Exercices autour des dames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_matador.html">Mathador, énigme à 4 opérations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_partie_dame.html">Parties de dames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/profiling_example.html">Exemple de profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/profile_gini.html">Profiling la fonction Gini</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/profiling_conv.html">Profiling, application à la convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/exercice_regex.html">Expressions régulières</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/exercice_json_xml.html">JSON - XML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/exercice_serialisation_json.html">Sérialisation avec JSON, XML, pickle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/tests_unitaires.html">Tests unitaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/py-base/scrapping.html">Web-Scraping - pokemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_gil_example.html">Le GIL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_lambda_function.html">Astuces avec les lambda functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/premiers_pas.html">Premiers pas en Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/variable_boucle_tests.html">Variables, boucles, tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/dictionnaire_vigenere.html">Dictionnaires, fonctions, code de Vigenère</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/module_file_regex.html">Modules, fichiers, expressions régulières</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/integrale_rectangle.html">Intégrale et la méthode des rectangles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/j2048.html">2048 - stratégie gagnante</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/texte_langue.html">Deviner la langue d’un texte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/pyramide_bigarree.html">Tracer une pyramide bigarrée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/classes_carre_magique.html">Classes, méthodes, attributs, opérateurs et carré magique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/classes_heritage.html">Classes, héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/trie.html">Arbre et Trie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/premiers_pas_correction.html">Premiers pas en Python (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/variable_boucle_tests_correction.html">Variables, boucles, tests (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/dictionnaire_vigenere_correction.html">Dictionnaires, fonctions, code de Vigenère (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/module_file_regex_correction.html">Modules, fichiers, expressions régulières (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/integrale_rectangle_correction.html">Intégrale et la méthode des rectangles - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/j2048_correction.html">2048 - stratégie gagnante - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/texte_langue_correction.html">Deviner la langue d’un texte (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/pyramide_bigarree_correction.html">Tracer une pyramide bigarrée - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/classes_carre_magique_correction.html">Classes, méthodes, attributs, opérateurs et carré magique (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/classes_heritage_correction.html">Classes, héritage (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-base/trie_correction.html">Arbre et Trie (correction)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/index_algo.html">Algorithmes</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Algorithmes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/matrix_dictionary.html">Produit matriciel avec une matrice creuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_echelle.html">Calculer le nombre de façons de monter une échelle.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_plus_grande_somme.html">La sous-séquence de plus grande somme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_xn.html">Calculer x**n le plus rapidement possible</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_topk.html">Les k premiers éléments (top k)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_suffix.html">Jeux de dictionnaires, plus grand suffixe commun</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/BJKST.html">Algorithmes de streaming, BJKST</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_editdist.html">Distance entre deux mots de même longueur et tests unitaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_edit_distance.html">Distance d’édition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_ordonnancement.html">Problème d’ordonnancement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_tsp.html">Réflexions autour du voyage de commerce (TSP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_tsp.html">TSP - Traveling Salesman Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/tsp_simplifie.html">Plus court chemin passant par tous les noeuds d’un graphe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/tsp_aparte.html">Aparté sur le voyageur de commerce</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_compose_connexe.html">Graphe et Composantes connexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_random_graph.html">Graphes aléatoires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_simulation_covid_simple.html">Modèle épidémiologique (SIRD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-base/exercice_simulation_covid.html">Simulation COVID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_einstein_riddle.html">L’énigme d’Einstein et sa résolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_float_and_double_rouding.html">Float Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_burrows_wheeler.html">Transformée de Burrows Wheeler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_hypercube.html">Hypercube et autres exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-compose/paris_parcours.html">Parcourir les rues de Paris</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-compose/vigenere.html">Casser le code de Vigenère</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/algo-compose/exercice_morse.html">Décoder du Morse sans espaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/gentry_integer_encryption.html">Cryptage homomorphic de Craig Gentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/knn_high_dimension.html">Plus proches voisins en grande dimension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/puzzle_algo_1.html">Puzzles algorithmiques (1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/puzzle_algo_2.html">Puzzles algorithmiques (2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/plus_court_chemin.html">Programmation dynamique et plus court chemin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/decorrelation.html">Décorrélation de variables aléatoires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/graph_spectral_clustering.html">Spectral Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/gentry_integer_encryption_correction.html">Cryptage homomorphic de Craig Gentry - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/knn_high_dimension_correction.html">Plus proches voisins en grande dimension - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/puzzle_algo_1_correction.html">Puzzles algorithmes (1) - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/puzzle_algo_2_correction.html">Puzzles algorithmes (2) - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/plus_court_chemin_correction.html">Programmation dynamique et plus court chemin (correction)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/decorrelation_correction.html">Décorrélation de variables aléatoires - correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/tds-algo/graph_spectral_clustering_correction.html">Spectral Clustering - correction</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/index_exam.html">Séances minutées</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Séances minutées</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../practice/exams.html">Exercices minutés</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of Exercices minutés</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2013_coloriage_correction.html">1A.e - TD noté, 27 novembre 2012 (coloriage, correction)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2013_bout_de_code_coloriage.html">1A.e - TD noté, 27 novembre 2012 (éléments de code pour le coloriage)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2015.html">1A.e - TD noté, 5 décembre 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2015_rattrapage_enonce.html">1A.e - TD noté 2015 rattrapage (énoncé, écrit et oral)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2016.html">1A.e - TD noté, 11 décembre 2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2017.html">1A.e - TD noté, 16 décembre 2016</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2017_2.html">1A.e - TD noté, 21 février 2017</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2018_1.html">1A.e - Enoncé 12 décembre 2017 (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2018_2.html">1A.e - Enoncé 12 décembre 2017 (2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2019_1.html">1A.e - Enoncé 23 octobre 2018 (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2019_2.html">1A.e - Enoncé 23 octobre 2018 (2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2020_1.html">1A.e - Enoncé 22 octobre 2019 (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2020_2.html">1A.e - Enoncé 22 octobre 2019 (2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2021.html">1A - Enoncé 24 novembre 2020</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2022.html">1A - Enoncé 3 novembre 2021</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2022_rattrapage.html">1A - Enoncé 15 novembre 2021 - rattrapage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2022_rattrapage2.html">1A - Enoncé 3 mars 2022- rattrapage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2023.html">1A - Enoncé 26 octobre 2022</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2023-2024.html">1A - Enoncé 8 novembre 2023-2024</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2023-2024_rattrapage.html">1A - Enoncé 2024</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/td_note_2024.html">1A - Enoncé 6 novembre 2024</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2014_09.html">1A.e - Correction de l’interrogation écrite du 26 septembre 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2014_10.html">1A.e - Correction de l’interrogation écrite du 10 octobre 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2014_11.html">1A.e - Correction de l’interrogation écrite du 14 novembre 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2014_12.html">1A.e - Correction de l’interrogation écrite du 14 novembre 2014</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2015_09.html">1A.e - Correction de l’interrogation écrite du 26 septembre 2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/interro_rapide_20_minutes_2015_11.html">1A.e - Correction de l’interrogation écrite du 6 novembre 2015</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/enonce_ml_2017.html">Evaluation Python / Machine Learning année 2017 - énoncé</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/exams/enonce_ml_2017_correction.html">Evaluation Python / Machine Learning année 2017 - solution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/index_data.html">Numpy / Pandas</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Numpy / Pandas</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_numpy_tricks.html">Points d’implémentation avec numpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/prog/plot_pandas_groupby.html">Pandas et groupby</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/index_ml.html">Machine Learning</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Machine Learning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/ml/plot_correlations.html">Corrélations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/ml/plot_roc.html">Receiver Operating Characteristic (ROC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/ml_features_model.html">Features ou modèle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/wines_acp.html">ACP - projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn_split.html">Base d’apprentissage et de test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn_split_strat.html">Découpage stratifié apprentissage / test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn_cross_val.html">Validation croisée (cross-validation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn_hyper.html">Sélection des hyper-paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/ml_a_tree_overfitting.html">Tree, hyperparamètres, overfitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/gradient_boosting.html">Gradient Boosting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/ridge_lasso.html">Régression Ridge, Lasso et nouvel estimateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_reg.html">Prédiction de la note des vins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_reg_poly.html">Régression polynômiale et pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn.html">Plus proches voisins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesr_knn_eval.html">Plus proches voisins - évaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_color.html">Régression logistique et courbe ROC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_color_line.html">Régression logistique en 2D</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_color_linear.html">Plusieurs modèles, données disjointes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_color_roc.html">Classifications et courbes ROC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_multi.html">Classification multi-classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/winesc_multi_stacking.html">Classification multi-classe et stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/artificiel_multiclass.html">Classification multi-classe et jeu mal balancé</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/custom_estimator.html">Un nouvel estimateur basé sur scikit-learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/timeseries_ssa.html">Single Spectrum Analysis (SSA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/pretraitement_cat.html">Prétraitement des catégories ou des dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/pretraitement_image.html">Prétraitement d’une image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/pretraitement_son.html">Prétraitement du son</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practice/ml/pretraitement_texte.html">Prétraitement du texte</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compléments</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../practice/years/index.html">Notebooks écrits durant les séances</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Notebooks écrits durant les séances</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../practice/years/2023/index.html">2023</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of 2023</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../practice/years/2023/editdist.html">Distance d’édition (4 octobre)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/years/2023/pivot_gauss.html">Pivot de Gauss</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/years/2023/prefix_search.html">Recherche de préfixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../practice/years/2023/bareme_note_optimisation.html">Optimiser la note moyenne</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithm_culture.html">Survol algorithmique</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_expose/index.html">Exposés</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Exposés</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../c_expose/finance/finance_autostrat.html">Stratégie automatique de trading en finance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_expose/tsp/tsp_kohonen.html">Circuit hamiltonien et Kohonen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_expose/tsp/tsp_kruskal.html">Circuit hamiltonien et Kruskal</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../i_index.html">En diagonal</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of En diagonal</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../notebook_gallery.html">Tous les notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/index.html">Gallerie d’exemples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/index.html#gallerie-d-exemples-sur-le-machine-learning">Gallerie d’exemples sur le machine learning</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../auto_examples/index.html#gallerie-d-exemples-sur-la-programmation">Gallerie d’exemples sur la programmation</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of Gallerie d’exemples sur la programmation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../auto_examples/ml/index.html">Gallerie d’exemples sur le machine learning</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of Gallerie d’exemples sur le machine learning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/ml/plot_correlations.html">Corrélations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/ml/plot_roc.html">Receiver Operating Characteristic (ROC)</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../auto_examples/prog/index.html">Gallerie d’exemples sur la programmation</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of Gallerie d’exemples sur la programmation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_pandas_groupby.html">Pandas et groupby</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_numpy_tricks.html">Points d’implémentation avec numpy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_lambda_function.html">Astuces avec les lambda functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_gil_example.html">Le GIL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_burrows_wheeler.html">Transformée de Burrows Wheeler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_matador.html">Mathador, énigme à 4 opérations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_float_and_double_rouding.html">Float Conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_partie_dame.html">Parties de dames</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_serialisation_protobuf.html">Sérialisation avec protobuf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_hypercube.html">Hypercube et autres exercices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_serialisation_examples.html">Sérialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_tarabiscote.html">Exercices expliqués de programmation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_tsp.html">Réflexions autour du voyage de commerce (TSP)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/prog/plot_einstein_riddle.html">L’énigme d’Einstein et sa résolution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/index.html">teachpyx</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of teachpyx</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/examples/index.html">teachpyx.examples</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of teachpyx.examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/examples/classiques.html">teachpyx.examples.classiques</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/examples/construction_classique.html">teachpyx.examples.construction_classique</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/examples/numpysex.html">teachpyx.examples.numpysex</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/video/index.html">teachpyx.video</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle navigation of teachpyx.video</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/video/tsp_kohonen_pygame.html">teachpyx.video.tsp_kohonen_pygame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/video/tsp_kruskal_pygame.html">teachpyx.video.tsp_kruskal_pygame</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/tools/index.html">teachpyx.tools</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle navigation of teachpyx.tools</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../api/tools/display/index.html">teachpyx.tools.display</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle navigation of teachpyx.tools.display</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../api/tools/display/pygame_helper.html">teachpyx.tools.display.pygame_helper</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../api/tools/display/video_helper.html">teachpyx.tools.display.video_helper</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../api/tools/blockdiag_helper.html">teachpyx.tools.blockdiag_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/tools/data_helper.html">teachpyx.tools.data_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/tools/graphviz_helper.html">teachpyx.tools.graphviz_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/tools/helpers.html">teachpyx.tools.helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/tools/profiling.html">teachpyx.tools.profiling</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/faq/index.html">teachpyx.faq</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle navigation of teachpyx.faq</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/faq/faq_exception.html">teachpyx.faq.faq_exception</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/faq/faq_geo.html">teachpyx.faq.faq_geo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/faq/faq_numpy.html">teachpyx.faq.faq_numpy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/faq/faq_python.html">teachpyx.faq.faq_python</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/practice/index.html">teachpyx.practice</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle navigation of teachpyx.practice</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/practice/ml_skl.html">teachpyx.practice.ml_skl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/practice/rues_paris.html">teachpyx.practice.rues_paris</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/practice/tsp_bresenham.html">teachpyx.practice.tsp_bresenham</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/practice/tsp_kohonen.html">teachpyx.practice.tsp_kohonen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/practice/tsp_kruskal.html">teachpyx.practice.tsp_kruskal</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../api/datasets/index.html">teachpyx.datasets</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle navigation of teachpyx.datasets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/data/index.html">teachpyx.datasets.data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/data_helper.html">teachpyx.datasets.data_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/documentation.html">teachpyx.datasets.documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/enedis.html">teachpyx.datasets.enedis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/gpd_helper.html">teachpyx.datasets.gpd_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/datasets/wines.html">teachpyx.datasets.wines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/ext_test_case.html">teachpyx.ext_test_case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../i_ex.html">Syntaxes et définitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../i_faq.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOGS.html">Change Logs</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/py/c_classes/classes.rst" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="classes">
<span id="chap-classe"></span><h1>Classes<a class="headerlink" href="#classes" title="Lien vers cette rubrique">¶</a></h1>
<p>Imaginons qu’une banque détienne un fichier contenant des informations
sur ses clients et qu’il soit impossible pour un client d’avoir
accès directement à ces informations. Toutefois, il lui est
en théorie possible de demander à son banquier quelles sont
les informations le concernant détenues par sa banque.
Il est en théorie également possible de les rectifier
s’il estime qu’elles sont incorrectes.</p>
<p>On peut comparer cette banque à un objet qui possède des
informations et des moyens permettant de lire ces informations
et de les modifier. Vu de l’extérieur, cette banque cache son
fonctionnement interne et les informations dont elle dispose,
mais propose des services à ses utilisateurs.</p>
<p>On peut considérer la banque comme un <em>objet</em> au sens informatique.
Ce terme désigne une entité possédant des données et des
méthodes permettant de les manipuler. Plus concrètement,
une classe est un assemblage de variables appelées <em>attributs</em> et de
fonctions appelées <em>méthodes</em>. L’ensemble des propriétés
associées aux classes est regroupé sous la désignation de
<em>programmation objet</em>.</p>
<section id="presentation-des-classes-methodes-et-attributs">
<h2>Présentation des classes : méthodes et attributs<a class="headerlink" href="#presentation-des-classes-methodes-et-attributs" title="Lien vers cette rubrique">¶</a></h2>
<section id="definition-declaration">
<span id="par-classe-un"></span><h3>Définition, déclaration<a class="headerlink" href="#definition-declaration" title="Lien vers cette rubrique">¶</a></h3>
<div class="admonition-mathdef admonition" id="indexmathe-Définition0">
<p class="admonition-title">Définition D1 : classe</p>
<p>Une classe est un ensemble incluant des variables ou <em>attributs</em> et
des fonctions ou <em>méthodes</em>. Les attributs sont des variables
accessibles depuis toute méthode de la classe où elles sont
définies. En <em>python</em>, les classes sont des types modifiables.</p>
</div>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe0">
<span id="index-0"></span><p class="admonition-title">Syntaxe S1 : Déclaration d’une classe</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="c1"># corps de la classe</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
<p>Le corps d’une classe peut être vide, inclure des variables ou
attributs, des fonctions ou méthodes. Il est en tout cas indenté
de façon à indiquer à l’interpréteur <em>python</em> les lignes qui forment
le corps de la classe.</p>
<p>Les classes sont l’unique moyen en langage <em>python</em> de définir
de nouveaux types propres à celui qui programme. Il n’existe pas de
type « matrice » ou de type « graphe » en langage <em>python</em> qui
soit prédéfini. Il est néanmoins possible de les définir au
moyen des classes. Une matrice est par exemple un objet qui
inclut les attributs suivant : le nombre de lignes, le nombre de
colonnes, les coefficients de la matrice. Cette matrice inclut
aussi des méthodes comme des opérations entre deux matrices telles que
l’addition, la soustraction, la multiplication ou des opérations sur
elle-même comme l’inversion, la transposition, la diagonalisation.</p>
<p>Cette liste n’est pas exhaustive, elle illustre ce que peut être
une classe « matrice » - représentation informatique d’un objet « matrice » -,
un type complexe incluant des informations de types variés (entier
pour les dimensions, réels pour les coefficients), et des méthodes
propres à cet objet, capables de manipuler ces informations.</p>
<p>Il est tout-à-fait possible de se passer des classes pour
rédiger un programme informatique. Leur utilisation améliore néanmoins
sa présentation et la compréhension qu’on peut en avoir.
Bien souvent, ceux qui passent d’un langage uniquement
fonctionnel à un langage objet ne font pas marche arrière.
L”<strong>instantiation</strong> se fait selon le schéma suivant :</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe1">
<p class="admonition-title">Syntaxe S2 : Instanciation d’une classe</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cl</span> <span class="o">=</span> <span class="n">nom_classe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>La création d’une variable de type objet est identique à
celle des types standards du langage <em>python</em> : elle passe
par une simple affectation. On appelle aussi <code class="docutils literal notranslate"><span class="pre">cl</span></code> une <em>instance</em>
de la classe <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code>.</p>
<p>Cette syntaxe est identique à la syntaxe d’appel d’une
fonction. La création d’une instance peut également faire
intervenir des paramètres (voir paragraphe <a class="reference internal" href="#par-constructeur-operateur"><span class="std std-ref">Opérateurs</span></a>).
Le terme <em>instance</em> va de paire avec le terme <em>classe</em> :</p>
<div class="admonition-mathdef admonition" id="indexmathe-Définition1">
<p class="admonition-title">Définition D2 : instantiaion</p>
<p>Une instance d’une classe <code class="docutils literal notranslate"><span class="pre">C</span></code> désigne une variable de type <code class="docutils literal notranslate"><span class="pre">C</span></code>.
Le terme instance ne s’applique qu’aux variables dont le type est une classe.</p>
</div>
<p id="index-1">L’exemple suivant permet de définir une classe vide.
Le mot-clé <code class="docutils literal notranslate"><span class="pre">pass</span></code> permet de préciser que le corps
de la classe ne contient rien.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p>Il est tout de même possible de définir une instance de la
classe <code class="docutils literal notranslate"><span class="pre">classe_vide</span></code> simplement par l’instruction suivante :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p>Dans l’exemple précédent, la variable <code class="docutils literal notranslate"><span class="pre">cl</span></code> n’est pas de type
<code class="docutils literal notranslate"><span class="pre">exemple_classe</span></code> mais de type <code class="docutils literal notranslate"><span class="pre">instance</span></code> comme le montre la ligne suivante :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">cl</span><span class="p">))</span>  <span class="c1"># affiche &lt;type &#39;instance&#39;&gt;</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    &lt;class &#39;sphinx_runpython.runpython.sphinx_runpython_extension.run_python_script_139915485306944.&lt;locals&gt;.classe_vide&#39;&gt;
</pre></div>
</div>
<p id="index-2">Pour savoir si une variable est une instance d’une classe
donnée, il faut utiliser la fonction <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">cl</span><span class="p">))</span>  <span class="c1"># affiche &lt;type &#39;instance&#39;&gt;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">cl</span><span class="p">,</span> <span class="n">classe_vide</span><span class="p">))</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    &lt;class &#39;sphinx_runpython.runpython.sphinx_runpython_extension.run_python_script_139915484019520.&lt;locals&gt;.classe_vide&#39;&gt;
    True
</pre></div>
</div>
</section>
<section id="methodes">
<h3>Méthodes<a class="headerlink" href="#methodes" title="Lien vers cette rubrique">¶</a></h3>
<div class="admonition-mathdef admonition" id="indexmathe-Définition2">
<span id="index-3"></span><p class="admonition-title">Définition D3 : méthode</p>
<p>Les méthodes sont des fonctions qui sont associées de manière explicite à une classe.
Elles ont comme particularité un accès privilégié aux données de la classe elle-même.</p>
</div>
<p>Ces données    ou <em>attributs</em> sont définis plus loin. Les méthodes sont en
fait des fonctions pour lesquelles la liste des paramètres contient
obligatoirement un paramètre explicite qui est l’instance de
la classe à laquelle cette méthode est associée. Ce paramètre
est le moyen d’accéder aux données de la classe.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe2">
<p class="admonition-title">Syntaxe S3 : Déclaration d’une méthode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">nom_methode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">param_n</span><span class="p">):</span>
        <span class="c1"># corps de la méthode...</span>
</pre></div>
</div>
</div>
<p>A part le premier paramètre qui doit de préférence s’appeler <code class="docutils literal notranslate"><span class="pre">self</span></code>,
la syntaxe de définition d’une méthode ressemble en tout point à celle
d’une fonction. Le corps de la méthode est indenté par rapport à la
déclaration de la méthode, elle-même indentée par rapport à
la déclaration de la classe. Comme une fonction,
une méthode suppose que les arguments qu’elle reçoit existe,
y compris <code class="docutils literal notranslate"><span class="pre">self</span></code>. On écrit la méthode en supposant qu’un
object existe qu’on nomme <code class="docutils literal notranslate"><span class="pre">self</span></code>.
L’appel à cette méthode obéit à la syntaxe qui suit :</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe3">
<p class="admonition-title">Syntaxe S4 : Appel d’une méthode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cl</span> <span class="o">=</span> <span class="n">nom_classe</span><span class="p">()</span>    <span class="c1"># variable de type nom_classe</span>
<span class="n">t</span>  <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">nom_methode</span> <span class="p">(</span><span class="n">valeur_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">valeur_n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>L’appel d’une méthode nécessite tout d’abord la création d’une
variable. Une fois cette variable créée, il suffit d’ajouter
le symbole « <code class="docutils literal notranslate"><span class="pre">.</span></code> » pour exécuter la méthode. Le paramètre <code class="docutils literal notranslate"><span class="pre">self</span></code>
est ici implicitement remplacé par <code class="docutils literal notranslate"><span class="pre">cl</span></code> lors de l’appel.</p>
<p>L’exemple suivant simule le tirage de nombres aléatoires
à partir d’une suite définie par récurrence
<img class="math" src="../../_images/math/fa1b529a30d5ba27c21ab0d99210765394dd7cc7.svg" alt="u_{n+1} = (u_n * A) mod B"/> où <img class="math" src="../../_images/math/7b5b109585b3a3a18738347020aba8b3ed578a53.svg" alt="A"/> et <img class="math" src="../../_images/math/ce5cfc41badade103c4d2d38185a5399f1dd2855.svg" alt="B"/>
sont des entiers très grands. Cette suite n’est pas
aléatoire mais son comportement imite celui d’une suite aléatoire.
Le terme <img class="math" src="../../_images/math/a1664df1b5b611d4c3d0fa7e47313797fcdd62b2.svg" alt="u_n"/> est dans cet exemple contenu dans la variable globale <code class="docutils literal notranslate"><span class="pre">rnd</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>


<span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;simule la génération d&#39;un nombre aléatoire</span>
<span class="sd">        compris entre 0 et n-1 inclus&quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">rnd</span>
        <span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [19, 46, 26, 88, 44, 56, 56, 26, 0, 8]</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">l2</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb2</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [46, 42, 89, 66, 48, 12, 61, 84, 71, 41]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">46</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">41</span><span class="p">]</span>
</pre></div>
</div>
<p>Deux instances <code class="docutils literal notranslate"><span class="pre">nb</span></code> et <code class="docutils literal notranslate"><span class="pre">nb2</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">exemple_classe</span></code>
sont créées, chacune d’elles est utilisée pour générer
aléatoirement dix nombres entiers compris entre 0 et 99 inclus.
Les deux listes sont différentes puisque l’instance <code class="docutils literal notranslate"><span class="pre">nb2</span></code>
utilise la variable globale <code class="docutils literal notranslate"><span class="pre">rnd</span></code> précédemment modifiée par l’appel
<code class="docutils literal notranslate"><span class="pre">nb.methode1(100)</span></code>.</p>
<p>Les méthodes sont des fonctions insérées à l’intérieur d’une classe.
La syntaxe de la déclaration d’une méthode est identique à
celle d’une fonction en tenant compte du premier paramètre
qui doit impérativement être <code class="docutils literal notranslate"><span class="pre">self</span></code>. Les paramètres par défaut,
l’ordre des paramètres, les nombres variables de paramètres
présentés au paragraphe <a class="reference internal" href="../c_lang/syntaxe.html#chap-fonction"><span class="std std-ref">Fonctions</span></a> sont des
extensions tout autant applicables aux méthodes qu’aux fonctions.</p>
</section>
<section id="attributs">
<h3>Attributs<a class="headerlink" href="#attributs" title="Lien vers cette rubrique">¶</a></h3>
<div class="admonition-mathdef admonition" id="indexmathe-Définition3">
<p class="admonition-title">Définition D4 : attribut</p>
<p>Les attributs sont des variables qui sont associées de manière explicite à une classe.
Les attributs de la classe se comportent comme des variables globales pour
toutes les méthodes de cette classe.</p>
</div>
<p>Une classe permet en quelque sorte de regrouper ensemble
des informations liées. Elles n’ont de sens qu’ensemble
et les méthodes manipulent ces données liées. C’est le
cas pour un segment qui est toujours défini par ces
deux extrémités qui ne vont pas l’une sans l’autre.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe4">
<p class="admonition-title">Syntaxe S5 : Déclaration d’un attribut</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">nom_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">param_n</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nom_attribut</span> <span class="o">=</span> <span class="n">valeur</span>
</pre></div>
</div>
</div>
<p>Le paramètre <code class="docutils literal notranslate"><span class="pre">self</span></code> n’est pas un mot-clé même si le premier
paramètre est le plus souvent appelé <code class="docutils literal notranslate"><span class="pre">self</span></code>. Il désigne
l’instance de la classe sur laquelle va s’appliquer
la méthode. La déclaration d’une méthode inclut
toujours un paramètre <code class="docutils literal notranslate"><span class="pre">self</span></code> de sorte que <code class="docutils literal notranslate"><span class="pre">self.nom_attribut</span></code>
désigne un attribut de la classe. <code class="docutils literal notranslate"><span class="pre">nom_attribut</span></code> seul
désignerait une variable locale sans aucun rapport avec un
attribut portant le même nom. Les attributs peuvent être déclarés
à l’intérieur de n’importe quelle méthode, voire à l’extérieur
de la classe elle-même.</p>
<p>L’endroit où est déclaré un attribut a peu d’importance
pourvu qu’il le soit avant sa première utilisation.
Dans l’exemple qui suit, la méthode <code class="docutils literal notranslate"><span class="pre">methode1</span></code> utilise
l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> sans qu’il ait été créé.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;simule la génération d&#39;un nombre aléatoire</span>
<span class="sd">        compris entre 0 et n-1 inclus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">13</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">11</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_139915484198784</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">7</span><span class="p">,</span> <span class="ow">in</span> <span class="n">methode1</span>
    <span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;exemple_classe&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;rnd&#39;</span>
</pre></div>
</div>
<p>Cet exemple déclenche donc une erreur (ou exception)
signifiant que l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> n’a pas été créé.</p>
<p>Pour remédier à ce problème, il existe plusieurs endroits
où il est possible de créer l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code>.
Il est possible de créer l’attribut à l’intérieur de la méthode
<code class="docutils literal notranslate"><span class="pre">methode1</span></code>. Mais le programme n’a plus le même sens
puisqu’à chaque appel de la méthode <code class="docutils literal notranslate"><span class="pre">methode1</span></code>,
l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> reçoit la valeur 42. La liste
de nombres aléatoires contient dix fois la même valeur.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;simule la génération d&#39;un nombre aléatoire</span>
<span class="sd">        compris entre 0 et n-1 inclus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># déclaration à l&#39;intérieur de la méthode,</span>
        <span class="c1"># doit être précédé du mot-clé self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># affiche [19, 19, 19, 19, 19, 19, 19, 19, 19, 19]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
<p>Il est possible de créer l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> à l’extérieur de la classe.
Cette écriture devrait toutefois être évitée puisque la méthode
<code class="docutils literal notranslate"><span class="pre">methode1</span></code> ne peut pas être appelée sans que l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> ait été ajouté.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;simule la génération d&#39;un nombre aléatoire</span>
<span class="sd">        compris entre 0 et n-1 inclus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">nb</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># déclaration à l&#39;extérieur de la classe,</span>
<span class="c1"># indispensable pour utiliser la méthode methode1</span>
<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># affiche [19, 46, 26, 88, 44, 56, 56, 26, 0, 8]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<p>Ceux qui découvrent la programmation se posent toujours
la question de l’utilité de ce nouveau concept qui ne
permet pas de faire des choses différentes, tout au plus
de les faire mieux. La finalité des classes apparaît
avec le concept d”<a class="reference internal" href="#par-classe-heritage"><span class="std std-ref">Héritage</span></a>. L’article illustre
une façon de passer progressivent des fonctions aux classes de
fonctions : <a class="reference internal" href="questions.html#blog-class-ou-fonction"><span class="std std-ref">C’est obligé les classes ?</span></a>.</p>
</section>
</section>
<section id="constructeur">
<span id="par-classe-constructeur"></span><h2>Constructeur<a class="headerlink" href="#constructeur" title="Lien vers cette rubrique">¶</a></h2>
<p id="index-4">L’endroit le plus approprié pour déclarer un attribut est
à l’intérieur d’une méthode appelée le <em>constructeur</em>.
S’il est défini, il est implicitement exécuté lors de la
création de chaque instance. Le constructeur d’une classe se
présente comme une méthode et suit la même syntaxe à ceci
près que son nom est imposé : <code class="docutils literal notranslate"><span class="pre">__init__</span></code>. Hormis le premier
paramètre, invariablement <code class="docutils literal notranslate"><span class="pre">self</span></code>, il n’existe pas de contrainte
concernant la liste des paramètres excepté que le constructeur
ne doit pas retourner de résultat.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe5">
<p class="admonition-title">Syntaxe S6 : Déclaration d’un constructeur</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">param_n</span><span class="p">):</span>
        <span class="c1"># code du constructeur</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe, <code class="docutils literal notranslate"><span class="pre">__init__</span></code> est son constructeur,
sa syntaxe est la même que celle d’une méthode sauf que
le constructeur ne peut employer l’instruction <code class="docutils literal notranslate"><span class="pre">return</span></code>.
La modification des paramètres du constructeur implique également
la modification de la syntaxe de création d’une instance de cette classe.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe6">
<p class="admonition-title">Syntaxe S7 : Appel d’un constructeur</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">nom_classe</span> <span class="p">(</span><span class="n">valeur_1</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">valeur_n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe, <code class="docutils literal notranslate"><span class="pre">valeur_1</span></code> à <code class="docutils literal notranslate"><span class="pre">valeur_n</span></code>
sont les valeurs associées aux paramètres <code class="docutils literal notranslate"><span class="pre">param_1</span></code>
à <code class="docutils literal notranslate"><span class="pre">param_n</span></code> du constructeur.</p>
<p>L’exemple suivant montre deux classes pour lesquelles
un constructeur a été défini. La première n’ajoute aucun
paramètre, la création d’une instance ne nécessite pas
de paramètre supplémentaire. La seconde classe ajoute
deux paramètres <code class="docutils literal notranslate"><span class="pre">a</span></code> et <code class="docutils literal notranslate"><span class="pre">b</span></code>. Lors de la création d’une
instance de la classe <code class="docutils literal notranslate"><span class="pre">classe2</span></code>, il faut ajouter deux valeurs.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># pas de paramètre supplémentaire</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;constructeur de la classe classe1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># ajout de l&#39;attribut n</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">classe1</span><span class="p">()</span>  <span class="c1"># affiche constructeur de la classe classe1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>  <span class="c1"># affiche 1</span>


<span class="k">class</span> <span class="nc">classe2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="c1"># deux paramètres supplémentaires</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;constructeur de la classe classe2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># ajout de l&#39;attribut n</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">classe2</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># affiche constructeur de la classe classe2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>  <span class="c1"># affiche 7</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">constructeur</span> <span class="n">de</span> <span class="n">la</span> <span class="n">classe</span> <span class="n">classe1</span>
    <span class="mi">1</span>
    <span class="n">constructeur</span> <span class="n">de</span> <span class="n">la</span> <span class="n">classe</span> <span class="n">classe2</span>
    <span class="mf">7.0</span>
</pre></div>
</div>
<p>Le constructeur autorise autant de paramètres qu’on souhaite lors
de la création d’une instance et celle-ci suit la même
syntaxe qu’une fonction. La création d’une instance pourrait
être considérée comme l’appel à une fonction à ceci près
que le type du résultat est une instance de classe.</p>
<p>En utilisant un constructeur, l’exemple du paragraphe
précédent simulant une suite de variable aléatoire permet
d’obtenir une classe autonome qui ne fait pas appel à une
variable globale ni à une déclaration d’attribut extérieur
à la classe.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># constructeur</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># on crée l&#39;attribut rnd, identique pour chaque instance</span>
        <span class="c1"># --&gt; les suites générées auront toutes le même début</span>

    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [19, 46, 26, 88, 44, 56, 56, 26, 0, 8]</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">l2</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb2</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [19, 46, 26, 88, 44, 56, 56, 26, 0, 8]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<p>De la même manière qu’il existe un constructeur exécuté à chaque
création d’instance, il existe un destructeur exécuté à
chaque destruction d’instance. Il suffit pour cela de
redéfinir la méthode <code class="docutils literal notranslate"><span class="pre">__del__</span></code>.
A l’inverse d’autres langages comme le <em>C++</em>, cet opérateur est
peu utilisé car le <em>python</em> nettoie automatiquement les objets
qui ne sont plus utilisés ou plus référencés par une variable.</p>
</section>
<section id="apport-du-langage-python">
<h2>Apport du langage python<a class="headerlink" href="#apport-du-langage-python" title="Lien vers cette rubrique">¶</a></h2>
<section id="liste-des-attributs">
<span id="par-class-liste-attribut"></span><h3>Liste des attributs<a class="headerlink" href="#liste-des-attributs" title="Lien vers cette rubrique">¶</a></h3>
<p id="index-6">Chaque attribut d’une instance de classe est inséré dans un
dictionnaire appelé <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html?highlight=__dict__#object.__dict__">__dict__</a>,
attribut implicitement présent dès la création d’une instance.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># affiche {&#39;rnd&#39;: 42}</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="s1">&#39;rnd&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>
</pre></div>
</div>
<p>Ce dictionnaire offre aussi la possibilité de tester si un
attribut existe ou non. Dans un des exemples du paragraphe
précédent, l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> était créé dans la méthode
<code class="docutils literal notranslate"><span class="pre">methode1</span></code>, sa valeur était alors initialisée à chaque appel
et la fonction retournait sans cesse la même valeur. En testant
l’existence de l’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code>, il est possible de le créer
dans la méthode <code class="docutils literal notranslate"><span class="pre">methode1</span></code> au premier appel sans que les
appels suivants ne réinitialisent sa valeur à 42.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;rnd&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>  <span class="c1"># l&#39;attribut existe-t-il ?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># création de l&#39;attribut</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;rnd&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># autre écriture possible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">methode1</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># affiche [19, 46, 26, 88, 44, 56, 56, 26, 0, 8]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="attributs-implicites">
<span id="attribut-implicite-par"></span><h3>Attributs implicites<a class="headerlink" href="#attributs-implicites" title="Lien vers cette rubrique">¶</a></h3>
<p>Certains attributs sont créés de manière implicite lors de la
création d’une instance. Ils contiennent des informations sur l’instance.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__module__</span></code></p></td>
<td><p>Contient le nom du module dans lequel est incluse la classe
(voir chapitre <a class="reference internal" href="../c_module/module.html#chap-module"><span class="std std-ref">Module ou extension</span></a>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__class__</span></code></p></td>
<td><p>Contient le nom de la classe de l’instance.
Ce nom est précédé du nom du module suivi d’un point.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__dict__</span></code></p></td>
<td><p>Contient la liste des attributs de l’instance
(voir paragraphe <a class="reference internal" href="#par-class-liste-attribut"><span class="std std-ref">Liste des attributs</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__doc__</span></code></p></td>
<td><p>Contient un commentaire associé à la classe
(voir paragraphe <a class="reference internal" href="#par-class-commentaire"><span class="std std-ref">Commentaires, aide</span></a>.</p></td>
</tr>
</tbody>
</table>
</div>
<p>L’attribut <code class="docutils literal notranslate"><span class="pre">__class__</span></code> contient lui même d’autres d’attributs :</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__doc__</span></code></p></td>
<td><p>Contient un commentaire associé à la classe
(voir paragraphe <a class="reference internal" href="#par-class-commentaire"><span class="std std-ref">Commentaires, aide</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__dict__</span></code></p></td>
<td><p>Contient la liste des attributs statiques (définis hors d’une méthode)
et des méthodes (voir paragraphe <a class="reference internal" href="#classe-attribut-statique"><span class="std std-ref">Attributs statiques</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__name__</span></code></p></td>
<td><p>Contient le nom de l’instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__bases__</span></code></p></td>
<td><p>Contient les classes dont la classe de l’instance hérite
(voir paragraphe <a class="reference internal" href="#par-classe-heritage"><span class="std std-ref">Héritage</span></a>.</p></td>
</tr>
</tbody>
</table>
</div>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__module__</span><span class="p">)</span>  <span class="c1"># affiche __main__</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>  <span class="c1"># affiche __main__.classe_vide ()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># affiche {}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>  <span class="c1"># affiche None  (voir paragraphe suivant)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>  <span class="c1"># affiche None</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># affiche {&#39;__module__&#39;: &#39;__main__&#39;,</span>
<span class="c1">#          &#39;__doc__&#39;: None}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>  <span class="c1"># affiche classe_vide</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">)</span>  <span class="c1"># affiche ()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    sphinx_runpython.runpython.sphinx_runpython_extension
    &lt;class &#39;sphinx_runpython.runpython.sphinx_runpython_extension.run_python_script_139915484621824.&lt;locals&gt;.classe_vide&#39;&gt;
    {}
    None
    None
    {&#39;__module__&#39;: &#39;sphinx_runpython.runpython.sphinx_runpython_extension&#39;, &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;classe_vide&#39; objects&gt;, &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;classe_vide&#39; objects&gt;, &#39;__doc__&#39;: None}
    classe_vide
    (&lt;class &#39;object&#39;&gt;,)
</pre></div>
</div>
</section>
<section id="commentaires-aide">
<span id="par-class-commentaire"></span><h3>Commentaires, aide<a class="headerlink" href="#commentaires-aide" title="Lien vers cette rubrique">¶</a></h3>
<p id="index-7">Comme les fonctions et les méthodes, des commentaires peuvent être
associés à une classe, ils sont affichés grâce à la fonction
<code class="docutils literal notranslate"><span class="pre">help</span></code>. Cette dernière présente le commentaire associé à la classe,
la liste des méthodes ainsi que chacun des commentaires qui leur
sont associés. Ce commentaire est affecté à l’attribut implicite
<code class="docutils literal notranslate"><span class="pre">__doc__</span></code>. L’appel à la fonction <code class="docutils literal notranslate"><span class="pre">help</span></code> rassemble le commentaire
de toutes les méthodes, le résultat suit le programme ci-dessous.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;simule une suite de nombres aléatoires&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;constructeur : initialisation de la première valeur&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;simule la génération d&#39;un nombre aléatoire</span>
<span class="sd">        compris entre 0 et n-1 inclus&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">help</span><span class="p">(</span><span class="n">exemple_classe</span><span class="p">)</span>  <span class="c1"># appelle l&#39;aide associée à la classe</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">Help</span> <span class="n">on</span> <span class="k">class</span> <span class="nc">exemple_classe</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">sphinx_runpython</span><span class="o">.</span><span class="n">runpython</span><span class="o">.</span><span class="n">sphinx_runpython_extension</span><span class="p">:</span>
    
    <span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">(</span><span class="n">builtins</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>
     <span class="o">|</span>  <span class="n">simule</span> <span class="n">une</span> <span class="n">suite</span> <span class="n">de</span> <span class="n">nombres</span> <span class="n">aléatoires</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="n">Methods</span> <span class="n">defined</span> <span class="n">here</span><span class="p">:</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
     <span class="o">|</span>      <span class="n">constructeur</span> <span class="p">:</span> <span class="n">initialisation</span> <span class="n">de</span> <span class="n">la</span> <span class="n">première</span> <span class="n">valeur</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="n">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
     <span class="o">|</span>      <span class="n">simule</span> <span class="n">la</span> <span class="n">génération</span> <span class="n">d</span><span class="s1">&#39;un nombre aléatoire</span>
     <span class="o">|</span>      <span class="n">compris</span> <span class="n">entre</span> <span class="mi">0</span> <span class="n">et</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span> <span class="n">inclus</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="o">----------------------------------------------------------------------</span>
     <span class="o">|</span>  <span class="n">Data</span> <span class="n">descriptors</span> <span class="n">defined</span> <span class="n">here</span><span class="p">:</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="vm">__dict__</span>
     <span class="o">|</span>      <span class="n">dictionary</span> <span class="k">for</span> <span class="n">instance</span> <span class="n">variables</span>
     <span class="o">|</span>
     <span class="o">|</span>  <span class="vm">__weakref__</span>
     <span class="o">|</span>      <span class="nb">list</span> <span class="n">of</span> <span class="n">weak</span> <span class="n">references</span> <span class="n">to</span> <span class="n">the</span> <span class="nb">object</span>
</pre></div>
</div>
<p>Pour obtenir seulement le commentaire associé à la classe,
il suffit d’écrire l’une des trois lignes suivantes :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;simule une suite de nombres aléatoires&quot;&quot;&quot;</span>

    <span class="k">pass</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">exemple_classe</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>  <span class="c1"># affiche simule une suite de nombres aléatoires</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>  <span class="c1"># affiche simule une suite de nombres aléatoires</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>  <span class="c1"># affiche simule une suite de nombres aléatoires</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">simule</span> <span class="n">une</span> <span class="n">suite</span> <span class="n">de</span> <span class="n">nombres</span> <span class="n">aléatoires</span>
    <span class="n">simule</span> <span class="n">une</span> <span class="n">suite</span> <span class="n">de</span> <span class="n">nombres</span> <span class="n">aléatoires</span>
    <span class="n">simule</span> <span class="n">une</span> <span class="n">suite</span> <span class="n">de</span> <span class="n">nombres</span> <span class="n">aléatoires</span>
</pre></div>
</div>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">help</span></code> permet d’accéder à l’aide associée à une
fonction, une classe. Il existe des outils qui permettent de
collecter tous ces commentaires pour construire une documentation
au format <em>HTML</em> à l’aide d’outils comme
<a class="reference external" href="https://docs.python.org/3/library/pydoc.html">pydoc</a>
Ces outils sont souvent assez simples d’utilisation.
Le plus utilisé est
<a class="reference external" href="http://www.sphinx-doc.org/en/">sphinx</a>.</p>
<p id="index-8">La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=dir#dir">dir</a> permet aussi d’obtenir des informations
sur la classe. Cette fonction appliquée à la classe ou à une
instance retourne l’ensemble de la liste des attributs et des
méthodes. L’exemple suivant utilise la fonction
<a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=dir#dir">dir</a> avant et après l’appel de la méthode <code class="docutils literal notranslate"><span class="pre">meth</span></code>. Etant donné
que cette méthode ajoute un attribut, la fonction
<a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=dir#dir">dir</a> retourne une liste plus longue après l’appel.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">essai_class</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">7</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">essai_class</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>  <span class="c1"># affiche [&#39;__doc__&#39;, &#39;__module__&#39;, &#39;meth&#39;]</span>
<span class="n">a</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>  <span class="c1"># affiche [&#39;__doc__&#39;, &#39;__module__&#39;, &#39;meth&#39;, &#39;y&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">essai_class</span><span class="p">))</span>  <span class="c1"># affiche [&#39;__doc__&#39;, &#39;__module__&#39;, &#39;meth&#39;]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dir__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="s1">&#39;__eq__&#39;</span><span class="p">,</span> <span class="s1">&#39;__format__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ge__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getstate__&#39;</span><span class="p">,</span> <span class="s1">&#39;__gt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__hash__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span> <span class="s1">&#39;__le__&#39;</span><span class="p">,</span> <span class="s1">&#39;__lt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ne__&#39;</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span> <span class="s1">&#39;__repr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span> <span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;__subclasshook__&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span> <span class="s1">&#39;meth&#39;</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dir__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="s1">&#39;__eq__&#39;</span><span class="p">,</span> <span class="s1">&#39;__format__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ge__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getstate__&#39;</span><span class="p">,</span> <span class="s1">&#39;__gt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__hash__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span> <span class="s1">&#39;__le__&#39;</span><span class="p">,</span> <span class="s1">&#39;__lt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ne__&#39;</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span> <span class="s1">&#39;__repr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span> <span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;__subclasshook__&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span> <span class="s1">&#39;meth&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="p">[</span><span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dir__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="s1">&#39;__eq__&#39;</span><span class="p">,</span> <span class="s1">&#39;__format__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ge__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getstate__&#39;</span><span class="p">,</span> <span class="s1">&#39;__gt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__hash__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span> <span class="s1">&#39;__le__&#39;</span><span class="p">,</span> <span class="s1">&#39;__lt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ne__&#39;</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span> <span class="s1">&#39;__repr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span> <span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;__subclasshook__&#39;</span><span class="p">,</span> <span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span> <span class="s1">&#39;meth&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=dir#dir">dir</a>
appliquée à la classe elle-même retourne une liste qui inclut
les méthodes et les attributs déjà déclarés. Elle n’inclut pas
ceux qui sont déclarés dans une méthode jamais exécutée
jusqu’à présent.</p>
</section>
<section id="classe-incluse">
<span id="par-class-incluse"></span><h3>Classe incluse<a class="headerlink" href="#classe-incluse" title="Lien vers cette rubrique">¶</a></h3>
<p>Parfois, il arrive qu’une classe soit exclusivement utilisée en
couple avec une autre, c’est par exemple le cas des itérateurs
(voir paragraphe <a class="reference internal" href="#chap-iterateur"><span class="std std-ref">Itérateurs</span></a>. Il est alors possible
d’inclure dans la déclaration d’une classe celle d’une sous-classe.</p>
<p>L’exemple qui suit contient la classe <code class="docutils literal notranslate"><span class="pre">ensemble_element</span></code>. C’est
un ensemble de points en trois dimensions (classe <code class="docutils literal notranslate"><span class="pre">element</span></code>)
qui n’est utilisé que par cette classe. Déclarer la
classe <code class="docutils literal notranslate"><span class="pre">element</span></code> à l’intérieur de la classe
<code class="docutils literal notranslate"><span class="pre">ensemble_element</span></code> est un moyen de signifier ce lien.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ensemble_element</span><span class="p">:</span>

    <span class="k">class</span> <span class="nc">element</span><span class="p">:</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all</span> <span class="o">=</span> <span class="p">[</span><span class="n">ensemble_element</span><span class="o">.</span><span class="n">element</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">barycentre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">ensemble_element</span><span class="o">.</span><span class="n">element</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">:</span>
            <span class="n">b</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">el</span><span class="o">.</span><span class="n">x</span>
            <span class="n">b</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">el</span><span class="o">.</span><span class="n">y</span>
            <span class="n">b</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="n">el</span><span class="o">.</span><span class="n">z</span>
        <span class="n">b</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
        <span class="n">b</span><span class="o">.</span><span class="n">y</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
        <span class="n">b</span><span class="o">.</span><span class="n">z</span> <span class="o">/=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span>


<span class="n">f</span> <span class="o">=</span> <span class="n">ensemble_element</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">barycentre</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>  <span class="c1"># affiche 1.5 0.5 0.5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mf">1.5</span> <span class="mf">0.5</span> <span class="mf">0.5</span>
</pre></div>
</div>
<p>Pour créer une instance de la classe <code class="docutils literal notranslate"><span class="pre">element</span></code>, il faut
faire précéder son nom de la classe où elle est déclarée :
<code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">ensemble_element.element()</span></code> comme c’est le cas
dans la méthode <code class="docutils literal notranslate"><span class="pre">barycentre</span></code> par exemple.</p>
</section>
</section>
<section id="operateurs">
<span id="par-constructeur-operateur"></span><h2>Opérateurs<a class="headerlink" href="#operateurs" title="Lien vers cette rubrique">¶</a></h2>
<p>Les opérateurs sont des symboles du langages comme
<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">+=</span></code>, … Au travers des opérateurs,
il est possible de donner un sens à une syntaxe
comme celle de l’exemple suivant :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nouvelle_classe</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">nouvelle_classe</span><span class="p">()</span> <span class="o">+</span> <span class="n">nouvelle_classe</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">6</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_139915483599552</span>
    <span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s1">&#39;nouvelle_classe&#39;</span> <span class="ow">and</span> <span class="s1">&#39;nouvelle_classe&#39;</span>
</pre></div>
</div>
<p>L’addition n’est pas le seul symbole concerné,
le langage <em>python</em> permet de donner un sens à tous
les opérateurs numériques et d’autres reliés à des
fonctions du langage comme <code class="docutils literal notranslate"><span class="pre">len</span></code> ou <code class="docutils literal notranslate"><span class="pre">max</span></code>.
Le programme suivant contient une classe définissant un nombre
complexe. La méthode <code class="docutils literal notranslate"><span class="pre">ajoute</span></code> définit ce qu’est une addition
entre nombres complexes.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>


<span class="k">class</span> <span class="nc">nombre_complexe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ajoute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="n">ajoute</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>  <span class="c1"># c = c1 + c2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Toutefois, on aimerait bien écrire simplement
<code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">c1</span> <span class="pre">+</span> <span class="pre">c2</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">c1.ajoute(c2)</span></code>
car cette syntaxe est plus facile à lire et surtout
plus intuitive. Le langage <em>python</em> offre cette possibilité.
Il existe en effet des méthodes <em>clés</em> dont l’implémentation
définit ce qui doit être fait dans le cas d’une addition,
d’une comparaison, d’un affichage, … A l’instar du constructeur,
toutes ces méthodes clés, qu’on appelle des <em>opérateurs</em>, sont encadrées
par deux blancs soulignés, leur déclaration suit invariablement
le même schéma. Voici celui de l’opérateur <code class="docutils literal notranslate"><span class="pre">__add__</span></code>
qui décrit ce qu’il faut faire pour une addition.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_class</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autre</span><span class="p">):</span>
        <span class="c1"># corps de l&#39;opérateur</span>
        <span class="k">return</span> <span class="o">...</span>  <span class="c1"># nom_classe</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe. L’opérateur <code class="docutils literal notranslate"><span class="pre">__add__</span></code> définit
l’addition entre l’instance <code class="docutils literal notranslate"><span class="pre">self</span></code> et l’instance <code class="docutils literal notranslate"><span class="pre">autre</span></code>
et retourne une instance de la classe  <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code>.</p>
<p>Le programme suivant reprend le précédent de manière à ce
que l’addition de deux nombres complexes soit dorénavant
une syntaxe correcte.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>


<span class="k">class</span> <span class="nc">nombre_complexe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">c1</span> <span class="o">+</span> <span class="n">c2</span>  <span class="c1"># cette expression est maintenant syntaxiquement correcte</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">c1</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>  <span class="c1"># même ligne que la précédente mais écrite explicitement</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>L’avant dernière ligne appelant la méthode <code class="docutils literal notranslate"><span class="pre">__add__</span></code> transcrit de façon
explicite ce que le langage <em>python</em> fait lorsqu’il rencontre un
opérateur <code class="docutils literal notranslate"><span class="pre">+</span></code> qui s’applique à des classes. Plus précisément,
<code class="docutils literal notranslate"><span class="pre">c1</span></code> et <code class="docutils literal notranslate"><span class="pre">c2</span></code> pourraient être de classes différentes, l’expression
serait encore valide du moment que la classe dont dépend <code class="docutils literal notranslate"><span class="pre">c1</span></code>
a redéfini la méthode <code class="docutils literal notranslate"><span class="pre">__add__</span></code>.
Chaque opérateur possède sa méthode-clé associée. L’opérateur <code class="docutils literal notranslate"><span class="pre">+=</span></code>,
différent de <code class="docutils literal notranslate"><span class="pre">+</span></code> est associé à la méthode-clé <code class="docutils literal notranslate"><span class="pre">__iadd__</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_class</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__iadd__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autre</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># corps de l&#39;opérateur</span>
        <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe. L’opérateur <code class="docutils literal notranslate"><span class="pre">__iadd__</span></code> définit
l’addition entre l’instance <code class="docutils literal notranslate"><span class="pre">self</span></code> et l’instance <code class="docutils literal notranslate"><span class="pre">autre</span></code>.
L’instance <code class="docutils literal notranslate"><span class="pre">self</span></code> est modifiée pour recevoir le résultat.
L’opérateur retourne invariablement l’instance modifiée <code class="docutils literal notranslate"><span class="pre">self</span></code>.
On étoffe la classe <code class="docutils literal notranslate"><span class="pre">nombre_complexe</span></code> à l’aide de l’opérateur <code class="docutils literal notranslate"><span class="pre">__iadd__</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>


<span class="k">class</span> <span class="nc">nombre_complexe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span>
        <span class="k">return</span> <span class="bp">self</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">c1</span> <span class="o">+=</span> <span class="n">c2</span>  <span class="c1"># utilisation de l&#39;opérateur +=</span>
<span class="n">c1</span><span class="o">.</span><span class="fm">__iadd__</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>  <span class="c1"># c&#39;est la transcription explicite de la ligne précédente</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c1</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">c1</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">2</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Un autre opérateur souvent utilisé est <code class="docutils literal notranslate"><span class="pre">__str__</span></code> qui permet de
redéfinir l’affichage d’un objet lors d’un appel à l’instruction <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe7">
<p class="admonition-title">Syntaxe S8 : Déclaration de l’opérateur __str__</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_class</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__str__</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># corps de l&#39;opérateur</span>
        <span class="k">return</span><span class="o">...</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe. L’opérateur <code class="docutils literal notranslate"><span class="pre">__str__</span></code> construit une
chaîne de caractères qu’il retourne comme résultat de façon à être
affiché.
L’exemple suivant reprend la classe <code class="docutils literal notranslate"><span class="pre">nombre_complexe</span></code> pour que
l’instruction <code class="docutils literal notranslate"><span class="pre">print</span></code> affiche un nombre complexe sous la forme <img class="math" src="../../_images/math/1f797f8751a5da25d7a1a561e29ab98dacb78fd6.svg" alt="a+ i b"/>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nombre_complexe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> + </span><span class="si">%f</span><span class="s2"> i&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> - </span><span class="si">%f</span><span class="s2"> i&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">c3</span> <span class="o">=</span> <span class="n">c1</span> <span class="o">+</span> <span class="n">c2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span>  <span class="c1"># affiche 1.000000 + 1.000000 i</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mf">1.000000</span> <span class="o">+</span> <span class="mf">1.000000</span> <span class="n">i</span>
</pre></div>
</div>
<p>Il existe de nombreux opérateurs qu’il est possible de définir.
La table <a class="reference internal" href="#operateur-classe"><span class="std std-ref">opérateurs et classes</span></a> présente les plus utilisés.
Parmi ceux-là, on peut s’attarder sur les opérateurs
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> et <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>, ils redéfinissent l’opérateur
<code class="docutils literal notranslate"><span class="pre">[]</span></code> permettant d’accéder à un élément d’une liste ou d’un dictionnaire.
Le premier, <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> est utilisé lors d’un calcul, un affichage.
Le second, <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>, est utilisé pour affecter une valeur.</p>
<p>L’exemple suivant définit un point de l’espace avec trois coordonnées.
Il redéfinit ou <em>surcharge</em> les opérateurs <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>
et <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> de manière à pouvoir accéder aux coordonnées de la
classe <code class="docutils literal notranslate"><span class="pre">point_espace</span></code> qui définit un point dans l’espace.
En règle générale, lorsque les indices ne sont pas corrects, ces
deux opérateurs lèvent l’exception <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>
(voir le chapitre <a class="reference internal" href="../c_exception/exception.html#chap-exception"><span class="std std-ref">Exceptions</span></a>).</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span>
        <span class="c1"># pour tous les autres cas --&gt; erreur</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;indice impossible, 0,1,2 autorisés&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">z</span>
        <span class="c1"># pour tous les autres cas --&gt; erreur</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;indice impossible, 0,1,2 autorisés&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span><span class="p">)</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># affiche (1.000000,-2.000000,3.000000)</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>  <span class="c1"># (__setitem__) affecte -3 à a.y</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;abscisse : &quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># (__getitem__) affiche abscisse :  1</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ordonnée : &quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># (__getitem__) affiche ordonnée :  -3</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;altitude : &quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># (__getitem__) affiche altitude :  3</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="mf">1.000000</span><span class="p">,</span><span class="o">-</span><span class="mf">2.000000</span><span class="p">,</span><span class="mf">3.000000</span><span class="p">)</span>
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">31</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">27</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_139915484427264</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">16</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__setitem__</span>
    <span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;y&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</pre></div>
</div>
<p>Par le biais de l’exception <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>, les expressions
<code class="docutils literal notranslate"><span class="pre">a[i]</span></code> avec <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">!=</span> <span class="pre">0,1,2</span></code> sont impossibles et arrêtent
le programme par un message comme celui qui suit obtenu après
l’interprétation de <code class="docutils literal notranslate"><span class="pre">print(a[4])</span></code> :</p>
<div class="table-wrapper colwidths-given docutils container" id="operateur-classe">
<table class="docutils align-default" id="operateur-classe">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__cmp__(self,x)</span></code></p></td>
<td><p>Retourne un entier égale à -1, 0, 1, chacune de ces valeurs
étant associés respectivement à :
<code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&lt;</span> <span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">==</span> <span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">&gt;</span> <span class="pre">x</span></code>.
Cet opérateur est appelé par la fonction <code class="docutils literal notranslate"><span class="pre">cmp</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__str__(self)</span></code></p></td>
<td><p>Convertit un objet en une chaîne de caractère qui sera
affichée par la fonction <code class="docutils literal notranslate"><span class="pre">print</span></code> ou obtenu avec
la fonction <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__contains__(self,x)</span></code></p></td>
<td><p>Retourne <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code> selon que <code class="docutils literal notranslate"><span class="pre">x</span></code>
appartient à <code class="docutils literal notranslate"><span class="pre">self</span></code>. Le mot-clé <code class="docutils literal notranslate"><span class="pre">in</span></code> renvoie
à cet opérateur. En d’autres termes,
<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">obj:</span></code> appelle
<code class="docutils literal notranslate"><span class="pre">obj.__contains__(x)</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__len__(self)</span></code></p></td>
<td><p>Retourne le nombre d’élément de <code class="docutils literal notranslate"><span class="pre">self</span></code>. Cet opérateur
est appelé par la fonction <code class="docutils literal notranslate"><span class="pre">len</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__abs__(self)</span></code></p></td>
<td><p>Cet opérateur est appelé par la fonction <code class="docutils literal notranslate"><span class="pre">abs</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__getitem__(self,i)</span></code></p></td>
<td><p>Cet opérateur est appelé lorsqu’on cherche à accéder à un élément
de l’objet <code class="docutils literal notranslate"><span class="pre">self</span></code> d’indice <code class="docutils literal notranslate"><span class="pre">i</span></code> comme si c’était une liste.
Si l’indice <code class="docutils literal notranslate"><span class="pre">i</span></code> est incorrect, l’exception <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>
doit être levée.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__setitem__(self,i,v)</span></code></p></td>
<td><p>Cet opérateur est appelé lorsqu’on cherche à affecter une valeur <code class="docutils literal notranslate"><span class="pre">v</span></code>
à un élément de l’objet <code class="docutils literal notranslate"><span class="pre">self</span></code> d’indice <code class="docutils literal notranslate"><span class="pre">i</span></code>
comme si c’était une liste ou un dictionnaire.
Si l’indice <code class="docutils literal notranslate"><span class="pre">i</span></code> est incorrect, l’exception <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__delitem__(self,i)</span></code></p></td>
<td><p>Cet opérateur est appelé lorsqu’on cherche à supprimer l’élément
de l’objet <code class="docutils literal notranslate"><span class="pre">self</span></code> d’indice <code class="docutils literal notranslate"><span class="pre">i</span></code>
comme si c’était une liste ou un dictionnaire.
Si l’indice <code class="docutils literal notranslate"><span class="pre">i</span></code> est incorrect, l’exception <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>
doit être levée.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__int__(self)</span></code>, <code class="docutils literal notranslate"><span class="pre">__float__(self)</span></code>, <code class="docutils literal notranslate"><span class="pre">__complex__(self)</span></code></p></td>
<td><p>Ces opérateurs implémente la conversion de l’instance
<code class="docutils literal notranslate"><span class="pre">self</span></code> en entier, réel ou complexe.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__add__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__div__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__mul__(self,x)</span></code>
<code class="docutils literal notranslate"><span class="pre">__sub__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__pow__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__lshift__(self,</span> <span class="pre">x)</span></code>,
<code class="docutils literal notranslate"><span class="pre">__rshift__(self,</span> <span class="pre">x)</span></code></p></td>
<td><p>Opérateurs appelés pour les opérations
<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__iadd__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__idiv__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__imul__(self,x)</span></code>,
<code class="docutils literal notranslate"><span class="pre">__isub__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__ipow__(self,x)</span></code>, <code class="docutils literal notranslate"><span class="pre">__ilshift__(self,</span> <span class="pre">x)</span></code>
<code class="docutils literal notranslate"><span class="pre">__irshift__(self,</span> <span class="pre">x)</span></code></p></td>
<td><p>Opérateurs appelés pour les opérations
<code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">**=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;&gt;=</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p id="index-9">La liste complète est accessible à
<a class="reference external" href="https://docs.python.org/3/library/operator.html">Operators</a>.
Le langage <a class="reference external" href="https://www.python.org/">Python</a> autorise une opération peu commune
aux autres langages : des
<a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__radd__">opérateurs retournés</a>.
Cela permet de donner un sens à une expression du type
<code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">+</span> <span class="pre">instance</span> <span class="pre">d'un</span> <span class="pre">objet</span></code>. Le type entier ne définit pas cette
opération et elle devrait normalement échoué. Comme elle n’exsite pas,
il est possible de définir un opérateur retourné qui prend le relais
dans ce cas. Il est recommandé d’en faire un usage modéré car
c’est quelque chose peu répandu dans les langages de programmation.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RightSide</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;RS(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">RightSide</span><span class="p">(</span><span class="s2">&quot;9999999999&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">LeftSide</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;LS(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">LeftSide</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">o</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">RightSide</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">o</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rlshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__radd__</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">LeftSide</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="n">LeftSide</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">LeftSide</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">4</span> <span class="o">&lt;&lt;</span> <span class="n">LeftSide</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">RightSide</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">LeftSide</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">LS</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">RS</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="o">---</span>
    <span class="n">LS</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">RS</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="o">---</span>
    <span class="n">RS</span><span class="p">(</span><span class="mi">9999999999</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="iterateurs">
<span id="chap-iterateur"></span><h2>Itérateurs<a class="headerlink" href="#iterateurs" title="Lien vers cette rubrique">¶</a></h2>
<p>L’opérateur <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> permet de définir ce qu’on appelle un
itérateur. C’est un objet qui permet d’en explorer un autre,
comme une liste ou un dictionnaire. Un itérateur est un objet
qui désigne un élément d’un ensemble à parcourir et qui
connaît l’élément suivant à visiter. Il doit pour cela contenir
une référence à l’objet qu’il doit explorer et inclure une
méthode <code class="docutils literal notranslate"><span class="pre">__next__</span></code> qui retourne l’élément suivant ou lève
une exception si l’élément actuel est le dernier.</p>
<p>Par exemple, on cherche à explorer tous les éléments d’un objet de type
<code class="docutils literal notranslate"><span class="pre">point_espace</span></code> défini au paragraphe précédent. Cette exploration
doit s’effectuer au moyen d’une boucle <code class="docutils literal notranslate"><span class="pre">for</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># affiche successivement 1,-2,3</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span>
    <span class="o">-</span><span class="mi">2</span>
    <span class="mi">3</span>
</pre></div>
</div>
<p>Cette boucle cache en fait l’utilisation d’un itérateur qui
apparaît explicitement dans l’exemple suivant équivalent au
précédent (voir paragraphe <a class="reference internal" href="../c_lang/syntaxe.html#paragraphe-tterafsd-syntaxe"><span class="std std-ref">Itérateurs</span></a>).</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span>
    <span class="o">-</span><span class="mi">2</span>
    <span class="mi">3</span>
</pre></div>
</div>
<p>Afin que cet extrait de programme fonctionne, il faut définir
un itérateur pour la classe <code class="docutils literal notranslate"><span class="pre">point_espace</span></code>. Cet itérateur
doit inclure la méthode <code class="docutils literal notranslate"><span class="pre">__next__</span></code>. La classe <code class="docutils literal notranslate"><span class="pre">point_espace</span></code>
doit quant à elle définir l’opérateur <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> pour
retourner l’itérateur qui permettra de l’explorer.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span>
        <span class="c1"># pour tous les autres cas --&gt; erreur</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;indice impossible, 0,1,2 autorisés&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">class_iter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;cette classe définit un itérateur pour point_espace&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ins</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;initialisation, self._ins permet de savoir quelle</span>
<span class="sd">            instance de point_espace on explore,</span>
<span class="sd">            self._n mémorise l&#39;indice de l&#39;élément exploré&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ins</span> <span class="o">=</span> <span class="n">ins</span>

        <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># le langage impose cette méthode</span>
            <span class="k">return</span> <span class="bp">self</span>  <span class="c1"># dans certaines configurations</span>

        <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;retourne l&#39;élément d&#39;indice self._n et passe à l&#39;élément suivant&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ins</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># si cet élément n&#39;existe pas, lève une exception</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;opérateur de la classe point_espace, retourne un itérateur</span>
<span class="sd">        permettant de l&#39;explorer&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">point_espace</span><span class="o">.</span><span class="n">class_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># affiche successivement 1,-2,3</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span>
    <span class="o">-</span><span class="mi">2</span>
    <span class="mi">3</span>
</pre></div>
</div>
<p id="index-10">Cette syntaxe peut paraître fastidieuse mais elle montre
de manière explicite le fonctionnement des itérateurs. Cette
construction est plus proche de ce que d’autres langages objets
proposent. <em>python</em> offre néanmoins une syntaxe plus courte avec
le mot-clé <code class="docutils literal notranslate"><span class="pre">yield</span></code> qui permet d’éviter la création de la classe
<code class="docutils literal notranslate"><span class="pre">class_iter</span></code>. Le code de la méthode <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> change mais
les dernières lignes du programme précédent qui affichent
successivement les éléments de <code class="docutils literal notranslate"><span class="pre">point_espace</span></code> sont
toujours valides.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span>
        <span class="c1"># pour tous les autres cas --&gt; erreur</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;indice impossible, 0,1,2 autorisés&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;itérateur avec yield (ou générateur)&quot;&quot;&quot;</span>
        <span class="n">_n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">_n</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">_n</span><span class="p">)</span>
            <span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># affiche successivement 1,-2,3</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">1</span>
    <span class="o">-</span><span class="mi">2</span>
    <span class="mi">3</span>
</pre></div>
</div>
</section>
<section id="methodes-attributs-statiques-et-ajout-de-methodes">
<span id="par-methode-statique"></span><h2>Méthodes, attributs statiques et ajout de méthodes<a class="headerlink" href="#methodes-attributs-statiques-et-ajout-de-methodes" title="Lien vers cette rubrique">¶</a></h2>
<section id="methode-statique">
<h3>Méthode statique<a class="headerlink" href="#methode-statique" title="Lien vers cette rubrique">¶</a></h3>
<div class="admonition-mathdef admonition" id="indexmathe-Définition4">
<span id="index-11"></span><p class="admonition-title">Définition D5 : méthode statique</p>
<p>Les méthodes statiques sont des méthodes qui peuvent être appelées même si aucune
instance de la classe où elles sont définies n’a été créée.</p>
</div>
<p>L’exemple suivant définit une classe avec une seule méthode.
Comme toutes les méthodes présentées jusqu’à présent, elle
inclut le paramètre <code class="docutils literal notranslate"><span class="pre">self</span></code> qui correspond à l’instance pour
laquelle elle est appelée.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">essai_class</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">methode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;méthode non statique&quot;</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">essai_class</span><span class="p">()</span>
<span class="n">x</span><span class="o">.</span><span class="n">methode</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">méthode</span> <span class="n">non</span> <span class="n">statique</span>
</pre></div>
</div>
<p>Une méthode statique ne nécessite pas qu’une instance soit créée pour
être appelée. C’est donc une méthode n’ayant pas besoin du paramètre <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe8">
<p class="admonition-title">Syntaxe S9 : Déclaration d’une méthode statique</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_class</span> <span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">nom_methode</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># corps de la méthode</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe, <code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> est une méthode statique.
Il faut pourtant ajouter la ligne suivante pour indiquer à la classe que
cette méthode est bien statique à l’aide du mot-clé
<a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=staticmethod#staticmethod">staticmethod</a>.
Le programme précédent est modifié pour inclure une méthode statique. La méthode
<code class="docutils literal notranslate"><span class="pre">methode</span></code> ne nécessite aucune création d’instance pour être appelée.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">essai_class</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">methode</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;méthode statique&quot;</span><span class="p">)</span>


<span class="n">essai_class</span><span class="o">.</span><span class="n">methode</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">méthode</span> <span class="n">statique</span>
</pre></div>
</div>
<p>Il est également possible de déclarer une fonction statique à
l’extérieur d’une classe puis de l’ajouter en tant que méthode
statique à cette classe. Le programme suivant déclare une fonction
<code class="docutils literal notranslate"><span class="pre">methode</span></code> puis indique à la classe <code class="docutils literal notranslate"><span class="pre">essai_class</span></code> que la fonction
est aussi une méthode statique de sa classe (avant-dernière ligne de l’exemple).</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">methode</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;méthode statique&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">essai_class</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="n">essai_class</span><span class="o">.</span><span class="n">methode</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">methode</span><span class="p">)</span>
<span class="n">essai_class</span><span class="o">.</span><span class="n">methode</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">méthode</span> <span class="n">statique</span>
</pre></div>
</div>
<p id="class-remarque-constructeur-non">Toutefois, il est conseillé de placer l’instruction qui contient <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code>
à l’intérieur de la classe. Elle n’y sera exécutée qu’une seule fois
comme le montre l’exemple suivant :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">methode</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;méthode statique&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">classe_vide</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;création d&#39;une instance de la classe classe_vide&quot;</span><span class="p">)</span>
    <span class="n">methode</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">methode</span><span class="p">)</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>  <span class="c1"># affiche création d&#39;une instance de la classe essai_class</span>
<span class="n">ck</span> <span class="o">=</span> <span class="n">classe_vide</span><span class="p">()</span>  <span class="c1"># n&#39;affiche rien</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">création</span> <span class="n">d</span><span class="s1">&#39;une instance de la classe classe_vide</span>
</pre></div>
</div>
<p>Les méthodes statiques sont souvent employées pour créer
des instances spécifiques d’une classe.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Couleur</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">blanc</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">Couleur</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">noir</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">Couleur</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="n">c</span> <span class="o">=</span> <span class="n">Couleur</span><span class="o">.</span><span class="n">blanc</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche (255, 255, 255)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Couleur</span><span class="o">.</span><span class="n">noir</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche (0, 0, 0)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Les méthodes sont des fonctions spécifiques à une classe
sans être spécifique à une isntance.</p>
</section>
<section id="attributs-statiques">
<span id="classe-attribut-statique"></span><h3>Attributs statiques<a class="headerlink" href="#attributs-statiques" title="Lien vers cette rubrique">¶</a></h3>
<div class="admonition-mathdef admonition" id="indexmathe-Définition5">
<p class="admonition-title">Définition D6 : attribut statique</p>
<p>Les attributs statiques sont des attributs qui
peuvent être utilisés même si aucune
instance de la classe où ils sont définis n’a été créée.
Ces attributs sont partagés par toutes les instances.</p>
</div>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe9">
<p class="admonition-title">Syntaxe S10 : Déclaration d’un attribut statique</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_class</span> <span class="p">:</span>
    <span class="n">attribut_statique</span> <span class="o">=</span> <span class="n">valeur</span>
    <span class="k">def</span> <span class="nf">nom_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">params</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
        <span class="n">nom_class</span><span class="o">.</span><span class="n">attribut_statique2</span> <span class="o">=</span> <span class="n">valeur2</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">nom_methode_st</span> <span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">nom_class</span><span class="o">.</span><span class="n">attribut_statique3</span> <span class="o">=</span> <span class="n">valeur3</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe, <code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> est une méthode non statique,
<code class="docutils literal notranslate"><span class="pre">nom_methode_st</span></code> est une méthode statique. Les trois paramètres
<code class="docutils literal notranslate"><span class="pre">attribut_statique</span></code>, <code class="docutils literal notranslate"><span class="pre">attribut_statique2</span></code>, <code class="docutils literal notranslate"><span class="pre">attribut_statique3</span></code> sont statiques,
soit parce qu’ils sont déclarés en dehors d’une méthode, soit parce que
leur déclaration fait intervenir le nom de la classe.</p>
<p>Pour le programme suivant, la méthode <code class="docutils literal notranslate"><span class="pre">meth</span></code> n’utilise pas
<code class="docutils literal notranslate"><span class="pre">self.x</span></code> mais <code class="docutils literal notranslate"><span class="pre">essai_class.x</span></code>. L’attribut <code class="docutils literal notranslate"><span class="pre">x</span></code> est alors un
attribut statique, partagé par toutes les instances. C’est pourquoi
dans l’exemple qui suit l’instruction <code class="docutils literal notranslate"><span class="pre">z.meth()</span></code> affiche la valeur <code class="docutils literal notranslate"><span class="pre">6</span></code>
puisque l’appel <code class="docutils literal notranslate"><span class="pre">y.meth()</span></code> a incrémenté la variable statique <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">essai_class</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">essai_class</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">essai_class</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="n">y</span> <span class="o">=</span> <span class="n">essai_class</span><span class="p">()</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">essai_class</span><span class="p">()</span>
<span class="n">y</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>  <span class="c1"># affiche 5</span>
<span class="n">z</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>  <span class="c1"># affiche 6</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">5</span>
    <span class="mi">6</span>
</pre></div>
</div>
<p>Même si un attribut est statique, il peut être utilisé avec la
syntaxe <code class="docutils literal notranslate"><span class="pre">self.attribut_statique</span></code> dans une méthode non statique
à condition qu’un attribut non statique ne porte pas le même nom.
Si tel est pourtant le cas, certaines confusions peuvent apparaître :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">incremente_rnd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span>


<span class="n">cl</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># affiche {}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;rnd&quot;</span><span class="p">])</span>  <span class="c1"># affiche 42</span>
<span class="n">cl</span><span class="o">.</span><span class="n">incremente_rnd</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># affiche {&#39;rnd&#39;: 43}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s2">&quot;rnd&quot;</span><span class="p">])</span>  <span class="c1"># affiche 42</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{}</span>
    <span class="mi">42</span>
    <span class="p">{</span><span class="s1">&#39;rnd&#39;</span><span class="p">:</span> <span class="mi">43</span><span class="p">}</span>
    <span class="mi">42</span>
</pre></div>
</div>
<p>Dans ce cas, ce sont en fait deux attributs qui sont créés.
Le premier est un attribut statique créé avec la seconde ligne de
l’exemple <code class="docutils literal notranslate"><span class="pre">rnd=42</span></code>. Le second attribut n’est pas statique et
apparaît dès la première exécution de l’instruction <code class="docutils literal notranslate"><span class="pre">self.rnd+=1</span></code>
comme le montre son apparition dans l’attribut <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>
qui ne recense pas les attributs statiques.</p>
</section>
<section id="ajout-de-methodes">
<h3>Ajout de méthodes<a class="headerlink" href="#ajout-de-methodes" title="Lien vers cette rubrique">¶</a></h3>
<p>Ce point décrit une fonctionnalité du langage <em>python</em> rarement
utilisée. Il offre la possibilité d’ajouter une méthode à une
classe alors même que cette fonction est définie à l’extérieur
de la déclaration de la classe. Cette fonction doit obligatoirement
accepter un premier paramètre qui recevra l’instance de la classe.
La syntaxe utilise le mot-clé
<a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=classmethod#classmethod">classmethod</a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">nom_methode</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="c1"># code de la fonction</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">nom_classe</span><span class="p">:</span>
    <span class="c1"># code de la classe</span>
    <span class="n">nom_methode</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">nom_methode</span><span class="p">)</span>  <span class="c1"># syntaxe 1</span>


<span class="n">nom_classe</span><span class="o">.</span><span class="n">nom_methode</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">nom_methode</span><span class="p">)</span>  <span class="c1"># syntaxe 2</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe, <code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> est une méthode,
<code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> est une fonction qui est par la suite considérée comme
une méthode de la classe <code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> grâce à l’une ou l’autre des
deux instructions incluant le mot-clé <code class="docutils literal notranslate"><span class="pre">classmethod</span></code>.
Dans l’exemple qui suit, cette syntaxe est utilisée pour inclure
trois méthodes à la classe <code class="docutils literal notranslate"><span class="pre">essai_class</span></code> selon que la méthode est
déclarée et affectée à cette classe à l’intérieur ou à l’extérieur
du corps de <code class="docutils literal notranslate"><span class="pre">essai_class</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">meth3</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ok meth3&quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">meth4</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ok meth4&quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">essai_classe</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ok meth&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">meth2</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ok meth2&quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="n">meth3</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">meth3</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">essai_classe</span><span class="p">()</span>
<span class="n">x</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>  <span class="c1"># affiche ok meth 5</span>
<span class="n">x</span><span class="o">.</span><span class="n">meth2</span><span class="p">()</span>  <span class="c1"># affiche ok meth2 5</span>
<span class="n">x</span><span class="o">.</span><span class="n">meth3</span><span class="p">()</span>  <span class="c1"># affiche ok meth3 5</span>

<span class="n">essai_classe</span><span class="o">.</span><span class="n">meth4</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">meth4</span><span class="p">)</span>
<span class="n">x</span><span class="o">.</span><span class="n">meth4</span><span class="p">()</span>  <span class="c1"># affiche ok meth4 5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">ok</span> <span class="n">meth</span> <span class="mi">5</span>
    <span class="n">ok</span> <span class="n">meth2</span> <span class="mi">5</span>
    <span class="n">ok</span> <span class="n">meth3</span> <span class="mi">5</span>
    <span class="n">ok</span> <span class="n">meth4</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="proprietes">
<span id="exemple-point-xyz"></span><span id="classe-proprietes-par"></span><h3>Propriétés<a class="headerlink" href="#proprietes" title="Lien vers cette rubrique">¶</a></h3>
<p id="index-12">Cette fonctionnalité est également peu utilisée, elle permet
des raccourcis d’écriture. Les propriétés permettent de faire
croire à l’utilisateur d’une instance de classe qu’il utilise
une variable alors qu’il utilise en réalité une ou plusieurs
méthodes. A chaque fois que le programmeur utilise ce faux
attribut, il appelle une méthode qui calcule sa valeur. A
chaque fois que le programmeur cherche à modifier la valeur
de ce faux attribut, il appelle une autre méthode qui modifie
l’instance.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe10">
<p class="admonition-title">Syntaxe S11 : Déclaration d’une propriété</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="n">nom_propriete</span> <span class="o">=</span> <span class="nb">property</span> <span class="p">(</span><span class="n">fget</span><span class="p">,</span> <span class="n">fset</span><span class="p">,</span> <span class="n">fdel</span><span class="p">,</span> <span class="n">doc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>La documentation de la fonction
<a class="reference external" href="https://docs.python.org/3/library/functions.html#property">property</a>
propose une autre écriture plus intuitive.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe11">
<p class="admonition-title">Syntaxe S12 : Déclaration d’une propriété (2)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fget_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span>

    <span class="nd">@variable</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">fset_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable</span> <span class="o">=</span> <span class="n">v</span>
</pre></div>
</div>
</div>
<p>Au sein de ces trois lignes, <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est une classe,
<code class="docutils literal notranslate"><span class="pre">nom_propriete</span></code> est le nom de la propriété, <code class="docutils literal notranslate"><span class="pre">fget</span></code>
est la méthode qui doit retourner la valeur du pseudo-attribut
<code class="docutils literal notranslate"><span class="pre">nom_propriete</span></code>, <code class="docutils literal notranslate"><span class="pre">fset</span></code> est la méthode qui doit modifier
la valeur du pseudo-attribut <code class="docutils literal notranslate"><span class="pre">nom_propriete</span></code>, <code class="docutils literal notranslate"><span class="pre">fdel</span></code>
est la méthode qui doit détruire le pseudo-attribut
<code class="docutils literal notranslate"><span class="pre">nom_propriete</span></code>, <code class="docutils literal notranslate"><span class="pre">doc</span></code> est un commentaire qui apparaîtra
lors de l’appel de la fonction <code class="docutils literal notranslate"><span class="pre">help(nom_class)</span></code> ou
<code class="docutils literal notranslate"><span class="pre">help(nom_class.nom_propriete)</span></code>.</p>
<p>Pour illustrer l’utilisation des propriétés, on part d’une classe
<code class="docutils literal notranslate"><span class="pre">nombre_complexe</span></code> qui ne contient que les parties réelle et
imaginaire. Le module désigne ici le module d’un nombre complexe qui est égal à sa norme.
On le note <img class="math" src="../../_images/math/3c7a69c9d6269623b6c94da86c60dd0f8d65dc55.svg" alt="\left | a+ib \right | = \sqrt{a^2 + b^2}"/>. On fait appel à une méthode qui calcule
ce module. Lorsqu’on cherche à modifier ce module, on fait appel à une autre méthode
qui multiplie les parties réelle et imaginaire par un nombre réel positif
de manière à ce que le nombre complexe ait le module demandé.
On procède de même pour la propriété <code class="docutils literal notranslate"><span class="pre">arg</span></code>.</p>
<p>La propriété <code class="docutils literal notranslate"><span class="pre">conj</span></code> retourne quant à elle le conjugué du
nombre complexe mais la réciproque n’est pas prévue.
On ne peut affecter une valeur à <code class="docutils literal notranslate"><span class="pre">conj</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>


<span class="k">class</span> <span class="nc">nombre_complexe</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># voir remarque après l&#39;exemple</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> + </span><span class="si">%f</span><span class="s2"> i&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> - </span><span class="si">%f</span><span class="s2"> i&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">m</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">m</span> <span class="o">/</span> <span class="n">r</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*=</span> <span class="n">d</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*=</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">get_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">/</span> <span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_conjugue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

    <span class="n">module</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">fget</span><span class="o">=</span><span class="n">get_module</span><span class="p">,</span> <span class="n">fset</span><span class="o">=</span><span class="n">set_module</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
    <span class="n">arg</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">fget</span><span class="o">=</span><span class="n">get_argument</span><span class="p">,</span> <span class="n">fset</span><span class="o">=</span><span class="n">set_argument</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;argument&quot;</span><span class="p">)</span>
    <span class="n">conj</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">fget</span><span class="o">=</span><span class="n">get_conjugue</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;conjugué&quot;</span><span class="p">)</span>


<span class="n">c</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;c = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche c =  0.500000 + 0.866025 i</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>  <span class="c1"># affiche module =  1.0</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;argument = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>  <span class="c1"># affiche argument =  1.0471975512</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">nombre_complexe</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">c</span><span class="o">.</span><span class="n">arg</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;c = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche c =  -0.500000 + 0.866025 i</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>  <span class="c1"># affiche module =  1.0</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;argument = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>  <span class="c1"># affiche argument =  2.09439510239</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;conjugué = &quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">conj</span><span class="p">)</span>  <span class="c1"># affiche conjugué =  -0.500000 - 0.866025 i</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">c</span> <span class="o">=</span>  <span class="mf">0.500000</span> <span class="o">+</span> <span class="mf">0.866025</span> <span class="n">i</span>
    <span class="n">module</span> <span class="o">=</span>  <span class="mf">0.9999999999999999</span>
    <span class="n">argument</span> <span class="o">=</span>  <span class="mf">1.0471975511965976</span>
    <span class="n">c</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">0.500000</span> <span class="o">+</span> <span class="mf">0.866025</span> <span class="n">i</span>
    <span class="n">module</span> <span class="o">=</span>  <span class="mf">0.9999999999999999</span>
    <span class="n">argument</span> <span class="o">=</span>  <span class="mf">2.0943951023931953</span>
    <span class="n">conjugué</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">0.500000</span> <span class="o">-</span> <span class="mf">0.866025</span> <span class="n">i</span>
</pre></div>
</div>
<p>La propriété <code class="docutils literal notranslate"><span class="pre">conj</span></code> ne possède pas de fonction qui permet
de la modifier. Par conséquent, l’instruction
<code class="docutils literal notranslate"><span class="pre">c.conj</span> <span class="pre">=</span> <span class="pre">nombre_complexe(0,0)</span></code> produit une erreur.
Etant donné qu’une propriété porte déjà le nom de <code class="docutils literal notranslate"><span class="pre">conj</span></code>,
aucun attribut du même nom ne peut être ajouté à la classe <code class="docutils literal notranslate"><span class="pre">nombre_complexe</span></code>.</p>
<p>Afin que la propriété fonctionne correctement, il est nécessaire
que la classe hérite de la classe <code class="docutils literal notranslate"><span class="pre">object</span></code> ou une de ses
descendantes (voir également <a class="reference internal" href="#par-classe-heritage"><span class="std std-ref">Héritage</span></a>).</p>
</section>
</section>
<section id="copie-d-instances">
<span id="par-copie-objet"></span><h2>Copie d’instances<a class="headerlink" href="#copie-d-instances" title="Lien vers cette rubrique">¶</a></h2>
<section id="copie-d-instance-de-classe-simple">
<h3>Copie d’instance de classe simple<a class="headerlink" href="#copie-d-instance-de-classe-simple" title="Lien vers cette rubrique">¶</a></h3>
<p>Aussi étrange que cela puisse paraître, le signe <code class="docutils literal notranslate"><span class="pre">=</span></code> ne
permet pas de recopier une instance de classe. Il permet
d’obtenir deux noms différents pour désigner le même objet.
Dans l’exemple qui suit, la ligne <code class="docutils literal notranslate"><span class="pre">nb2</span> <span class="pre">=</span> <span class="pre">nb</span></code> ne fait pas de copie de
l’instance <code class="docutils literal notranslate"><span class="pre">nb</span></code>, elle permet d’obtenir un second nom <code class="docutils literal notranslate"><span class="pre">nb2</span></code>
pour l’instance <code class="docutils literal notranslate"><span class="pre">nb</span></code>. Vu de l’extérieur, la ligne <code class="docutils literal notranslate"><span class="pre">nb2.rnd</span> <span class="pre">=</span> <span class="pre">0</span></code>
paraît modifier à la fois les objets <code class="docutils literal notranslate"><span class="pre">nb</span></code> et <code class="docutils literal notranslate"><span class="pre">nb2</span></code> puisque les
lignes <code class="docutils literal notranslate"><span class="pre">print(nb.rnd)</span></code> et <code class="docutils literal notranslate"><span class="pre">print(nb2.rnd)</span></code> affichent la même chose.
En réalité, <code class="docutils literal notranslate"><span class="pre">nb</span></code> et <code class="docutils literal notranslate"><span class="pre">nb2</span></code> désignent le même objet.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
<span class="n">nb2</span> <span class="o">=</span> <span class="n">nb</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>

<span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 0, comme prévu</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 0, si nb et nb2 étaient des objets différents,</span>
<span class="c1"># cette ligne devrait afficher 42</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">42</span>
    <span class="mi">42</span>
    <span class="mi">0</span>
    <span class="mi">0</span>
</pre></div>
</div>
<p>Pour créer une copie de l’instance <code class="docutils literal notranslate"><span class="pre">nb</span></code>, il faut le dire
explicitement en utilisant la fonction <code class="docutils literal notranslate"><span class="pre">copy</span></code> du module
<code class="docutils literal notranslate"><span class="pre">copy</span></code> (voir le chapitre <a class="reference internal" href="../c_module/module.html#chap-module"><span class="std std-ref">Module ou extension</span></a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="n">nom_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">nom_instance</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_instance</span></code> est une instance à copier, <code class="docutils literal notranslate"><span class="pre">nom_copy</span></code>
est le nom désignant la copie.
L’exemple suivant applique cette copie sur la classe
<code class="docutils literal notranslate"><span class="pre">exemple_classe</span></code> générant des nombres aléatoires.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">methode1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">397204094</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="mi">2147483647</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">copy</span>  <span class="c1"># pour utiliser le module copy</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>  <span class="c1"># copie explicite</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>

<span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">42</span>
    <span class="mi">42</span>
    <span class="mi">0</span>
    <span class="mi">42</span>
</pre></div>
</div>
<p>Le symbole égalité ne fait donc pas de copie, ceci signifie qu’une
même instance de classe peut porter plusieurs noms.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">m</span>
<span class="k">del</span> <span class="n">m2</span>  <span class="c1"># supprime l&#39;identificateur mais pas la liste</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>  <span class="c1"># affiche [0, 1]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>La suppression d’un objet n’est effective que s’il ne reste
aucune variable le référençant. L’exemple suivant le montre.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CreationDestruction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;constructeur&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;__new__&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;__del__&quot;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">CreationDestruction</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">m</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">m</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">m2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">a</span>
    <span class="fm">__new__</span>
    <span class="n">constructeur</span>
    <span class="n">b</span>
    <span class="n">c</span>
    <span class="n">d</span>
    <span class="fm">__del__</span>
    <span class="n">e</span>
</pre></div>
</div>
<p>Le destructeur est appelé autant de fois que le constructeur.
Il est appelé lorsque plus aucun identificateur n’est relié
à l’objet. Cette configuration survient lors de l’exemple
précédent car le mot-clé <code class="docutils literal notranslate"><span class="pre">del</span></code>
a détruit tous les identificateurs <code class="docutils literal notranslate"><span class="pre">m</span></code> et <code class="docutils literal notranslate"><span class="pre">m2</span></code> qui étaient reliés au même objet.</p>
</section>
<section id="copie-d-instance-de-classes-incluant-d-autres-classes">
<span id="par-copie-copie"></span><h3>Copie d’instance de classes incluant d’autres classes<a class="headerlink" href="#copie-d-instance-de-classes-incluant-d-autres-classes" title="Lien vers cette rubrique">¶</a></h3>
<p>La fonction <code class="docutils literal notranslate"><span class="pre">copy</span></code> n’est pas suffisante lorsqu’une classe
inclut des attributs qui sont eux-mêmes des classes incluant des attributs.
Dans l’exemple qui suit, la classe <code class="docutils literal notranslate"><span class="pre">exemple_classe</span></code> inclut un
attribut de type <code class="docutils literal notranslate"><span class="pre">classe_incluse</span></code> qui contient un attribut <code class="docutils literal notranslate"><span class="pre">attr</span></code>.
Lors de la copie à l’aide de l’instruction <code class="docutils literal notranslate"><span class="pre">nb2</span> <span class="pre">=</span> <span class="pre">copy.copy(nb)</span></code>,
l’attribut <code class="docutils literal notranslate"><span class="pre">inclus</span></code> n’est pas copié, c’est l’instruction <code class="docutils literal notranslate"><span class="pre">nb2.inclus</span> <span class="pre">=</span> <span class="pre">nb.inclus</span></code>
qui est exécutée. On se retrouve donc avec deux noms qui désignent
encore le même objet.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">classe_incluse</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">3</span>


<span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inclus</span> <span class="o">=</span> <span class="n">classe_incluse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">copy</span>  <span class="c1"># pour utiliser le module copy</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>  <span class="c1"># copie explicite</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>

<span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 0 (on voudrait 3 ici)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 0</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">3</span>
    <span class="mi">3</span>
    <span class="mi">0</span>
    <span class="mi">0</span>
</pre></div>
</div>
<p id="index-13">Pour effectivement copier les attributs dont le type est une classe,
la première option - la plus simple - est de remplacer la fonction
<code class="docutils literal notranslate"><span class="pre">copy</span></code> par la fonction <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code>. Le comportement de cette
fonction dans le cas des classes est le même que dans le cas des
listes comme l’explique la remarque <a class="reference internal" href="../c_lang/types.html#copy-deepopy-remarque"><span class="std std-ref">Copie</span></a>.
La seconde solution, rarement utilisée, est d’utiliser l’opérateur
<code class="docutils literal notranslate"><span class="pre">__copy__</span></code> et ainsi écrire le code associé à la copie des attributs de la classe.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe12">
<p class="admonition-title">Syntaxe S13 : Déclaration de l’opérateur __copy__</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">__copy__</span> <span class="p">()</span> <span class="p">:</span>
        <span class="n">copie</span> <span class="o">=</span> <span class="n">nom_classe</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="c1"># ...</span>
        <span class="k">return</span> <span class="n">copie</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est le nom d’une classe. La méthode <code class="docutils literal notranslate"><span class="pre">__copy__</span></code>
doit retourner une instance de la classe <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code>,
dans cet exemple, cette instance a pour nom <code class="docutils literal notranslate"><span class="pre">copie</span></code>.</p>
<p>L’exemple suivant montre un exemple d’implémentation de la classe
<code class="docutils literal notranslate"><span class="pre">__copy__</span></code>. Cette méthode crée d’abord une autre instance
<code class="docutils literal notranslate"><span class="pre">copie</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">exemple_classe</span></code> puis initialise un
par un ses membres. L’attribut <code class="docutils literal notranslate"><span class="pre">rnd</span></code> est recopié grâce à une
affectation car c’est un nombre. L’attribut <code class="docutils literal notranslate"><span class="pre">inclus</span></code> est recopié
grâce à la fonction <code class="docutils literal notranslate"><span class="pre">copy</span></code> du module <code class="docutils literal notranslate"><span class="pre">copy</span></code> car c’est une
instance de classe. Après la copie, on vérifie bien que modifier
l’attribut <code class="docutils literal notranslate"><span class="pre">inclus.attr</span></code> de l’instance <code class="docutils literal notranslate"><span class="pre">nb</span></code> ne modifie pas
l’attribut <code class="docutils literal notranslate"><span class="pre">inclus.attr</span></code> de l’instance <code class="docutils literal notranslate"><span class="pre">nb2</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">classe_incluse</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">3</span>


<span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inclus</span> <span class="o">=</span> <span class="n">classe_incluse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">copie</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
        <span class="n">copie</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span>
        <span class="n">copie</span><span class="o">.</span><span class="n">inclus</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inclus</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">copie</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>  <span class="c1"># copie explicite,</span>
<span class="c1"># utilise l&#39;opérateur __copy__,</span>
<span class="c1"># cette ligne est équivalente à</span>
<span class="c1"># nb2 = nb.__copy__()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>

<span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nb</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3 (c&#39;est le résultat souhaité)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">42</span>
    <span class="mi">42</span>
    <span class="mi">3</span>
    <span class="mi">3</span>
    <span class="mi">1</span>
    <span class="mi">42</span>
    <span class="mi">0</span>
    <span class="mi">3</span>
</pre></div>
</div>
<p>On peut se demander pourquoi l’affectation n’est pas équivalente
à une copie. Cela tient au fait que l’affectation en langage
<em>python</em> est sans cesse utilisée pour affecter le résultat
d’une fonction à une variable. Lorsque ce résultat est de taille
conséquente, une copie peut prendre du temps. Il est préférable
que le résultat de la fonction reçoive le nom prévu pour le résultat.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fonction_liste</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>  <span class="c1"># retourne la liste [4,5,6]</span>


<span class="n">li</span> <span class="o">=</span> <span class="n">fonction_liste</span><span class="p">()</span>  <span class="c1"># la liste [4,5,6] n&#39;est pas recopiée,</span>
<span class="c1"># l&#39;identificateur l lui est affecté</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p id="index-14">Lorsqu’une fonction retourne un résultat mais que celui-ci
n’est pas attribué à un nom de variable. Le langage <em>python</em>
détecte automatiquement que ce résultat n’est plus lié à aucune
variable. Il est détruit automatiquement. <em>python</em> implémente
un mécanisme de <a class="reference external" href="https://fr.wikipedia.org/wiki/Ramasse-miettes_(informatique)">garbage collector</a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fonction_liste</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>


<span class="n">fonction_liste</span><span class="p">()</span>  <span class="c1"># la liste [4,5,6] n&#39;est pas recopiée,</span>
<span class="c1"># elle n&#39;est pas non plus attribuée à une variable,</span>
<span class="c1"># elle est alors détruite automatiquement par le langage Python</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
</section>
<section id="listes-et-dictionnaires">
<span id="classe-list-dict-ref-par"></span><h3>Listes et dictionnaires<a class="headerlink" href="#listes-et-dictionnaires" title="Lien vers cette rubrique">¶</a></h3>
<p>Les listes et les dictionnaires sont des types modifiables et aussi des
classes. Par conséquent, l’affectation et la copie ont un comportement
identique à celui des classes.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">l1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [4, 5, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [4, 5, 6]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [4, 10, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [4, 10, 6]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>Pour effectuer une copie, il faut écrire le code suivant :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="n">l2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [4, 5, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [4, 5, 6]</span>
<span class="n">l2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>  <span class="c1"># affiche [4, 5, 6]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>  <span class="c1"># affiche [4, 10, 6]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3/library/copy.html?highlight=copy#copy.copy">copy</a>
ne suffit pourtant pas lorsque l’objet à copier
est par exemple une liste incluant d’autres objets. Elle copiera la
liste et ne fera pas de copie des objets eux-mêmes.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>

<span class="n">l0</span> <span class="o">=</span> <span class="p">[[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">ll</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">l0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l0</span><span class="p">,</span> <span class="s2">&quot;  -  &quot;</span><span class="p">,</span> <span class="n">ll</span><span class="p">)</span>  <span class="c1"># affiche [[0], [1], [2]]   -   [[0], [1], [2]]</span>
<span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l0</span><span class="p">,</span> <span class="s2">&quot;  -  &quot;</span><span class="p">,</span> <span class="n">ll</span><span class="p">)</span>  <span class="c1"># affiche [[6], [1], [2]]   -   [[6], [1], [2]]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>   <span class="o">-</span>   <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
    <span class="p">[[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>   <span class="o">-</span>   <span class="p">[[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</pre></div>
</div>
<p>Il n’est pas possible de modifier la méthode <code class="docutils literal notranslate"><span class="pre">__copy__</span></code> d’un objet de
type liste. Il existe néanmoins la fonction
<a class="reference external" href="https://docs.python.org/3/library/copy.html?highlight=copy#copy.deepcopy">deepcopy</a>
qui permet de faire une copie à la fois de la liste et des objets qu’elle contient.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>

<span class="n">l0</span> <span class="o">=</span> <span class="p">[[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">ll</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">l0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l0</span><span class="p">,</span> <span class="s2">&quot;  -  &quot;</span><span class="p">,</span> <span class="n">ll</span><span class="p">)</span>  <span class="c1"># affiche [[0], [1], [2]]   -   [[0], [1], [2]]</span>
<span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l0</span><span class="p">,</span> <span class="s2">&quot;  -  &quot;</span><span class="p">,</span> <span class="n">ll</span><span class="p">)</span>  <span class="c1"># affiche [[0], [1], [2]]   -   [[6], [1], [2]]</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>   <span class="o">-</span>   <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>   <span class="o">-</span>   <span class="p">[[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="copy-et-deepcopy">
<span id="paragraphe-classe-deep-deepcopy-ref"></span><h3>copy et deepcopy<a class="headerlink" href="#copy-et-deepcopy" title="Lien vers cette rubrique">¶</a></h3>
<p id="index-15">La fonction <code class="docutils literal notranslate"><span class="pre">copy</span></code> effectue une copie d’un objet, la fonction
<code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> effectue une copie d’un objet et de ceux qu’il
contient. La fonction <code class="docutils literal notranslate"><span class="pre">copy</span></code> est associée à la méthode
<code class="docutils literal notranslate"><span class="pre">__copy__</span></code> tandis que la fonction <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> est associée
à la méthode <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code>. Il est rare que l’une de ces
deux méthodes doivent être redéfinies. L’intérêt de ce paragraphe
est plus de montrer le mécanisme que cache la fonction <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code>
qui est la raison pour laquelle il existe deux fonctions de
copie et non une seule.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="n">memo</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">nom_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">nom_instance</span><span class="p">[,</span> <span class="n">memo</span><span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_instance</span></code> est une instance à copier, <code class="docutils literal notranslate"><span class="pre">nom_copy</span></code>
est le nom désignant la copie. <code class="docutils literal notranslate"><span class="pre">memo</span></code> est un paramètre
facultatif : s’il est envoyé à la fonction <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code>,
il contiendra alors la liste de toutes les copies d’objet
effectuées lors de cet appel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">__deepcopy__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">memo</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">copie</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># ...</span>
        <span class="k">return</span> <span class="n">copie</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est le nom d’une classe. La méthode <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code>
doit retourner une instance de la classe <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code>,
dans cet exemple, cette instance a pour nom <code class="docutils literal notranslate"><span class="pre">copie</span></code>. Le paramètre
<code class="docutils literal notranslate"><span class="pre">memo</span></code> permet de conserver la liste des copies effectuées
à condition d’appeler <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> avec un dictionnaire en paramètre.</p>
<p>Le programme suivant reprend le second programme du paragraphe
<a class="reference internal" href="#par-copie-copie"><span class="std std-ref">Copie d’instance de classes incluant d’autres classes</span></a> et modifie la classe <code class="docutils literal notranslate"><span class="pre">classe_incluse</span></code>
pour distinguer copie et copie profonde. Il peut être utile de
lire le paragraphe <a class="reference internal" href="../c_lang/types.html#cle-dict-modificalbe-apr"><span class="std std-ref">Clés de type modifiable</span></a>
pour comprendre pourquoi un dictionnaire utilisant comme
clé une instance de classe est possible.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">classe_incluse</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">3</span>


<span class="k">class</span> <span class="nc">exemple_classe</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inclus</span> <span class="o">=</span> <span class="n">classe_incluse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">copie</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>
        <span class="n">copie</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rnd</span>
        <span class="k">return</span> <span class="n">copie</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="n">copie</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">copie</span>  <span class="c1"># mémorise la copie de self qui est copie</span>
        <span class="n">copie</span><span class="o">.</span><span class="n">inclus</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inclus</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">copie</span>


<span class="n">nb</span> <span class="o">=</span> <span class="n">exemple_classe</span><span class="p">()</span>

<span class="n">nb2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>  <span class="c1"># copie explicite à tous niveaux,</span>
<span class="c1"># utilise l&#39;opérateur __copy__,</span>
<span class="c1"># cette ligne est équivalente à</span>
<span class="c1"># nb2 = nb.__deepcopy__()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3</span>

<span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nb</span><span class="o">.</span><span class="n">rnd</span> <span class="o">=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">rnd</span><span class="p">)</span>  <span class="c1"># affiche 42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nb2</span><span class="o">.</span><span class="n">inclus</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span>  <span class="c1"># affiche 3  # résultat souhaité</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">42</span>
    <span class="mi">42</span>
    <span class="mi">3</span>
    <span class="mi">3</span>
    <span class="mi">1</span>
    <span class="mi">42</span>
    <span class="mi">0</span>
    <span class="mi">3</span>
</pre></div>
</div>
<p>On peut se demander quel est l’intérêt de la méthode <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code>
et surtout du paramètre <code class="docutils literal notranslate"><span class="pre">memo</span></code> modifié par la ligne <code class="docutils literal notranslate"><span class="pre">memo[self]</span> <span class="pre">=</span> <span class="pre">copie</span></code>.
Ce détail est important lorsqu’un objet inclut un attribut égal à
lui-même ou inclut un objet qui fait référence à l’objet de départ
comme dans l’exemple qui suit.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">Objet1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;o1 &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o2</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Objet2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">o1</span> <span class="o">=</span> <span class="n">o</span>
        <span class="n">o</span><span class="o">.</span><span class="n">o2</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;o2 &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o1</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Objet2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">o1</span><span class="p">)</span>


<span class="n">o1</span> <span class="o">=</span> <span class="n">Objet1</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">o2</span> <span class="o">=</span> <span class="n">Objet2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">o1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>  <span class="c1"># affiche o1 1 : 2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>  <span class="c1"># affiche o2 2 : 1</span>

<span class="n">o3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>
<span class="n">o3</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>  <span class="c1"># affiche o1 1 : 4    --&gt; on voudrait 2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>  <span class="c1"># affiche o2 2 : 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o3</span><span class="p">)</span>  <span class="c1"># affiche o2 4 : 1</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">o1</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">2</span>
    <span class="n">o2</span> <span class="mi">2</span> <span class="p">:</span> <span class="mi">1</span>
    <span class="n">o1</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">4</span>
    <span class="n">o2</span> <span class="mi">2</span> <span class="p">:</span> <span class="mi">1</span>
    <span class="n">o2</span> <span class="mi">4</span> <span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p>On modifie le programme comme suit pour obtenir une recopie
d’instances de classes qui pointent les unes sur vers les autres.
Le paramètre <code class="docutils literal notranslate"><span class="pre">memo</span></code> sert à savoir si la copie de l’objet a déjà
été effectuée ou non. Si non, on fait une copie, si oui, on retourne
la copie précédemment effectuée et conservée dans <code class="docutils literal notranslate"><span class="pre">memo</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">copy</span>


<span class="k">class</span> <span class="nc">Objet1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;o1 &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o2</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="o">=</span><span class="p">{}):</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Objet1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>
        <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span>
        <span class="n">r</span><span class="o">.</span><span class="n">o2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o2</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span>


<span class="k">class</span> <span class="nc">Objet2</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">o1</span> <span class="o">=</span> <span class="n">o</span>
        <span class="n">o</span><span class="o">.</span><span class="n">o2</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;o2 &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o1</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="o">=</span><span class="p">{}):</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">memo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Objet2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">o1</span><span class="p">)</span>
        <span class="n">memo</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span>
        <span class="n">r</span><span class="o">.</span><span class="n">o1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">o1</span><span class="p">,</span> <span class="n">memo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span>


<span class="n">o1</span> <span class="o">=</span> <span class="n">Objet1</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">o2</span> <span class="o">=</span> <span class="n">Objet2</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">o1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>  <span class="c1"># affiche o1 1 : 2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>  <span class="c1"># affiche o2 2 : 1</span>

<span class="n">o3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>
<span class="n">o3</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>  <span class="c1"># affiche o1 1 : 2    --&gt; on a 2 cette fois-ci</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>  <span class="c1"># affiche o2 2 : 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o3</span><span class="p">)</span>  <span class="c1"># affiche o2 4 : 1</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">o1</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">2</span>
    <span class="n">o2</span> <span class="mi">2</span> <span class="p">:</span> <span class="mi">1</span>
    <span class="n">o1</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">2</span>
    <span class="n">o2</span> <span class="mi">2</span> <span class="p">:</span> <span class="mi">1</span>
    <span class="n">o2</span> <span class="mi">4</span> <span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p id="classe-slots-att"><span id="index-16"></span>Ces problématiques se rencontrent souvent lorsqu’on aborde le
problème de la sérialisation d’un objet qui consiste à
enregistrer tout objet dans un fichier, même si cet objet
inclut des références à des objets qui font référence à lui-même.
C’est ce qu’on appelle des références circulaires.
L’enregistrement d’un tel objet avec des références circulaires
et sa relecture depuis un fichier se résolvent avec les mêmes
artifices que ceux proposés ici pour la copie. L’utilisation des
opérateurs <code class="docutils literal notranslate"><span class="pre">__copy__</span></code> et <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code> est peu fréquente.
Les fonctions <code class="docutils literal notranslate"><span class="pre">copy</span></code> et <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> du module <code class="docutils literal notranslate"><span class="pre">copy</span></code> suffisent
dans la plupart des cas.</p>
</section>
</section>
<section id="attributs-figes">
<span id="classe-attribut-non-lie"></span><h2>Attributs figés<a class="headerlink" href="#attributs-figes" title="Lien vers cette rubrique">¶</a></h2>
<p>Il arrive parfois qu’une classe contienne peu d’informations et
soit utilisée pour créer un très grand nombre d’instances.
Les paragraphes précédents ont montré que l’utilisation des
attributs était assez souple. Il est toujours possible d’ajouter
un attribut à n’importe quelle instance. En contrepartie, chaque
instance conserve en mémoire un dictionnaire <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> qui recense
tous les attributs qui lui sont associés. Pour une classe susceptible
d’être fréquemment instanciée comme un point dans l’espace
(voir paragraphe <a class="reference internal" href="#exemple-point-xyz"><span class="std std-ref">Propriétés</span></a>),
chaque instance n’a pas besoin d’avoir une liste variable
d’attributs. Le langage <em>python</em> offre la possibilité de figer cette liste.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe13">
<p class="admonition-title">Syntaxe S14 : Déclaration d’attributs figés</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;attribut_1&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s2">&quot;attribut_n&quot;</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> est le nom de la classe, elle doit hériter de <code class="docutils literal notranslate"><span class="pre">object</span></code>
ou d’une classe qui en hérite elle-même
(voir paragraphe <a class="reference internal" href="#par-classe-heritage"><span class="std std-ref">Héritage</span></a>). Il faut ensuite
ajouter au début du corps de la classe la ligne
<code class="docutils literal notranslate"><span class="pre">__slots__=</span> <span class="pre">&quot;attribut_1&quot;,</span> <span class="pre">...,</span> <span class="pre">&quot;attribut_n&quot;</span></code> où
<code class="docutils literal notranslate"><span class="pre">attribut_1</span></code> à <code class="docutils literal notranslate"><span class="pre">attribut_n</span></code> sont les noms des attributs de
la classe. Aucun autre ne sera accepté.</p>
<p>L’exemple suivant utilise cette syntaxe pour définir un point
avec seulement trois attributs <code class="docutils literal notranslate"><span class="pre">_x</span></code>, <code class="docutils literal notranslate"><span class="pre">_y</span></code>, <code class="docutils literal notranslate"><span class="pre">_z</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_x&quot;</span><span class="p">,</span> <span class="s2">&quot;_y&quot;</span><span class="p">,</span> <span class="s2">&quot;_z&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z</span><span class="p">)</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">point_espace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="mf">1.000000</span><span class="p">,</span><span class="o">-</span><span class="mf">2.000000</span><span class="p">,</span><span class="mf">3.000000</span><span class="p">)</span>
</pre></div>
</div>
<p>Etant donné que la liste des attributs est figée, l’instruction
<code class="docutils literal notranslate"><span class="pre">a.j</span> <span class="pre">=</span> <span class="pre">6</span></code> qui ajoute un attribut <code class="docutils literal notranslate"><span class="pre">j</span></code> à l’instance <code class="docutils literal notranslate"><span class="pre">a</span></code> déclenche
une exception. La même erreur se déclenche si on cherche à ajouter
cet attribut depuis une méthode (<code class="docutils literal notranslate"><span class="pre">self.j=6</span></code>).
L’attribut <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> n’existe pas non plus, par conséquent,
l’expression <code class="docutils literal notranslate"><span class="pre">a.__dict__</span></code> génère la même exception. La présence de
l’instruction <code class="docutils literal notranslate"><span class="pre">__slots__</span> <span class="pre">=</span> <span class="pre">...</span></code> n’a aucun incidence sur les attributs statiques.
Un dernier argument pour montrer que l’attribut <cite>__slots__</cite>
est gage d’efficacité :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>


<span class="k">class</span> <span class="nc">t1</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>


<span class="k">class</span> <span class="nc">t2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>


<span class="k">class</span> <span class="nc">t3</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>


<span class="n">begin</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">t1</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;t1:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span>

<span class="n">begin</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">t2</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;t2:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span>

<span class="n">begin</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">t3</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;t3:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">t1</span><span class="p">:</span> <span class="mf">2.658621653999944</span>
    <span class="n">t2</span><span class="p">:</span> <span class="mf">2.1118341029996373</span>
    <span class="n">t3</span><span class="p">:</span> <span class="mf">1.367259083001045</span>
</pre></div>
</div>
<p>Pour résumer, si les atributs d’une classe sont figés, autant
le dire à l’interpréteur, il produira un code plus rapide.</p>
</section>
<section id="heritage">
<span id="par-classe-heritage"></span><h2>Héritage<a class="headerlink" href="#heritage" title="Lien vers cette rubrique">¶</a></h2>
<p id="index-17">L’héritage est un des grands avantages de la programmation objet.
Il permet de créer une classe à partir d’une autre en ajoutant
des attributs, en modifiant ou en ajoutant des méthodes.
En quelque sorte, on peut modifier des méthodes d’une classe
tout en conservant la possibilité d’utiliser les anciennes versions.</p>
<section id="exemple-autour-de-pieces-de-monnaie">
<span id="exemple-heriagte-piece-ser"></span><h3>Exemple autour de pièces de monnaie<a class="headerlink" href="#exemple-autour-de-pieces-de-monnaie" title="Lien vers cette rubrique">¶</a></h3>
<p>On désire réaliser une expérience à l’aide d’une pièce de monnaie.
On effectue cent tirages successifs et on compte le nombre de fois
où la face pile tombe. Le programme suivant implémente cette
expérience sans utiliser la programmation objet.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>  <span class="c1"># extension interne incluant des fonctions</span>

<span class="c1"># simulant des nombres aléatoires,</span>
<span class="c1"># random.randint (a,b) --&gt; retourne un nombre entier entre a et b</span>
<span class="c1"># cette ligne doit être ajoutée à tous les exemples suivant</span>
<span class="c1"># même si elle n&#39;y figure plus</span>


<span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">():</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="nb">print</span><span class="p">(</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">55</span>
</pre></div>
</div>
<p>On désire maintenant réaliser cette même expérience pour une pièce
truquée pour laquelle la face pile sort avec une probabilité de <code class="docutils literal notranslate"><span class="pre">0,7</span></code>.
Une solution consiste à réécrire la fonction <code class="docutils literal notranslate"><span class="pre">cent_tirages</span></code>
pour la pièce truquée.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">():</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="nb">print</span><span class="p">(</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">76</span>
</pre></div>
</div>
<p>Toutefois cette solution n’est pas satisfaisante car il faudrait
réécrire cette fonction pour chaque pièce différente pour laquelle
on voudrait réaliser cette expérience. Une autre solution
consiste donc à passer en paramètre de la fonction <code class="docutils literal notranslate"><span class="pre">cent_tirages</span></code>
une fonction qui reproduit le comportement d’une pièce,
qu’elle soit normale ou truquée.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">piece_normale</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">piece_truquee</span><span class="p">():</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="n">piece</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">piece</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">s</span>


<span class="nb">print</span><span class="p">(</span><span class="n">cent_tirages</span><span class="p">(</span><span class="n">piece_normale</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cent_tirages</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">))</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">43</span>
    <span class="mi">77</span>
</pre></div>
</div>
<p>Mais cette solution possède toujours un inconvénient car les
fonctions associées à chaque pièce n’acceptent aucun paramètre.
Il n’est pas possible de définir une pièce qui est normale si la
face <em>pile</em> vient de sortir et qui devient truquée si la face
<em>face</em> vient de sortir. On choisit alors de représenter une
pièce normale par une classe.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tirage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="n">p</span> <span class="o">=</span> <span class="n">piece_normale</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">61</span>
</pre></div>
</div>
<p>On peut aisément recopier et adapter ce code pour la pièce truquée.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tirage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="k">class</span> <span class="nc">piece_truquee</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tirage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="n">p</span> <span class="o">=</span> <span class="n">piece_normale</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">piece_truquee</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">53</span>
    <span class="mi">72</span>
</pre></div>
</div>
<p>Toutefois, pour les deux classes <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code> et
<code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code>, la méthode <code class="docutils literal notranslate"><span class="pre">cent_tirage</span></code> est exactement
la même. Il serait préférable de ne pas répéter ce code puisque
si nous devions modifier la première - un nombre de tirages
différent par exemple -, il faudrait également modifier la seconde.
La solution passe par l’héritage. On va définir la classe
<code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code> à partir de la classe <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code>
en remplaçant seulement la méthode <code class="docutils literal notranslate"><span class="pre">tirage</span></code>
puisqu’elle est la seule à changer.</p>
<p>On indique à la classe <code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code> qu’elle hérite -
ou dérive - de la classe <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code> en mettant <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code>
entre parenthèses sur la ligne de la déclaration de la classe
<code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code>. Comme la méthode <code class="docutils literal notranslate"><span class="pre">cent_tirages</span></code> ne change pas,
elle n’a pas besoin d’apparaître dans la définition de la nouvelle
classe même si cette méthode est aussi applicable à une instance
de la classe <code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tirage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="k">class</span> <span class="nc">piece_truquee</span><span class="p">(</span><span class="n">piece_normale</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>


<span class="n">p</span> <span class="o">=</span> <span class="n">piece_normale</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">piece_truquee</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">53</span>
    <span class="mi">75</span>
</pre></div>
</div>
<p>Enfin, on peut définir une pièce très truquée qui devient truquée
si <em>face</em> vient de sortir et qui redevient normale si <em>pile</em>
vient de sortir. Cette pièce très truquée sera implémentée par la
classe <code class="docutils literal notranslate"><span class="pre">piece_tres_truquee</span></code>. Elle doit contenir un attribut
<code class="docutils literal notranslate"><span class="pre">avant</span></code> qui conserve la valeur du précédent tirage. Elle doit
redéfinir la méthode <code class="docutils literal notranslate"><span class="pre">tirage</span></code> pour être une pièce normale
ou truquée selon la valeur de l’attribut <code class="docutils literal notranslate"><span class="pre">avant</span></code>.
Pour éviter de réécrire des méthodes déjà écrites, la méthode
<code class="docutils literal notranslate"><span class="pre">tirage</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">piece_tres_truquee</span></code> doit appeler
la méthode <code class="docutils literal notranslate"><span class="pre">tirage</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code> ou celle
de la classe <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code> selon la valeur de l’attribut
<code class="docutils literal notranslate"><span class="pre">avant</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tirage</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="k">class</span> <span class="nc">piece_truquee</span><span class="p">(</span><span class="n">piece_normale</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>


<span class="k">class</span> <span class="nc">piece_tres_truquee</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># création de l&#39;attribut avant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avant</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">avant</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># appel de la méthode tirage de la classe piece_truquee</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">avant</span> <span class="o">=</span> <span class="n">piece_truquee</span><span class="o">.</span><span class="n">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># appel de la méthode tirage de la classe piece_normale</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">avant</span> <span class="o">=</span> <span class="n">piece_normale</span><span class="o">.</span><span class="n">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avant</span>


<span class="n">p</span> <span class="o">=</span> <span class="n">piece_normale</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;normale &quot;</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">piece_truquee</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;truquee &quot;</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
<span class="n">p3</span> <span class="o">=</span> <span class="n">piece_tres_truquee</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tres truquee &quot;</span><span class="p">,</span> <span class="n">p3</span><span class="o">.</span><span class="n">cent_tirages</span><span class="p">())</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">normale</span>  <span class="mi">49</span>
    <span class="n">truquee</span>  <span class="mi">69</span>
    <span class="n">tres</span> <span class="n">truquee</span>  <span class="mi">58</span>
</pre></div>
</div>
<p>L’héritage propose donc une manière élégante d’organiser un
programme. Il rend possible la modification des classes
d’un programme sans pour autant les altérer.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Définition6">
<p class="admonition-title">Définition D7 : héritage</p>
<p>On dit qu’une classe $B$ hérite d’une autre classe $A$ si la déclaration de $B$
inclut les attributs et les méthodes de la classe $A$.</p>
</div>
<p>La surcharge est un autre concept qui va de pair avec l’héritage.
Elle consiste à redéfinir des méthodes déjà définies chez
l’ancêtre. Cela permet de modifier le comportement de méthodes
bien que celles-ci soient utilisées par d’autres méthodes dont la
définition reste inchangée.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Définition7">
<p class="admonition-title">Définition D8 : surcharge</p>
<p>Lorsqu’une classe <em>B</em> hérite de la classe <em>A</em> et redéfinit une méthode de la classe <em>A</em> portant
le même nom, on dit qu’elle surcharge cette méthode. S’il n’est pas explicitement précisé
qu’on fait appel à une méthode d’une classe donnée, c’est toujours la méthode surchargée qui est exécutée.</p>
</div>
</section>
<section id="syntaxe">
<h3>Syntaxe<a class="headerlink" href="#syntaxe" title="Lien vers cette rubrique">¶</a></h3>
<p>L’héritage obéit à la syntaxe suivante.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe14">
<p class="admonition-title">Syntaxe S15 : Héritage</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">(</span><span class="n">nom_ancetre</span><span class="p">)</span> <span class="p">:</span>
    <span class="c1"># corps de la classe</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> désigne le nom d’une classe qui hérite ou dérive
d’une autre classe <code class="docutils literal notranslate"><span class="pre">nom_ancetre</span></code>. Celle-ci <code class="docutils literal notranslate"><span class="pre">nom_ancetre</span></code>
doit être une classe déjà définie.</p>
<p>L’utilisation de la fonction <code class="docutils literal notranslate"><span class="pre">help</span></code> permet de connaître
tous les ancêtres d’une classe. On applique cette fonction
à la classe <code class="docutils literal notranslate"><span class="pre">piece_tres_truquee</span></code> définie au paragraphe précédent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span> <span class="p">(</span><span class="n">piece_tres_truquee</span><span class="p">)</span>
</pre></div>
</div>
<p>On obtient le résultat suivant :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Help</span> <span class="n">on</span> <span class="k">class</span> <span class="nc">piece_tres_truquee</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">__main__</span><span class="p">:</span>

<span class="k">class</span> <span class="nc">piece_tres_truquee</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">)</span>
 <span class="o">|</span>  <span class="n">Method</span> <span class="n">resolution</span> <span class="n">order</span><span class="p">:</span>
 <span class="o">|</span>      <span class="n">piece_tres_truquee</span>
 <span class="o">|</span>      <span class="n">piece_truquee</span>
 <span class="o">|</span>      <span class="n">piece_normale</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">Methods</span> <span class="n">defined</span> <span class="n">here</span><span class="p">:</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">tirage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="o">----------------------------------------------------------------------</span>
 <span class="o">|</span>  <span class="n">Methods</span> <span class="n">inherited</span> <span class="kn">from</span> <span class="nn">piece_normale</span><span class="p">:</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">cent_tirages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p id="remarque-method-resolution-order">La rubrique <a class="reference external" href="https://www.python.org/download/releases/2.3/mro/">Method Resolution Order</a>
indique la liste des héritages successifs qui ont mené à la classe <code class="docutils literal notranslate"><span class="pre">piece_tres_truquee</span></code>.
Cette rubrique indique aussi que, lorsqu’on appelle une méthode de la classe
<code class="docutils literal notranslate"><span class="pre">piece_tres_truquee</span></code>, si elle n’est pas redéfinie dans cette classe,
le langage <em>python</em> la cherchera chez l’ancêtre direct, ici, la classe
<code class="docutils literal notranslate"><span class="pre">piece_truquee</span></code>. Si elle ne s’y trouve toujours pas, <em>python</em> ira la
chercher aux niveaux précédents jusqu’à ce qu’il la trouve.</p>
<p>L’attribut <code class="docutils literal notranslate"><span class="pre">__bases__</span></code> d’une classe (voir paragraphe <a class="reference internal" href="#attribut-implicite-par"><span class="std std-ref">Attributs implicites</span></a>)
contient le (ou les ancêtres, voir paragraphe <a class="reference internal" href="#heritage-pultiuple-par"><span class="std std-ref">Héritage multiple</span></a>).
Il suffit d’interroger cet attribut pour savoir si une
classe hérite d’une autre comme le montre l’exemple suivant.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">piece_truquee</span><span class="p">(</span><span class="n">piece_normale</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">piece_tres_truquee</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">piece_tres_truquee</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>  <span class="c1"># affiche __main__.piece_truquee</span>
<span class="nb">print</span><span class="p">(</span><span class="n">piece_normale</span> <span class="ow">in</span> <span class="n">piece_tres_truquee</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">)</span>  <span class="c1"># affiche False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">piece_truquee</span> <span class="ow">in</span> <span class="n">piece_tres_truquee</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">)</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    &lt;class &#39;sphinx_runpython.runpython.sphinx_runpython_extension.run_python_script_139915490316480.&lt;locals&gt;.piece_truquee&#39;&gt;
    False
    True
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=issubclass#issubclass">issubclass</a>
permet d’obtenir un résultat équivalent. <code class="docutils literal notranslate"><span class="pre">issubclass(A,B)</span></code> indique si
la classe <code class="docutils literal notranslate"><span class="pre">A</span></code> hérite directement ou indirectement de la classe <code class="docutils literal notranslate"><span class="pre">B</span></code>.
Le paragraphe <a class="reference internal" href="#fonction-issubclass-paragraphe"><span class="std std-ref">Fonctions issubclass et isinstance</span></a> revient sur cette fonction.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">piece_normale</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">piece_truquee</span><span class="p">(</span><span class="n">piece_normale</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">piece_tres_truquee</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">piece_tres_truquee</span><span class="p">,</span> <span class="n">piece_normale</span><span class="p">))</span>  <span class="c1"># affiche True</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">piece_truquee</span><span class="p">,</span> <span class="n">piece_normale</span><span class="p">))</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="kc">True</span>
    <span class="kc">True</span>
</pre></div>
</div>
<p>Dans les exemples précédents, <code class="docutils literal notranslate"><span class="pre">piece_normale</span></code> ne dérive
d’aucune autre classe. Toutefois, le langage <em>python</em> propose
une classe d’objets dont héritent toutes les autres classes
définies par le langage : c’est la classe <code class="docutils literal notranslate"><span class="pre">object</span></code>. Les paragraphes
précédents ont montré qu’elle offrait certains avantages
(voir paragraphe <a class="reference internal" href="#classe-proprietes-par"><span class="std std-ref">Propriétés</span></a> sur les propriétés ou
encore paragraphe <a class="reference internal" href="#classe-attribut-non-lie"><span class="std std-ref">Attributs figés</span></a> sur les attributs non liés).</p>
<p>Le paragraphe précédent a montré qu’il était parfois utile d’appeler
dans une méthode une autre méthode appartenant explicitement à
l’ancêtre direct de cette classe ou à un de ses ancêtres.
La syntaxe est la suivante.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe15">
<p class="admonition-title">Syntaxe S16 : Surcharge de méthodes héritées</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">nom_classe</span> <span class="p">(</span><span class="n">nom_ancetre</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">nom_autre_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># ...</span>
    <span class="k">def</span> <span class="nf">nom_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">nom_ancetre</span><span class="o">.</span><span class="n">nom_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
            <span class="c1"># appel de la méthode définie chez l&#39;ancêtre</span>
        <span class="n">nom_ancetre</span><span class="o">.</span><span class="n">nom_autre_methode</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
            <span class="c1"># appel d&#39;une autre méthode définie chez l&#39;ancêtre</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nom_autre_methode</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>
            <span class="c1"># appel d&#39;une méthode surchargée</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> désigne le nom d’une classe, <code class="docutils literal notranslate"><span class="pre">nom_ancetre</span></code>
est le nom de la classe dont <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> hérite ou dérive.
<code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> est une méthode surchargée qui appelle la méthode
portant le même nom mais définie dans la classe <code class="docutils literal notranslate"><span class="pre">nom_ancetre</span></code>
ou un de ses ancêtres. <code class="docutils literal notranslate"><span class="pre">nom_autre_methode</span></code> est une autre méthode.
La méthode <code class="docutils literal notranslate"><span class="pre">nom_methode</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">nom_classe</span></code> peut faire
explicitement appel à une méthode définie chez l’ancêtre <code class="docutils literal notranslate"><span class="pre">nom_ancetre</span></code>
même si elle est également surchargée ou faire appel à la
méthode surchargée.</p>
<p>Ces appels sont très fréquents en ce qui concerne les constructeurs
qui appellent le constructeur de l’ancêtre. Il est même conseillé
de le faire à chaque fois.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
</pre></div>
</div>
<p>Contrairement aux méthodes, la surcharge d’attributs n’est pas
possible. Si un ancêtre possède un attribut d’identificateur <code class="docutils literal notranslate"><span class="pre">a</span></code>,
les classes dérivées le possèdent aussi et ne peuvent en déclarer
un autre du même nom. Cela tient au fait que quelque soit la
méthode utilisée, celle de l’ancêtre ou celle d’une classe dérivée,
c’est le même dictionnaire d’attributs <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> qui est utilisé.
En revanche, si la classe ancêtre déclare un attribut dans son
constructeur, il ne faut pas oublier de l’appeler dans le constructeur
de la classe fille afin que cette attribut existe pour la classe fille.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ancetre</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;a = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">fille</span><span class="p">(</span><span class="n">ancetre</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ancetre</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># cette ligne est importante</span>
        <span class="c1"># car sans elle, l&#39;attribut a n&#39;existe pas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;a = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">ancetre</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># affiche a = 5</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">fille</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>  <span class="c1"># affiche a = 6</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>
</pre></div>
</div>
</section>
<section id="sens-de-l-heritage-2">
<span id="heritage-classe-sens-par"></span><h3>Sens de l’héritage (2)<a class="headerlink" href="#sens-de-l-heritage-2" title="Lien vers cette rubrique">¶</a></h3>
<p>Il n’est pas toujours évident de concevoir le sens d’un héritage.
En mathématique, le carré est un rectangle dont les côtés sont
égaux. A priori, une classe <code class="docutils literal notranslate"><span class="pre">carre</span></code> doit dériver d’une classe
<code class="docutils literal notranslate"><span class="pre">rectangle</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">rectangle</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;rectangle &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; x &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">carre</span><span class="p">(</span><span class="n">rectangle</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="n">rectangle</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


<span class="n">r</span> <span class="o">=</span> <span class="n">rectangle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># affiche rectangle 3 x 4</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">carre</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche rectangle 5 x 5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">rectangle</span> <span class="mi">3</span> <span class="n">x</span> <span class="mi">4</span>
    <span class="n">rectangle</span> <span class="mi">5</span> <span class="n">x</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Toutefois, on peut aussi considérer que la classe <code class="docutils literal notranslate"><span class="pre">carre</span></code>
contient une information redondante puisqu’elle possède deux
attributs qui seront toujours égaux. On peut se demander s’il
n’est pas préférable que la classe <code class="docutils literal notranslate"><span class="pre">rectangle</span></code> hérite
de la classe <code class="docutils literal notranslate"><span class="pre">carre</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">carre</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;carre &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">rectangle</span><span class="p">(</span><span class="n">carre</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="n">carre</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;rectangle &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; x &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>


<span class="n">r</span> <span class="o">=</span> <span class="n">rectangle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># affiche rectangle 3 x 4</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">carre</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche carre 5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">rectangle</span> <span class="mi">3</span> <span class="n">x</span> <span class="mi">4</span>
    <span class="n">carre</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Cette seconde version minimise l’information à mémoriser puisque
la classe <code class="docutils literal notranslate"><span class="pre">carre</span></code> ne contient qu’un seul attribut et non deux
comme dans l’exemple précédent. Néanmoins, il a fallu surcharger
l’opérateur <code class="docutils literal notranslate"><span class="pre">__str__</span></code> afin d’afficher la nouvelle information.</p>
<p>Il n’y a pas de meilleur choix parmi ces deux solutions proposées.
La première solution va dans le sens des propriétés croissantes, les
méthodes implémentées pour les classes de bases restent vraies pour les
suivantes. La seconde solution va dans le sens des attributs croissants,
des méthodes implémentées pour les classes de bases doivent souvent
être adaptées pour les héritiers. En contrepartie,
il n’y a pas d’information redondante.</p>
<p>Ce problème d’héritage ne se pose pas à chaque fois. Dans l’exemple
du paragraphe <a class="reference internal" href="#exemple-heriagte-piece-ser"><span class="std std-ref">Exemple autour de pièces de monnaie</span></a> autour des pièces
truquées, il y a moins d’ambiguïté sur le sens de l’héritage.
Celui-ci est guidé par le problème à résoudre qui s’avère
plus simple à concevoir dans le sens d’un héritage d’une
pièce normale vers une pièce truquée.</p>
<p>Dans le cas des classes <code class="docutils literal notranslate"><span class="pre">carre</span></code> et <code class="docutils literal notranslate"><span class="pre">rectangle</span></code>, il n’est pas possible
de déterminer la meilleure solution tant que leur usage ultérieur
n’est pas connu. Ce problème revient également lorsqu’on
définit des matrices et des vecteurs. Un vecteur est une
matrice d’une seul colonne, il ne possède qu’une seule
dimension au lieu de deux pour une matrice. L’exercice
<a class="reference internal" href="../../auto_examples/prog/plot_tarabiscote.html#tarabiscoterst"><span class="std std-ref">Exercices expliqués de programmation</span></a> revient sur ce dilemme.</p>
</section>
<section id="heritage-multiple">
<span id="heritage-pultiuple-par"></span><h3>Héritage multiple<a class="headerlink" href="#heritage-multiple" title="Lien vers cette rubrique">¶</a></h3>
<p>Jusqu’à présent, tous les exemples d’héritages entre classes
n’ont fait intervenir que deux classes, la classe ancêtre dont
hérite la classe descendante. L’héritage multiple part du principe
qu’il peut y avoir plusieurs ancêtres pour une même classe.
La classe descendante hérite dans ce cas de tous les attributs
et méthodes de tous ses ancêtres.</p>
<p>Dans l’exemple qui suit, la classe <code class="docutils literal notranslate"><span class="pre">C</span></code> hérite des classes
<code class="docutils literal notranslate"><span class="pre">A</span></code> et <code class="docutils literal notranslate"><span class="pre">B</span></code>. Elle hérite donc des méthodes de <code class="docutils literal notranslate"><span class="pre">carre</span></code> et
<code class="docutils literal notranslate"><span class="pre">cube</span></code>. Chacune des classes <code class="docutils literal notranslate"><span class="pre">A</span></code> et <code class="docutils literal notranslate"><span class="pre">B</span></code> contient un
constructeur qui initialise l’attribut <code class="docutils literal notranslate"><span class="pre">a</span></code>. Le constructeur
de la classe <code class="docutils literal notranslate"><span class="pre">C</span></code> appelle le constructeur de la classe
<code class="docutils literal notranslate"><span class="pre">A</span></code> pour initialiser cet attribut.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">carre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">3</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">carre</span><span class="p">())</span>  <span class="c1"># affiche 25</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">cube</span><span class="p">())</span>  <span class="c1"># affiche 125</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">25</span>
    <span class="mi">125</span>
</pre></div>
</div>
<p>Mais ces héritages multiples peuvent parfois apporter
quelques ambiguïtés comme le cas où au moins deux ancêtres
possèdent une méthode du même nom. Dans l’exemple qui suit,
la classe <code class="docutils literal notranslate"><span class="pre">C</span></code> hérite toujours des classes <code class="docutils literal notranslate"><span class="pre">A</span></code> et <code class="docutils literal notranslate"><span class="pre">B</span></code>.
Ces deux classes possèdent une méthode <code class="docutils literal notranslate"><span class="pre">calcul</span></code>.
La classe <code class="docutils literal notranslate"><span class="pre">C</span></code>, qui hérite des deux, possède aussi une
méthode <code class="docutils literal notranslate"><span class="pre">calcul</span></code> qui, par défaut, sera celle de la classe <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">3</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">calcul</span><span class="p">())</span>  <span class="c1"># affiche 25</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">25</span>
</pre></div>
</div>
<p>Cette information est disponible via la fonction
<code class="docutils literal notranslate"><span class="pre">help</span></code> appliquée à la classe <code class="docutils literal notranslate"><span class="pre">C</span></code>. C’est dans ce genre de
situations que l’information apportée par la section
<a class="reference external" href="https://www.python.org/download/releases/2.3/mro/">Method Resolution Order</a>
est importante.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
 <span class="o">|</span>  <span class="n">Method</span> <span class="n">resolution</span> <span class="n">order</span><span class="p">:</span>
 <span class="o">|</span>      <span class="n">C</span>
 <span class="o">|</span>      <span class="n">A</span>
 <span class="o">|</span>      <span class="n">B</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">Methods</span> <span class="n">defined</span> <span class="n">here</span><span class="p">:</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
 <span class="o">|</span>
 <span class="o">|</span>  <span class="n">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour préciser que la méthode <code class="docutils literal notranslate"><span class="pre">calcul</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">C</span></code>
doit appeler la méthode <code class="docutils literal notranslate"><span class="pre">calcul</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">B</span></code>
et non <code class="docutils literal notranslate"><span class="pre">A</span></code>, il faut l’écrire explicitement en
surchargeant cette méthode.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">**</span><span class="mi">3</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">B</span><span class="o">.</span><span class="n">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">x</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">calcul</span><span class="p">())</span>  <span class="c1"># affiche 125</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mi">125</span>
</pre></div>
</div>
<p>L’exemple précédent est un cas particulier où il n’est pas
utile d’appeler les constructeurs des deux classes dont la
classe <code class="docutils literal notranslate"><span class="pre">C</span></code> hérite mais c’est un cas particulier.
Le constructeur de la classe <code class="docutils literal notranslate"><span class="pre">C</span></code> devrait être ainsi :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">B</span><span class="o">.</span><span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="fonctions-issubclass-et-isinstance">
<span id="fonction-issubclass-paragraphe"></span><h3>Fonctions issubclass et isinstance<a class="headerlink" href="#fonctions-issubclass-et-isinstance" title="Lien vers cette rubrique">¶</a></h3>
<p id="index-18">La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=issubclass#issubclass">issubclass</a>
permet de savoir si une classe hérite d’une autre.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">issubclass</span> <span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>Le résultat de cette fonction est vrai si la classe <code class="docutils literal notranslate"><span class="pre">B</span></code>
hérite de la classe <code class="docutils literal notranslate"><span class="pre">A</span></code>, le résultat est faux dans tous
les autres cas. La fonction prend comme argument des classes
et non des instances de classes.</p>
<p>L’exemple qui suit utilise cette fonction dont le résultat
est vrai même pour des classes qui n’héritent pas directement
l’une de l’autre.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">))</span>  <span class="c1"># affiche False</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>  <span class="c1"># affiche False</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="kc">False</span>
    <span class="kc">True</span>
    <span class="kc">False</span>
    <span class="kc">True</span>
</pre></div>
</div>
<p>Lorsqu’on souhaite appliquer la fonction à une instance
de classe, il faut faire appel à l’attribut <code class="docutils literal notranslate"><span class="pre">__class__</span></code>.
En reprenant les classes définies par l’exemple précédant cela donne :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">B</span><span class="p">))</span>  <span class="c1"># affiche False</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="kc">False</span>
    <span class="kc">True</span>
    <span class="kc">True</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=isinstance#isinstance">isinstance</a>
permet de savoir si une instance de classe est d’une type donné.
Elle est équivalente à la fonction <code class="docutils literal notranslate"><span class="pre">issubclass</span></code> à ceci près qu’elle
prend comme argument une instance et une classe. L’exemple
précédent devient avec la fonction <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">B</span><span class="p">))</span>  <span class="c1"># affiche False</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># affiche True</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="kc">False</span>
    <span class="kc">True</span>
    <span class="kc">True</span>
</pre></div>
</div>
<p>L’utilisation des fonctions <code class="docutils literal notranslate"><span class="pre">issubclass</span></code> et <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> n’est
pas très fréquente mais elle permet par exemple d’écrire une fonction
qui peut prendre en entrée des types variables.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fonction_somme_list</span><span class="p">(</span><span class="n">ens</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="s2">&quot;list &quot;</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">ens</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="n">e</span>
    <span class="k">return</span> <span class="n">r</span>


<span class="k">def</span> <span class="nf">fonction_somme_dict</span><span class="p">(</span><span class="n">ens</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="s2">&quot;dict &quot;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ens</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">r</span>


<span class="k">def</span> <span class="nf">fonction_somme</span><span class="p">(</span><span class="n">ens</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ens</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">fonction_somme_dict</span><span class="p">(</span><span class="n">ens</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ens</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">fonction_somme_list</span><span class="p">(</span><span class="n">ens</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;erreur&quot;</span>


<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;un&quot;</span><span class="p">,</span> <span class="s2">&quot;deux&quot;</span><span class="p">,</span> <span class="s2">&quot;trois&quot;</span><span class="p">]</span>
<span class="n">di</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;un&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;deux&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;trois&quot;</span><span class="p">}</span>
<span class="n">tu</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;un&quot;</span><span class="p">,</span> <span class="s2">&quot;deux&quot;</span><span class="p">,</span> <span class="s2">&quot;trois&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">fonction_somme</span><span class="p">(</span><span class="n">li</span><span class="p">))</span>  <span class="c1"># affiche list undeuxtrois</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fonction_somme</span><span class="p">(</span><span class="n">di</span><span class="p">))</span>  <span class="c1"># affiche dict undeuxtrois</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fonction_somme</span><span class="p">(</span><span class="n">tu</span><span class="p">))</span>  <span class="c1"># affiche erreur</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">list</span> <span class="n">undeuxtrois</span>
    <span class="nb">dict</span> <span class="n">undeuxtrois</span>
    <span class="n">erreur</span>
</pre></div>
</div>
<p>L’avantage est d’avoir une seule fonction capable de s’adapter à
différents type de variables, y compris des types créés par
un programmeur en utilisant les classes.</p>
</section>
</section>
<section id="compilation-de-classes">
<h2>Compilation de classes<a class="headerlink" href="#compilation-de-classes" title="Lien vers cette rubrique">¶</a></h2>
<p>La compilation de classe fonctionne de manière similaire à
celle de la compilation de fonctions
(voir paragraphe <a class="reference internal" href="../c_lang/syntaxe.html#par-compilation-fonction"><span class="std std-ref">Compilation dynamique (compile, exec)</span></a>).
Il s’agit de définir une classe sous forme de chaîne
de caractères puis d’appeler la fonction <code class="docutils literal notranslate"><span class="pre">compile</span></code> pour ajouter cette
classe au programme et s’en servir. L’exemple suivant reprend deux
classes décrites au paragraphe <a class="reference internal" href="#heritage-classe-sens-par"><span class="std std-ref">Sens de l’héritage (2)</span></a>.
Elles sont incluses dans une chaîne de caractères, compilées puis
incluses au programme (fonction <code class="docutils literal notranslate"><span class="pre">exec</span></code>).</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;class carre :</span>
<span class="s2">    def __init__( self, a) : self.a = a</span>
<span class="s2">    def __str__ (self)     : return &quot;carre &quot; + str (self.a)</span>

<span class="s2">class rectangle (carre):</span>
<span class="s2">    def __init__(self,a,b) :</span>
<span class="s2">        carre.__init__(self, a)</span>
<span class="s2">        self.b = b</span>
<span class="s2">    def __str__ (self) :</span>
<span class="s2">        return &quot;rectangle &quot; + str(self.a) +  &quot; x &quot; +  str (self.b)</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">obj</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;exec&quot;</span><span class="p">)</span>  <span class="c1"># code à compiler</span>
<span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># classes incorporées au programme</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">rectangle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># affiche rectangle 3 x 4</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">carre</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche carre 5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
      <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">17</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span>
        <span class="k">class</span> <span class="nc">rectangle</span> <span class="p">(</span><span class="n">carre</span><span class="p">):</span>
                                <span class="o">^</span>
    <span class="ne">IndentationError</span><span class="p">:</span> <span class="n">unindent</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">match</span> <span class="nb">any</span> <span class="n">outer</span> <span class="n">indentation</span> <span class="n">level</span>
</pre></div>
</div>
<p>Comme toute fonction, la fonction <code class="docutils literal notranslate"><span class="pre">compile</span></code> génère une exception
lorsque la chaîne de caractères contient une erreur. Le programme
qui suit essaye de compiler une chaîne de caractères
confondant <code class="docutils literal notranslate"><span class="pre">self</span></code> et <code class="docutils literal notranslate"><span class="pre">seilf</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;erreur de compilation incluses dans le code inséré dans la</span>
<span class="sd">chaîne de caractère s&quot;&quot;&quot;</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;class carre :</span>
<span class="s2">    def __init__( self, a) :</span>
<span class="s2">        seilf.a = a   # erreur de compilation</span>
<span class="s2">    def __str__ (self) :</span>
<span class="s2">        return &quot;carre &quot; + str (self.a) &quot;&quot;&quot;</span>

<span class="n">obj</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;variable s&quot;</span><span class="p">,</span> <span class="s2">&quot;exec&quot;</span><span class="p">)</span>  <span class="c1"># code à compiler</span>
<span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># classes incorporées au programme</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">carre</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># affiche carre 5</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    [runpythonerror]
    Traceback (most recent call last):
      File &quot;&lt;stdin&gt;&quot;, line 16, in &lt;module&gt;
      File &quot;variable s&quot;, line 3, in __init__
    NameError: name &#39;seilf&#39; is not defined. Did you mean: &#39;self&#39;?
</pre></div>
</div>
<p>Le message d’erreur est le même que pour un programme ne
faisant pas appel à la fonction <code class="docutils literal notranslate"><span class="pre">compile</span></code> à ceci près
que le fichier où a lieu l’erreur est <code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">s</span></code>
qui est le second paramètre envoyé à la fonction <code class="docutils literal notranslate"><span class="pre">compile</span></code>.
Le numéro de ligne fait référence à la troisième ligne de
la chaîne de caractères <code class="docutils literal notranslate"><span class="pre">s</span></code> et non à la troisième ligne du programme.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">fromage</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">odeur</span> <span class="o">=</span> <span class="n">o</span>

    <span class="k">def</span> <span class="nf">decouper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nb</span><span class="p">):</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nb</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">fromage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">/</span> <span class="n">nb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">odeur</span><span class="p">)</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">l</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;poids : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poids</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot; couleur : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">couleur</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot; odeur : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">odeur</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ajout fromage&quot;</span><span class="p">)</span>
        <span class="n">poids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">poids</span>
        <span class="n">couleur</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
            <span class="n">couleur</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">couleur</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">couleur</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">f</span><span class="o">.</span><span class="n">poids</span><span class="p">)</span> <span class="o">/</span> <span class="n">poids</span>
        <span class="n">odeur</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">odeur</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">odeur</span> <span class="o">*</span> <span class="n">f</span><span class="o">.</span><span class="n">poids</span><span class="p">)</span> <span class="o">/</span> <span class="n">poids</span>
        <span class="n">couleur</span> <span class="o">=</span> <span class="p">(</span><span class="n">couleur</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">couleur</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">couleur</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">fromage</span><span class="p">(</span><span class="n">poids</span><span class="p">,</span> <span class="n">couleur</span><span class="p">,</span> <span class="n">odeur</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">gruyere</span><span class="p">(</span><span class="n">fromage</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">fromage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">o</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">fromage</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;gruyère, &quot;</span> <span class="o">+</span> <span class="n">s</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ajout gruyère&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">gruyere</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">fromage</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">gruyere</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">poids</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">poids</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">r</span>


<span class="c1"># --------------------------------------------</span>
<span class="n">fr</span> <span class="o">=</span> <span class="n">fromage</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">fr2</span> <span class="o">=</span> <span class="n">fromage</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fr3</span> <span class="o">=</span> <span class="n">fr</span> <span class="o">+</span> <span class="n">fr2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fr2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fr3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----------------------&quot;</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gruyere</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="n">g2</span> <span class="o">=</span> <span class="n">gruyere</span><span class="p">(</span><span class="mf">7.0</span><span class="p">)</span>
<span class="n">g3</span> <span class="o">=</span> <span class="n">g</span> <span class="o">+</span> <span class="n">g2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----------------------&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fr2</span> <span class="o">+</span> <span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">ajout</span> <span class="n">fromage</span>
    <span class="n">poids</span> <span class="p">:</span> <span class="mf">5.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.5</span>
    <span class="n">poids</span> <span class="p">:</span> <span class="mf">10.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mi">1</span>
    <span class="n">poids</span> <span class="p">:</span> <span class="mf">15.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mf">85.0</span><span class="p">,</span> <span class="mf">170.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.8333333333333334</span>
    <span class="o">----------------------</span>
    <span class="n">ajout</span> <span class="n">gruyère</span>
    <span class="n">gruyère</span><span class="p">,</span> <span class="n">poids</span> <span class="p">:</span> <span class="mf">3.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.1</span>
    <span class="n">gruyère</span><span class="p">,</span> <span class="n">poids</span> <span class="p">:</span> <span class="mf">7.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.1</span>
    <span class="n">gruyère</span><span class="p">,</span> <span class="n">poids</span> <span class="p">:</span> <span class="mf">10.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.1</span>
    <span class="o">----------------------</span>
    <span class="n">ajout</span> <span class="n">fromage</span>
    <span class="n">poids</span> <span class="p">:</span> <span class="mf">13.0</span> <span class="n">couleur</span> <span class="p">:</span> <span class="p">(</span><span class="mf">34.61538461538461</span><span class="p">,</span> <span class="mf">230.76923076923077</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="n">odeur</span> <span class="p">:</span> <span class="mf">0.7923076923076924</span>
</pre></div>
</div>
</section>
<section id="surcharge-d-operateur-sur-des-types">
<h2>Surcharge d’opérateur sur des types<a class="headerlink" href="#surcharge-d-operateur-sur-des-types" title="Lien vers cette rubrique">¶</a></h2>
<p>Il est possible de surcharger tous les opérateurs pour une classe permettant
ainsi de donner un sens à <cite>x * y</cite>, <cite>x[5]</cite> lorsque <em>x</em> est une instance d’une
classe <cite>A</cite> définie dans le programme. Maintenant, on souhaiterait donner un sens
à l’expression <cite>A[1]</cite> alors que <cite>A</cite> est une classe et non une instance.
Cela peut se faire via la méthode
<a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__class_getitem__">__class_getitem__</a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">A1</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">A2</span>
        <span class="k">assert</span> <span class="kc">False</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__class_getitem__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">A1</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">A2</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">A</span>
    <span class="n">A1</span>
    <span class="n">A2</span>
</pre></div>
</div>
<p>Lors de l’exécution de <cite>A[1]</cite>, l’interpréteur appelle la méthode
<cite>__class_getitem__</cite> qui elle même retourne le type <cite>A1</cite>. Cette construction
est propre au langage python. Son usage est plutôt rare.</p>
</section>
<section id="constructions-classiques">
<h2>Constructions classiques<a class="headerlink" href="#constructions-classiques" title="Lien vers cette rubrique">¶</a></h2>
<section id="sens-de-l-heritage-1">
<span id="paragraphe-fonction-variable-classe"></span><h3>Sens de l’héritage (1)<a class="headerlink" href="#sens-de-l-heritage-1" title="Lien vers cette rubrique">¶</a></h3>
<p>Le premier exemple est classique puisqu’il reprend le programme du
paragraphe <a class="reference internal" href="../../api/examples/construction_classique.html#paragraphe-fonction-variable"><span class="std std-ref">fonction comme paramètre</span></a>
pour le réécrire avec des classes et éviter de passer des fonctions
comme paramètre d’une autre fonction. La première classe définit
le module des suivantes. La méthode <code class="docutils literal notranslate"><span class="pre">calcul</span></code> n’accepte qu’un
seul paramètre <code class="docutils literal notranslate"><span class="pre">x</span></code> mais pourrait également prendre en compte
des constantes si celles-ci sont renseignées via le constructeur
de la classe. C’est l’avantage de cette solution déjà illustrée
par les pièces normales et truquées.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Fonction</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">calcul_n_valeur</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">calcul</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">res</span>


<span class="k">class</span> <span class="nc">Carre</span><span class="p">(</span><span class="n">Fonction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>


<span class="k">class</span> <span class="nc">Cube</span><span class="p">(</span><span class="n">Fonction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>


<span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># affiche [0, 1, 2, 3]</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Carre</span><span class="p">()</span><span class="o">.</span><span class="n">calcul_n_valeur</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># l1 vaut [0, 1, 4, 9]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">Cube</span><span class="p">()</span><span class="o">.</span><span class="n">calcul_n_valeur</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>  <span class="c1"># l2 vaut [0, 1, 8, 27]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">]</span>
</pre></div>
</div>
<p>La version suivante mélange héritage et méthodes envoyées
comme paramètre à une fonction. Il est préférable d’éviter
cette construction même si elle est très utilisée par les
interfaces graphiques. Elle n’est pas toujours transposable
dans tous les langages de programmation tandis que le programme
précédent aura un équivalent dans tous les langages objet.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Fonction</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Carre</span><span class="p">(</span><span class="n">Fonction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>


<span class="k">class</span> <span class="nc">Cube</span><span class="p">(</span><span class="n">Fonction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>


<span class="k">def</span> <span class="nf">calcul_n_valeur</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">res</span>


<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">l1</span> <span class="o">=</span> <span class="n">calcul_n_valeur</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">Carre</span><span class="p">()</span><span class="o">.</span><span class="n">calcul</span><span class="p">)</span>  <span class="c1"># l1 vaut [0, 1, 4, 9]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">calcul_n_valeur</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">Cube</span><span class="p">()</span><span class="o">.</span><span class="n">calcul</span><span class="p">)</span>  <span class="c1"># l2 vaut [0, 1, 8, 27]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="deux-lignees-d-heritages">
<h3>Deux lignées d’héritages<a class="headerlink" href="#deux-lignees-d-heritages" title="Lien vers cette rubrique">¶</a></h3>
<p>C’est une configuration qui arrive fréquemment lorsqu’on
a d’un côté différentes structures pour les mêmes données
et de l’autre différents algorithmes pour le même objectif.
Par exemple, une matrice peut être définie comme une liste
de listes ou un dictionnaire de tuples
(voir exercice <a class="reference internal" href="../../auto_examples/prog/plot_partie_dame.html#partiedamerst"><span class="std std-ref">Parties de dames</span></a>).
La multiplication de deux matrices peut être une multiplication
classique ou celle de <a class="reference external" href="https://fr.wikipedia.org/wiki/Algorithme_de_Strassen">Strassen</a>.
L’algorithme de multiplication de deux matrices de Strassen
est plus rapide qu’une multiplication classique pour de grandes matrices.
Son coût est en <img class="math" src="../../_images/math/4ed6eb95e469ae44198cb1bfc3f970773931e894.svg" alt="O(n^{\frac{\ln 7}{\ln 2}}) \sim O(n^{2,807})"/>
au lieu de <img class="math" src="../../_images/math/ac74b4e01d550150d96801ddef0b5b73d7c0759b.svg" alt="O(n^3)"/>.</p>
<p>La question est comment modéliser ces deux structures et ces
deux multiplications sachant que les quatre paires
<em>structure - algorithme</em> doivent fonctionner. On pourrait simplement
créer deux classes faisant référence aux deux structures
différentes et à l’intérieur de chacune d’entre elles,
avoir deux méthodes de multiplication. Néanmoins, si une
nouvelle structure ou un nouvel algorithme apparaît,
la mise à jour peut être fastidieuse.</p>
<p>Il est conseillé dans ce cas d’avoir quatre classes et de définir
une interface d’échanges communes. L’algorithme de multiplication
ne doit pas savoir quelle structure il manipule : il doit y accéder
par des méthodes. De cette manière, c’est la classe qui indique
l’algorithme choisi et non une méthode. Ajouter un troisième
algorithme ou une troisième structure revient à ajouter une classe :
l’interface d’échange ne change pas. Le programme pourrait
suivre le schéma qui suit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Matrice</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lin</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">coef</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span> <span class="o">=</span> <span class="n">lin</span><span class="p">,</span> <span class="n">col</span>

    <span class="c1"># interface d&#39;échange</span>
    <span class="k">def</span> <span class="nf">get_lin</span> <span class="p">()</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lin</span>
    <span class="k">def</span> <span class="nf">get_col</span> <span class="p">()</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">v</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span> <span class="nf">get_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">i2</span><span class="p">,</span><span class="n">j2</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">def</span> <span class="nf">set_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">mat</span><span class="p">):</span> <span class="k">pass</span>
    <span class="c1"># fin de l&#39;interface d&#39;échange</span>

    <span class="k">def</span> <span class="nf">trace</span> <span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lin</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="bp">self</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span>

<span class="k">class</span> <span class="nc">MatriceList</span> <span class="p">(</span><span class="n">Matrice</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lin</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">coef</span><span class="p">):</span>
        <span class="n">Matrice</span><span class="o">.</span><span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
        <span class="c1">#...</span>

    <span class="k">def</span> <span class="fm">__getitem__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="p">:</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="fm">__setitem__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">:</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="nf">get_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">i2</span><span class="p">,</span><span class="n">j2</span><span class="p">):</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="nf">set_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">mat</span><span class="p">):</span> <span class="c1">#...</span>

<span class="k">class</span> <span class="nc">MatriceDict</span> <span class="p">(</span><span class="n">Matrice</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lin</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">coef</span><span class="p">):</span>
        <span class="n">Matrice</span><span class="o">.</span><span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
        <span class="c1">#...</span>

    <span class="k">def</span> <span class="fm">__getitem__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="p">:</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="fm">__setitem__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="p">:</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="nf">get_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">i2</span><span class="p">,</span><span class="n">j2</span><span class="p">):</span> <span class="c1">#...</span>
    <span class="k">def</span> <span class="nf">set_submat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span><span class="n">j1</span><span class="p">,</span><span class="n">mat</span><span class="p">):</span> <span class="c1">#...</span>
</pre></div>
</div>
<p>Illustration :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Produit</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">calcul</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat1</span><span class="p">,</span> <span class="n">mat2</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ProduitClassique</span> <span class="p">(</span><span class="n">Produit</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">calcul</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat1</span><span class="p">,</span> <span class="n">mat2</span><span class="p">):</span>
        <span class="c1">#...</span>
        <span class="k">return</span>

<span class="k">class</span> <span class="nc">ProduitStrassen</span> <span class="p">(</span><span class="n">Produit</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">calcul</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat1</span><span class="p">,</span><span class="n">mat2</span><span class="p">):</span>
        <span class="c1">#...</span>
        <span class="k">return</span>
</pre></div>
</div>
<p>Cette construction autorise même la multiplication de matrices de structures
différentes. Très répandue, cette architecture est souvent plus
coûteuse au moment de la conception car il faut bien penser
l’interface d’échange mais elle l’est beaucoup moins par la suite.
Il existe d’autres assemblages de classes assez fréquents, regroupés
sous le terme de <a class="reference external" href="https://fr.wikipedia.org/wiki/Patron_de_conception">Design Patterns</a>.
Pour peu que ceux-ci soient connus de celui qui conçoit un
programme, sa relecture et sa compréhension en sont facilitées si les
commentaires font mention du <em>pattern</em> utilisé.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="questions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Questions</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Classes</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2016-2024, Xavier Dupré
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Classes</a><ul>
<li><a class="reference internal" href="#presentation-des-classes-methodes-et-attributs">Présentation des classes : méthodes et attributs</a><ul>
<li><a class="reference internal" href="#definition-declaration">Définition, déclaration</a></li>
<li><a class="reference internal" href="#methodes">Méthodes</a></li>
<li><a class="reference internal" href="#attributs">Attributs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constructeur">Constructeur</a></li>
<li><a class="reference internal" href="#apport-du-langage-python">Apport du langage python</a><ul>
<li><a class="reference internal" href="#liste-des-attributs">Liste des attributs</a></li>
<li><a class="reference internal" href="#attributs-implicites">Attributs implicites</a></li>
<li><a class="reference internal" href="#commentaires-aide">Commentaires, aide</a></li>
<li><a class="reference internal" href="#classe-incluse">Classe incluse</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operateurs">Opérateurs</a></li>
<li><a class="reference internal" href="#iterateurs">Itérateurs</a></li>
<li><a class="reference internal" href="#methodes-attributs-statiques-et-ajout-de-methodes">Méthodes, attributs statiques et ajout de méthodes</a><ul>
<li><a class="reference internal" href="#methode-statique">Méthode statique</a></li>
<li><a class="reference internal" href="#attributs-statiques">Attributs statiques</a></li>
<li><a class="reference internal" href="#ajout-de-methodes">Ajout de méthodes</a></li>
<li><a class="reference internal" href="#proprietes">Propriétés</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copie-d-instances">Copie d’instances</a><ul>
<li><a class="reference internal" href="#copie-d-instance-de-classe-simple">Copie d’instance de classe simple</a></li>
<li><a class="reference internal" href="#copie-d-instance-de-classes-incluant-d-autres-classes">Copie d’instance de classes incluant d’autres classes</a></li>
<li><a class="reference internal" href="#listes-et-dictionnaires">Listes et dictionnaires</a></li>
<li><a class="reference internal" href="#copy-et-deepcopy">copy et deepcopy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attributs-figes">Attributs figés</a></li>
<li><a class="reference internal" href="#heritage">Héritage</a><ul>
<li><a class="reference internal" href="#exemple-autour-de-pieces-de-monnaie">Exemple autour de pièces de monnaie</a></li>
<li><a class="reference internal" href="#syntaxe">Syntaxe</a></li>
<li><a class="reference internal" href="#sens-de-l-heritage-2">Sens de l’héritage (2)</a></li>
<li><a class="reference internal" href="#heritage-multiple">Héritage multiple</a></li>
<li><a class="reference internal" href="#fonctions-issubclass-et-isinstance">Fonctions issubclass et isinstance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compilation-de-classes">Compilation de classes</a></li>
<li><a class="reference internal" href="#surcharge-d-operateur-sur-des-types">Surcharge d’opérateur sur des types</a></li>
<li><a class="reference internal" href="#constructions-classiques">Constructions classiques</a><ul>
<li><a class="reference internal" href="#sens-de-l-heritage-1">Sens de l’héritage (1)</a></li>
<li><a class="reference internal" href="#deux-lignees-d-heritages">Deux lignées d’héritages</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=0886690b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/translations.js?v=e6b791cb"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>