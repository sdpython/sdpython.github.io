<!doctype html>
<html class="no-js" lang="fr">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Recherche" href="../../search.html" /><link rel="next" title="Usage" href="exception_ext.html" /><link rel="prev" title="Exceptions" href="index.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.07.26 -->
        <title>Exceptions - Documentation teachpyx 0.3.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=e5fbc548" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Documentation teachpyx 0.3.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/project_ico.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Documentation teachpyx 0.3.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Le langage Python</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Le langage Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_lang/index.html">Variables et fonctions</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Variables et fonctions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/types.html">Types et variables du langage python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/syntaxe.html">Syntaxe du langage Python (boucles, tests, fonctions)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/constructions.html">Constructions classiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/collections.html">Constructions classiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/dates.html">Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_lang/encoding.html">Encoding et jeux de caract√®res</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_classes/index.html">Classes</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Classes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_classes/classes.html">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../c_classes/questions.html">Questions</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Exceptions</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Exceptions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="exception_ext.html">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="warning.html">Warning et logging</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_module/index.html">Entr√©es, Sorties, Modules</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Entr√©es, Sorties, Modules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_module/files.html">Fichiers</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../c_module/serialization.html">S√©rialisation</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of S√©rialisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../auto_examples/plot_serialisation_examples.html">S√©rialisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../c_module/module.html">Module ou extension</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_regex/index.html">Expression r√©guli√®res</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Expression r√©guli√®res</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_regex/regex.html">Expressions r√©guli√®res</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_parallelisation/index.html">Parall√©lisation</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Parall√©lisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_parallelisation/thread.html">Threads</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../c_gui/index.html">Interfaces graphiques</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Interfaces graphiques</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../c_gui/tkinter.html">tkinter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../i_expy.html">Exemples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_data/index.html">Matrices et DataFrames</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Matrices et DataFrames</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../c_data/matrices.html">Calcul matriciel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_data/dataframes.html">Dataframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_data/i_exda.html">Exemples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../c_resume/index.html">Pr√©cis</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Pr√©cis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../c_resume/python_sheet.html">Cheat sheet: Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../c_resume/conseil_programmes.html">Quelques conseils pour √©crire un programme</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">Code inclus dans cette librairie</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Code inclus dans cette librairie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/classique.html">examples.construction_classique</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../articles/index.html">Collections d‚Äôarticles inclassables</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Collections d‚Äôarticles inclassables</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../articles/2022-12-07-cartopy.html">2022-12-07 : Utilisation de cartopy sous Windows (sous WSL)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../i_faq.html">FAQ</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../auto_examples/index.html">Bouts de code √† conserver</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Bouts de code √† conserver</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_pandas_groupby.html">Pandas et groupby</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_numpy_tricks.html">Points d‚Äôimpl√©mentation avec numpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_lambda_function.html">Astuces avec les lambda functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_gil_example.html">Le GIL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_matador.html">Mathador, √©nigme √† 4 op√©rations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_serialisation_protobuf.html">S√©rialisation avec protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_float_and_double_rouding.html">Float Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_partie_dame.html">Parties de dames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_hypercube.html">Hypercube et autres exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_serialisation_examples.html">S√©rialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auto_examples/plot_tarabiscote.html">Exercices expliqu√©s de programmation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../defthe_index.html">Syntaxes, D√©finitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOGS.html">Change Logs</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="exceptions">
<span id="chap-exception"></span><span id="l-exception"></span><h1>Exceptions<a class="headerlink" href="#exceptions" title="Lien permanent vers cette rubrique">#</a></h1>
<nav class="contents local" id="sommaire">
<ul class="simple">
<li><p><a class="reference internal" href="#principe-des-exceptions" id="id1">Principe des exceptions</a></p>
<ul>
<li><p><a class="reference internal" href="#attraper-toutes-les-erreurs" id="id2">Attraper toutes les erreurs</a></p></li>
<li><p><a class="reference internal" href="#obtenir-le-type-d-erreur-attraper-un-type-d-exception" id="id3">Obtenir le type d‚Äôerreur, attraper un type d‚Äôexception</a></p></li>
<li><p><a class="reference internal" href="#lancer-une-exception" id="id4">Lancer une exception</a></p></li>
<li><p><a class="reference internal" href="#heritage-et-exception" id="id5">H√©ritage et exception</a></p></li>
<li><p><a class="reference internal" href="#instructions-try-except-imbriquees" id="id6">Instructions <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code> imbriqu√©es</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#definir-ses-propres-exceptions" id="id7">D√©finir ses propres exceptions</a></p>
<ul>
<li><p><a class="reference internal" href="#deriver-une-classe-d-exception" id="id8">D√©river une classe d‚Äôexception</a></p></li>
<li><p><a class="reference internal" href="#personnalisation-d-une-classe-d-exception" id="id9">Personnalisation d‚Äôune classe d‚Äôexception</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#exemples-d-utilisation-des-exceptions" id="id10">Exemples d‚Äôutilisation des exceptions</a></p>
<ul>
<li><p><a class="reference internal" href="#les-iterateurs" id="id11">Les it√©rateurs</a></p></li>
<li><p><a class="reference internal" href="#exception-ou-valeur-aberrante" id="id12">Exception ou valeur aberrante</a></p></li>
<li><p><a class="reference internal" href="#le-piege-des-exceptions" id="id13">Le pi√®ge des exceptions</a></p></li>
</ul>
</li>
</ul>
</nav>
<p id="index-0">Le petit programme suivant d√©clenche une erreur parce qu‚Äôil effectue une
division par z√©ro.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_140153976546432</span>
    <span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p>Il d√©clenche une erreur ou ce qu‚Äôon appelle une <em>exception</em>.
Le m√©canisme des exceptions permet au programme de ¬´¬†rattraper¬†¬ª les
erreurs, de d√©tecter qu‚Äôune erreur s‚Äôest produite et d‚Äôagir en
cons√©quence afin que le programme ne s‚Äôarr√™te pas.</p>
<section id="principe-des-exceptions">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Principe des exceptions</a><a class="headerlink" href="#principe-des-exceptions" title="Lien permanent vers cette rubrique">#</a></h2>
<section id="attraper-toutes-les-erreurs">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Attraper toutes les erreurs</a><a class="headerlink" href="#attraper-toutes-les-erreurs" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Une exception est un objet qui indique que le programme ne peut continuer son ex√©cution.
Le type de l‚Äôexception donne une indication sur le type de l‚Äôerreur rencontr√©e.
L‚Äôexception contient g√©n√©ralement un message plus d√©taill√©.
Toutes les exceptions h√©rite des types <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(disponible dans Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code></a>
pour les exceptions d√©finies par le langage et <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(disponible dans Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> pour
les exceptions d√©finies par l‚Äôutilisateur.</p>
<p>On d√©cide par exemple qu‚Äôon veut rattraper toutes les erreurs du
programme et afficher un message d‚Äôerreur. Le programme suivant appelle
la fonction qui retourne l‚Äôinverse d‚Äôun nombre.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mf">0.5</span>
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">11</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">9</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_140153982391744</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span><span class="p">,</span> <span class="ow">in</span> <span class="n">inverse</span>
    <span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p id="index-1">Lorsque <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">0</span></code>, le programme effectue une division par z√©ro et
d√©clenche une erreur. L‚Äôinterpr√©teur Python affiche ce qu‚Äôon appelle la
<em>pile d‚Äôappels</em> ou <a class="reference external" href="https://fr.wikipedia.org/wiki/Pile_d%27ex%C3%A9cution">pile d‚Äôex√©cution</a>.
La pile d‚Äôappel permet d‚Äôobtenir la liste de toutes les fonctions pour remonter
jusqu‚Äô√† celle o√π l‚Äôerreur s‚Äôest produite.</p>
<p>Afin de rattraper l‚Äôerreur, on ins√®re le code susceptible de produire
une erreur entre les mots cl√©s <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#try">try</a>
et <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#except">except</a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># d√©clenche une exception</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;le programme a d√©clench√© une erreur&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mf">0.5</span>
    <span class="n">le</span> <span class="n">programme</span> <span class="n">a</span> <span class="n">d√©clench√©</span> <span class="n">une</span> <span class="n">erreur</span>
</pre></div>
</div>
<p>Le programme essaye d‚Äôex√©cuter les quatre instructions incluses entre
les instructions <code class="docutils literal notranslate"><span class="pre">try</span></code> et <code class="docutils literal notranslate"><span class="pre">except</span></code>. Si une erreur se produit, le programme ex√©cute
alors les lignes qui suivent l‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">except</span></code>. L‚Äôerreur se produit en fait
√† l‚Äôint√©rieur de la fonction mais celle-ci est appel√©e √† l‚Äôint√©rieur
d‚Äôun code ¬´¬†prot√©g√©¬†¬ª contre les erreurs. Ceci explique les lignes affich√©es par le programme.
Il est aussi possible d‚Äôajouter une clause qui sert de pr√©fixe √† une
liste d‚Äôinstructions qui ne sera ex√©cut√©e que si aucune exception n‚Äôest
d√©clench√©e.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># pas d&#39;erreur</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># pas d&#39;erreur non plus</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;le programme a d√©clench√© une erreur&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tout s&#39;est bien pass√©&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="mf">0.5</span>
    <span class="mf">1.0</span>
    <span class="n">tout</span> <span class="n">s</span><span class="s1">&#39;est bien pass√©</span>
</pre></div>
</div>
<p>Ce dernier programme attrape l‚Äôerreur et affiche un message.
Ce programme ne s‚Äôarr√™te jamais, il ne <em>plante</em> jamais.
Pour r√©sumer, la syntaxe suivante permet d‚Äôattraper toutes les erreurs
qui se produisent pendant l‚Äôex√©cution d‚Äôune partie du programme. Cette
syntaxe permet en quelque sorte de prot√©ger cette partie du programme
contre les erreurs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># ... instructions √† prot√©ger</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># ... que faire en cas d&#39;erreur</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># ... que faire lorsque aucune erreur n&#39;est apparue</span>
</pre></div>
</div>
<p>Toute erreur d√©clench√©e alors que le programme ex√©cute les instructions
qui suivent le mot-cl√© <code class="docutils literal notranslate"><span class="pre">try</span></code> d√©clenche imm√©diatement l‚Äôex√©cution des lignes
qui suivent le mot-cl√© <code class="docutils literal notranslate"><span class="pre">except</span></code>. Dans le cas contraire, le programme
se poursuit avec l‚Äôex√©cution des lignes qui suivent le mot-cl√©
<code class="docutils literal notranslate"><span class="pre">else</span></code>. Cette derni√®re partie est facultative, la clause
<code class="docutils literal notranslate"><span class="pre">else</span></code> peut ou non √™tre pr√©sente. Le bout de code pr√©voit
ce qu‚Äôil faut faire dans n‚Äôimporte quel cas.</p>
<p>Lorsqu‚Äôune section de code est prot√©g√©e contre les exceptions,
son ex√©cution s‚Äôarr√™te √† la premi√®re erreur d‚Äôex√©cution.
Le reste du code n‚Äôest pas ex√©cut√©.
Par exemple, d√®s la premi√®re erreur qui correspond au calcul d‚Äôune
puissance non enti√®re d‚Äôun nombre n√©gatif, l‚Äôex√©cution du programme
suivant est dirig√©e vers l‚Äôinstruction qui suit le mot-cl√© <code class="docutils literal notranslate"><span class="pre">except</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span> <span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">((</span><span class="o">-</span><span class="mf">2.1</span><span class="p">)</span> <span class="o">**</span> <span class="mf">3.1</span><span class="p">)</span>  <span class="c1"># premi√®re erreur</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>     <span class="c1"># cette ligne produirait une erreur</span>
                          <span class="c1"># mais le programme n&#39;arrive jamais jusqu&#39;ici</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;le programme a d√©clench√© une erreur&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Cette √©criture n‚Äôest n√©anmoins par recommand√©e car le programme
intercepte toutes les erreurs quelles qu‚Äôelles soient. Il est
pr√©f√©rable de n‚Äôattraper que les exceptions pr√©vues sans risquer
de masquer celles qui n‚Äô√©taient pas pr√©vues et qui pourraient
√™tre la cons√©quence d‚Äôun bug.</p>
</section>
<section id="obtenir-le-type-d-erreur-attraper-un-type-d-exception">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Obtenir le type d‚Äôerreur, attraper un type d‚Äôexception</a><a class="headerlink" href="#obtenir-le-type-d-erreur-attraper-un-type-d-exception" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Parfois, plusieurs types d‚Äôerreurs peuvent √™tre d√©clench√©s √† l‚Äôint√©rieur
d‚Äôune portion de code prot√©g√©e. Pour avoir une information sur ce type,
il est possible de r√©cup√©rer une variable de type
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html">Exception</a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;exception de type &quot;</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
    <span class="c1"># affiche exception de type  exceptions.ZeroDivisionError</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
    <span class="c1"># affiche le message associ√© √† l&#39;exception</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    0.5
    exception de type  &lt;class &#39;ZeroDivisionError&#39;&gt;
    message float division by zero
</pre></div>
</div>
<p>Le programme pr√©c√©dent r√©cup√®re une exception sous
la forme d‚Äôune variable appel√©e . Cette variable est en fait une
instance d‚Äôune classe d‚Äôerreur, <code class="docutils literal notranslate"><span class="pre">__class__</span></code> correspond au nom de cette classe. A
l‚Äôaide de la fonction <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>, il est possible d‚Äôex√©cuter des traitements
diff√©rents selon le type d‚Äôerreur.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">((</span><span class="o">-</span><span class="mf">2.1</span><span class="p">)</span> <span class="o">**</span> <span class="mf">3.1</span><span class="p">)</span>  <span class="c1"># premi√®re erreur</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># seconde erreur</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="ne">ZeroDivisionError</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;division par z√©ro&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur insoup√ßonn√©e :&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="o">-</span><span class="mf">9.48606594010979</span><span class="o">-</span><span class="mf">3.0822096637057887</span><span class="n">j</span><span class="p">)</span>
    <span class="mf">0.5</span>
    <span class="n">division</span> <span class="n">par</span> <span class="n">z√©ro</span>
</pre></div>
</div>
<p>L‚Äôexemple pr√©c√©dent affiche le message qui suit parce que la premi√®re
erreur intervient lors du calcul de <code class="docutils literal notranslate"><span class="pre">(-2.1)</span> <span class="pre">**</span> <span class="pre">3.1</span></code>.
Une autre syntaxe plus simple permet d‚Äôattraper un type d‚Äôexception
donn√© en accolant au mot-cl√© <code class="docutils literal notranslate"><span class="pre">except</span></code> le type de l‚Äôexception qu‚Äôon d√©sire
attraper. L‚Äôexemple pr√©c√©dent est √©quivalent au suivant mais
syntaxiquement diff√©rent.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">((</span><span class="o">-</span><span class="mf">2.1</span><span class="p">)</span> <span class="o">**</span> <span class="mf">3.1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;division par z√©ro&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur insoup√ßonn√©e :&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;message &quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="o">-</span><span class="mf">9.48606594010979</span><span class="o">-</span><span class="mf">3.0822096637057887</span><span class="n">j</span><span class="p">)</span>
    <span class="mf">0.5</span>
    <span class="n">division</span> <span class="n">par</span> <span class="n">z√©ro</span>
</pre></div>
</div>
<p>Cette syntaxe ob√©it au sch√©ma qui suit.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe0">
<p class="admonition-title">Syntaxe S1 : Attraper une exception</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># ... instructions √† prot√©ger</span>
<span class="k">except</span> <span class="n">type_exception_1</span><span class="p">:</span>
    <span class="c1"># ... que faire en cas d&#39;erreur de type type_exception_1</span>
<span class="k">except</span> <span class="p">(</span><span class="n">type_exception_i</span><span class="p">,</span> <span class="n">type_exception_j</span><span class="p">):</span>
    <span class="c1"># ... que faire en cas d&#39;erreur de type type_exception_i ou type_exception_j</span>
<span class="k">except</span> <span class="n">type_exception_n</span><span class="p">:</span>
    <span class="c1"># ... que faire en cas d&#39;erreur de type type_exception_n</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># ... que faire en cas d&#39;erreur d&#39;un type diff√©rent de tous</span>
    <span class="c1">#     les pr√©c√©dents types</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># ... que faire lorsque une erreur aucune erreur n&#39;est apparue</span>
</pre></div>
</div>
</div>
<p>Toute erreur d√©clench√©e alors que le programme ex√©cute les instructions qui suivent le mot-cl√©
<code class="docutils literal notranslate"><span class="pre">try</span></code> d√©clenche imm√©diatement l‚Äôex√©cution des lignes qui suivent un mot-cl√© <code class="docutils literal notranslate"><span class="pre">except</span></code>.
Le programme compare le type d‚Äôexception aux types <code class="docutils literal notranslate"><span class="pre">type_exception_1</span></code> √† <code class="docutils literal notranslate"><span class="pre">type_exception_n</span></code>.
S‚Äôil existe une correspondance alors ce sont les instructions de la clause <code class="docutils literal notranslate"><span class="pre">except</span></code> associ√©e qui
seront ex√©cut√©es et uniquement ces instructions. La derni√®re clause <code class="docutils literal notranslate"><span class="pre">except</span></code> est facultative,
elle est utile lorsque aucun type de ceux pr√©vus ne correspond √† l‚Äôexception
g√©n√©r√©e. La clause <code class="docutils literal notranslate"><span class="pre">else</span></code> est aussi facultative. Si la derni√®re clause <code class="docutils literal notranslate"><span class="pre">except</span></code>
n‚Äôest pas sp√©cifi√©e et que l‚Äôexception d√©clench√©e ne correspond √† aucune de celle
list√©e plus haut, le programme s‚Äôarr√™te sur cette erreur √† moins que celle-ci ne soit attrap√©e plus tard.</p>
<p>Le langage Python propose une liste
d‚Äù<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#base-classes">exceptions standards</a>.
Lorsqu‚Äôune erreur ne correspond pas √† l‚Äôune de ces exceptions,
il est possible de cr√©er une exception propre √† un certain type d‚Äôerreur.
Lorsqu‚Äôune fonction ou une m√©thode d√©clenche une
exception non standard, g√©n√©ralement, le commentaire qui lui est associ√©
l‚Äôindique. Quelques types d‚Äôexception courantes
document√©e dans la section
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#concrete-exceptions">Concrete exceptions</a>.
Certaines surviennent car le programme est mal √©crit et l‚Äôinterpr√©teur
ne peut le comprendre :</p>
<ul class="simple" id="index-4">
<li><p><strong>IndentationError</strong> :
L‚Äôinterpr√©teur ne peut interpr√©ter une partie du programme √† cause
d‚Äôun probl√®me d‚Äôindentation. Il n‚Äôest pas possible
d‚Äôex√©cuter un programme mal indent√© mais cette erreur peut se produire
lors de l‚Äôutilisation de la fonction
<a class="reference external" href="https://docs.python.org/3/library/functions.html?highlight=compile#compile">compile</a>.</p></li>
<li><p><strong>SyntaxError</strong> :
Le programme a un probl√®me de syntaxe comme une parenth√®se en trop ou
ou en moins.</p></li>
</ul>
<p>Les deux suivantes surviennent lorsqu‚Äôon se trompe dans l‚Äôorthographe d‚Äôune
variable, une fonction, un module :</p>
<ul class="simple" id="index-5">
<li><p><strong>AttributeError</strong> :
Une r√©f√©rence √† un attribut inexistant ou une affectation a √©chou√©.</p></li>
<li><p><strong>ImportError</strong> :
Cette erreur survient lorsqu‚Äôon cherche √† importer un module qui n‚Äôexiste pas,
son nom est mal orthographi√© ou il n‚Äôest pas install√©.</p></li>
<li><p><strong>NameError</strong> :
On utilise une variable, une fonction, une classe qui n‚Äôexiste pas.</p></li>
</ul>
<p>Les erreurs tr√®s fr√©quentes, erreur d‚Äôindices, de types :</p>
<ul class="simple" id="index-6">
<li><p><strong>IndexError</strong> :
On utilise un index erron√© pour acc√©der √† un √©l√©ment d‚Äôune liste,
d‚Äôun dictionnaire ou de tout autre tableau.</p></li>
<li><p><strong>KeyError</strong> :
Une cl√© est utilis√©e pour acc√©der √† un √©l√©ment d‚Äôun dictionnaire
dont elle ne fait pas partie.</p></li>
<li><p><strong>TypeError</strong> :
Erreur de type, une fonction est appliqu√©e sur un objet qu‚Äôelle n‚Äôest
pas cens√©e manipuler.</p></li>
<li><p><strong>ValueError</strong> :
Cette exception survient lorsqu‚Äôune valeur est inappropri√©e pour une certaine
op√©ration, par exemple, l‚Äôobtention du logarithme d‚Äôun nombre n√©gatif.</p></li>
</ul>
<p>Les erreurs qui surviennent lorsqu‚Äôon travaille avec des fichiers :</p>
<ul class="simple" id="index-7">
<li><p><strong>OSError</strong> :
Une op√©ration concernant les entr√©es/sorties (Input/Output) a √©chou√©.
Cette erreur survient par exemple lorsqu‚Äôon cherche √†
lire un fichier qui n‚Äôexiste pas.</p></li>
<li><p><strong>UnicodeError</strong> :
Erreur de conversion d‚Äôun <a class="reference external" href="https://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res">encodage</a>
de texte √† un autre. C‚Äôest une erreur qui survient r√©guli√®rement quand on travaille
avec des langues qui ont des accents (non anglophones).</p></li>
</ul>
</section>
<section id="lancer-une-exception">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Lancer une exception</a><a class="headerlink" href="#lancer-une-exception" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-8">Lorsqu‚Äôune fonction d√©tecte une erreur, il lui est possible de
d√©clencher une exception par l‚Äôinterm√©diaire du mot-cl√© <code class="docutils literal notranslate"><span class="pre">raise</span></code>.
La fonction <code class="docutils literal notranslate"><span class="pre">inverse</span></code>
compare <code class="docutils literal notranslate"><span class="pre">x</span></code> √† <code class="docutils literal notranslate"><span class="pre">0</span></code> et d√©clenche l‚Äôexception <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> si <code class="docutils literal notranslate"><span class="pre">x</span></code> est nul.
Cette exception est attrap√©e plus bas.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># erreur</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur de type ValueError&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">erreur</span> <span class="n">de</span> <span class="nb">type</span> <span class="ne">ValueError</span>
</pre></div>
</div>
<p>Il est parfois utile d‚Äôassocier un message √† une exception afin que
l‚Äôutilisateur ne soit pas perdu. Le programme qui suit est identique au
pr√©c√©dent √† ceci pr√®s qu‚Äôil associe √† l‚Äôexception <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> qui pr√©cise l‚Äôerreur
et mentionne la fonction o√π elle s‚Äôest produite. Le message est ensuite
intercept√© plus bas.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;valeur nulle interdite, fonction inverse&quot;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># erreur</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur, message :&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">erreur</span><span class="p">,</span> <span class="n">message</span> <span class="p">:</span> <span class="n">valeur</span> <span class="n">nulle</span> <span class="n">interdite</span><span class="p">,</span> <span class="n">fonction</span> <span class="n">inverse</span>
</pre></div>
</div>
<p>Le d√©clenchement d‚Äôune exception suit la syntaxe suivante.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Syntaxe1">
<p class="admonition-title">Syntaxe S2 : Lever une exception</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="n">exception_type</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>Cette instruction lance l‚Äôexception <code class="docutils literal notranslate"><span class="pre">exception_type</span></code> associ√©e au message
<code class="docutils literal notranslate"><span class="pre">message</span></code>. Le message est facultatif, lorsqu‚Äôil n‚Äôy en a pas, la syntaxe
se r√©sume √† <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">exception_type</span></code>.</p>
</div>
<p>Et pour attraper cette exception et le message qui lui est associ√©, il
faut utiliser la syntaxe d√©crite au paragraphe pr√©c√©dent.</p>
</section>
<section id="heritage-et-exception">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">H√©ritage et exception</a><a class="headerlink" href="#heritage-et-exception" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-9">L‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">help(ZeroDivisionError)</span></code> retourne l‚Äôaide associ√©e √† l‚Äôexception <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>.
Celle-ci indique que l‚Äôexception <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> est en fait un cas particulier de
l‚Äôexception <code class="docutils literal notranslate"><span class="pre">ArithmeticError</span></code>,
elle-m√™me un cas particulier de <code class="docutils literal notranslate"><span class="pre">StandardError</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ZeroDivisionError</span><span class="p">(</span><span class="ne">ArithmeticError</span><span class="p">)</span>
    <span class="o">|</span>  <span class="n">Second</span> <span class="n">argument</span> <span class="n">to</span> <span class="n">a</span> <span class="n">division</span> <span class="ow">or</span> <span class="n">modulo</span> <span class="n">operation</span> <span class="n">was</span> <span class="n">zero</span><span class="o">.</span>
    <span class="o">|</span>
    <span class="o">|</span>  <span class="n">Method</span> <span class="n">resolution</span> <span class="n">order</span><span class="p">:</span>
    <span class="o">|</span>      <span class="ne">ZeroDivisionError</span>
    <span class="o">|</span>      <span class="ne">ArithmeticError</span>
    <span class="o">|</span>      <span class="n">StandardError</span>
    <span class="o">|</span>      <span class="ne">Exception</span>
</pre></div>
</div>
<p>Toutes les exceptions sont des cas particuliers de l‚Äôexception de type <code class="docutils literal notranslate"><span class="pre">Exception</span></code>.
C‚Äôest pourquoi l‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">Exception:</span></code> attrape toutes les exceptions.
L‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">ArithmeticError:</span></code> attrape toutes les erreurs de
type <code class="docutils literal notranslate"><span class="pre">ArithmeticError</span></code>, ce qui inclut les erreurs de type <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>.
Autrement dit, toute exception de type <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>
est attrap√©e par les instructions suivantes :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
<span class="k">except</span> <span class="ne">ArithmeticError</span><span class="p">:</span>
<span class="k">except</span> <span class="n">StandardError</span><span class="p">:</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</pre></div>
</div>
<p>Plus pr√©cis√©ment, chaque exception est une classe qui d√©rive directement ou indirectement de la
classe <code class="docutils literal notranslate"><span class="pre">Exception</span></code>. L‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">ArithmeticError</span> <span class="pre">:</span></code> par exemple attrape
toutes les exceptions de type <code class="docutils literal notranslate"><span class="pre">ArithmeticError</span></code> et toutes celles
qui en d√©rivent comme la classe <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>.</p>
</section>
<section id="instructions-try-except-imbriquees">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Instructions <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code> imbriqu√©es</a><a class="headerlink" href="#instructions-try-except-imbriquees" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Comme pour les boucles, il est possible d‚Äôimbriquer les portions
prot√©g√©es de code les unes dans les autres. Dans l‚Äôexemple qui suit, la
premi√®re erreur est l‚Äôappel √† une fonction non d√©finie, ce qui d√©clenche
l‚Äôexception <code class="docutils literal notranslate"><span class="pre">NameError</span></code>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">inverses</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># fonction inexistante --&gt; exception NameError</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># division par z√©ro --&gt; ZeroDivisionError</span>
    <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;appel √† une fonction non d√©finie&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">appel</span> <span class="n">√†</span> <span class="n">une</span> <span class="n">fonction</span> <span class="n">non</span> <span class="n">d√©finie</span>
</pre></div>
</div>
<p>En revanche, dans le second exemple, les deux lignes
<code class="docutils literal notranslate"><span class="pre">print(inverse(0))</span></code> et <code class="docutils literal notranslate"><span class="pre">print(inverses(0))</span></code> ont √©t√© permut√©es. La premi√®re
exception d√©clench√©e est la division par z√©ro. La premi√®re clause
<code class="docutils literal notranslate"><span class="pre">except</span></code> n‚Äôinterceptera pas cette erreur puisqu‚Äôelle n‚Äôest pas du type recherch√©.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># division par z√©ro --&gt; ZeroDivisionError</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">inverses</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># fonction inexistante --&gt; exception NameError</span>
    <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;appel √† une fonction non d√©finie&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">erreur</span> <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p>Une autre imbrication possible est l‚Äôappel √† une fonction qui inclut d√©j√†
une partie de code prot√©g√©e. L‚Äôexemple suivant appelle la fonction
<code class="docutils literal notranslate"><span class="pre">inverse</span></code> qui intercepte les exceptions de type <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> pour retourner
une grande valeur lorsque <code class="docutils literal notranslate"><span class="pre">x=0</span></code>. La seconde exception g√©n√©r√©e survient
lors de l‚Äôappel √† la fonction <code class="docutils literal notranslate"><span class="pre">inverses</span></code> qui d√©clenche l‚Äôexception <code class="docutils literal notranslate"><span class="pre">NameError</span></code>,
elle aussi intercept√©e.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur &quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1000000000</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1000000000</span>
    <span class="k">return</span> <span class="n">y</span>


<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverse</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># division par z√©ro    --&gt; la fonction inverse sait g√©rer</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">inverses</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># fonction inexistante --&gt; exception NameError</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;appel √† une fonction non d√©finie&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">erreur</span>  <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
    <span class="o">-</span><span class="mi">1000000000</span>
    <span class="n">appel</span> <span class="n">√†</span> <span class="n">une</span> <span class="n">fonction</span> <span class="n">non</span> <span class="n">d√©finie</span>
</pre></div>
</div>
</section>
</section>
<section id="definir-ses-propres-exceptions">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">D√©finir ses propres exceptions</a><a class="headerlink" href="#definir-ses-propres-exceptions" title="Lien permanent vers cette rubrique">#</a></h2>
<section id="deriver-une-classe-d-exception">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">D√©river une classe d‚Äôexception</a><a class="headerlink" href="#deriver-une-classe-d-exception" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Pour d√©finir sa propre exception, il faut cr√©er une classe qui d√©rive d‚Äôune
classe d‚Äôexception existante par exemple, la classe <code class="docutils literal notranslate"><span class="pre">Exception</span></code>.
L‚Äôexemple suivant cr√©e une exception <code class="docutils literal notranslate"><span class="pre">AucunChiffre</span></code> qui est lanc√©e par la fonction
<code class="docutils literal notranslate"><span class="pre">conversion</span></code> lorsque la cha√Æne de caract√®res qu‚Äôelle doit
convertir ne contient pas que des chiffres.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AucunChiffre</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    cha√Æne de caract√®res contenant aussi autre chose que des chiffres</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">conversion</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    conversion d&#39;une cha√Æne de caract√®res en entier</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">AucunChiffre</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;123a&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot; = &quot;</span><span class="p">,</span> <span class="n">conversion</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="k">except</span> <span class="n">AucunChiffre</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="c1"># on affiche ici le commentaire associ√© √† la classe d&#39;exception</span>
    <span class="c1"># et le message associ√©</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">AucunChiffre</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span> <span class="s2">&quot; : &quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
            <span class="n">cha√Æne</span> <span class="n">de</span> <span class="n">caract√®res</span> <span class="n">contenant</span> <span class="n">aussi</span> <span class="n">autre</span> <span class="n">chose</span> <span class="n">que</span> <span class="n">des</span> <span class="n">chiffres</span>
              <span class="p">:</span>  <span class="mi">123</span><span class="n">a</span>
</pre></div>
</div>
<p id="index-10">En red√©finissant l‚Äôop√©rateur <code class="docutils literal notranslate"><span class="pre">__str__</span></code> d‚Äôune exception,
il est possible d‚Äôafficher des messages plus explicites avec
la seule instruction <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AucunChiffre</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    cha√Æne de caract√®res contenant aussi autre chose que des chiffres</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__str__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">,</span> <span class="ne">Exception</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="personnalisation-d-une-classe-d-exception">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Personnalisation d‚Äôune classe d‚Äôexception</a><a class="headerlink" href="#personnalisation-d-une-classe-d-exception" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Il est parfois utile qu‚Äôune exception contienne davantage d‚Äôinformations
qu‚Äôun simple message. L‚Äôexemple suivant reprend l‚Äôexemple du paragraphe pr√©c√©dent.
L‚Äôexception <code class="docutils literal notranslate"><span class="pre">AucunChiffre</span></code> inclut cette fois-ci un param√®tre suppl√©mentaire
contenant le nom de la fonction o√π l‚Äôerreur a √©t√© d√©clench√©e.</p>
<p>La classe <code class="docutils literal notranslate"><span class="pre">AucunChiffre</span></code> poss√®de dor√©navant un constructeur qui doit
recevoir deux param√®tres : une valeur et un nom de fonction. L‚Äôexception est lev√©e √†
l‚Äôaide de l‚Äôinstruction <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">AucunChiffre(s,</span> <span class="pre">&quot;conversion&quot;)</span></code> qui regroupe
dans un T-uple les param√®tres √† envoyer √† l‚Äôexception.</p>
<p>L‚Äôop√©rateur <code class="docutils literal notranslate"><span class="pre">__str__</span></code> a √©t√© modifi√© de fa√ßon √† ajouter ces deux
informations dans le message associ√© √† l‚Äôexception. Ainsi, l‚Äôinstruction
<code class="docutils literal notranslate"><span class="pre">print(exc)</span></code> pr√©sente √† l‚Äôavant derni√®re ligne de cet
exemple affiche un message plus complet.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AucunChiffre</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    cha√Æne de caract√®res contenant aussi autre chose que des chiffres</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="ne">Exception</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;exception AucunChiffre, depuis la fonction </span><span class="si">{0}</span><span class="s2"> avec le param√®tre </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span>
        <span class="p">)</span>


<span class="k">def</span> <span class="nf">conversion</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    conversion d&#39;une cha√Æne de caract√®res en entier</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">AucunChiffre</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;conversion&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;123a&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">conversion</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot; = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="k">except</span> <span class="n">AucunChiffre</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;fonction : &quot;</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">exception</span> <span class="n">AucunChiffre</span><span class="p">,</span> <span class="n">depuis</span> <span class="n">la</span> <span class="n">fonction</span> <span class="n">conversion</span> <span class="n">avec</span> <span class="n">le</span> <span class="n">param√®tre</span> <span class="mi">123</span><span class="n">a</span>
    <span class="n">fonction</span> <span class="p">:</span>  <span class="n">conversion</span>
</pre></div>
</div>
<p>Etant donn√© que le programme d√©clenche une exception dans la section de
code prot√©g√©e, les deux derniers affichages sont les seuls ex√©cut√©s
correctement. Ils produisent les deux lignes qui suivent. %</p>
</section>
</section>
<section id="exemples-d-utilisation-des-exceptions">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Exemples d‚Äôutilisation des exceptions</a><a class="headerlink" href="#exemples-d-utilisation-des-exceptions" title="Lien permanent vers cette rubrique">#</a></h2>
<section id="les-iterateurs">
<span id="index-11"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">Les it√©rateurs</a><a class="headerlink" href="#les-iterateurs" title="Lien permanent vers cette rubrique">#</a></h3>
<p>Les it√©rateurs sont des outils qui permettent de parcourir des objets qui
sont des ensembles, comme une liste, un dictionnaire. Ils fonctionnent toujours
de la m√™me mani√®re. L‚Äôexemple d√©j√† pr√©sent√© au chapitre <a class="reference internal" href="../c_classes/classes.html#chap-iterateur"><span class="std std-ref">It√©rateurs</span></a>
et repris en partie ici d√©finit une classe contenant trois coordonn√©es,
ainsi qu‚Äôun it√©rateur permettant de parcourir ces trois coordonn√©es.
Arriv√©e √† la troisi√®me it√©ration, l‚Äôexception
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#StopIteration">StopIteration</a>
est d√©clench√©e. Cette exception indique √† une boucle <code class="docutils literal notranslate"><span class="pre">for</span></code> de s‚Äôarr√™ter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">point_espace</span><span class="p">:</span>

    <span class="c1"># ...</span>

    <span class="k">class</span> <span class="nc">class_iter</span><span class="p">:</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ins</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_n</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ins</span> <span class="o">=</span> <span class="n">ins</span>
        <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ins</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">point_espace</span><span class="o">.</span><span class="n">class_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>Cet exemple montre seulement que les exceptions
n‚Äôinterviennent pas seulement lors d‚Äôerreurs mais font parfois partie
int√©grante d‚Äôun algorithme.</p>
</section>
<section id="exception-ou-valeur-aberrante">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Exception ou valeur aberrante</a><a class="headerlink" href="#exception-ou-valeur-aberrante" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-12">Sans exception, une solution pour indiquer un cas de mauvaise utilisation
d‚Äôune fonction est de retourner une valeur aberrante.
Retourner <code class="docutils literal notranslate"><span class="pre">-1</span></code> pour une fonction dont le r√©sultat est n√©cessairement
positif est une valeur aberrante. Cette convention permet de signifier √†
celui qui appelle la fonction que son appel n‚Äôa pu √™tre trait√© correctement.
Dans l‚Äôexemple qui suit, la fonction <code class="docutils literal notranslate"><span class="pre">racine_carree</span></code> retourne un couple de
r√©sultats, <code class="docutils literal notranslate"><span class="pre">True</span></code> ou <code class="docutils literal notranslate"><span class="pre">False</span></code> pour savoir si le calcul est possible,
suivi du r√©sultat qui n‚Äôa un sens que si <code class="docutils literal notranslate"><span class="pre">True</span></code> est retourn√©e en premi√®re valeur.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">racine_carree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mf">0.5</span>


<span class="nb">print</span><span class="p">(</span><span class="n">racine_carree</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># (False, 0)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">racine_carree</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># (True, 1.0)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Plut√¥t que de compliquer le programme avec deux r√©sultats ou une valeur aberrante,
on pr√©f√®re souvent d√©clencher une exception, ici, <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.
La plupart du temps, cette exception n‚Äôest pas d√©clench√©e.
Il est donc superflu de retourner un couple plut√¥t qu‚Äôune seule valeur.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">racine_carree</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;valeur n√©gative&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mf">0.5</span>


<span class="nb">print</span><span class="p">(</span><span class="n">racine_carree</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># d√©clenche une exception</span>
<span class="nb">print</span><span class="p">(</span><span class="n">racine_carree</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    
    <span class="p">[</span><span class="n">runpythonerror</span><span class="p">]</span>
    
    <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">globs</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">10</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">8</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_python_script_140153473422784</span>
      <span class="n">File</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="n">racine_carree</span>
    <span class="ne">ValueError</span><span class="p">:</span> <span class="n">valeur</span> <span class="n">n√©gative</span>
</pre></div>
</div>
</section>
<section id="le-piege-des-exceptions">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Le pi√®ge des exceptions</a><a class="headerlink" href="#le-piege-des-exceptions" title="Lien permanent vers cette rubrique">#</a></h3>
<p id="index-13">Ce paragraphe √©voque certains probl√®mes lorsqu‚Äôune exception est lev√©e.
L‚Äôexemple utilise les fichiers d√©crits au chapitre <a class="reference internal" href="../c_module/files.html#chap-fichier"><span class="std std-ref">Fichiers</span></a>.
Lorsqu‚Äôune exception est lev√©e √† l‚Äôint√©rieur d‚Äôune fonction,
l‚Äôex√©cution de celle-ci s‚Äôinterrompt. Si l‚Äôexception est attrap√©e,
le programme continue sans probl√®me ; les objets momentan√©ment cr√©√©s seront
d√©truits par le <a class="reference external" href="https://docs.python.org/3/library/gc.html">garbage collector</a>.
Il faut pourtant faire attention dans le cas par exemple o√π l‚Äôexception
est lev√©e alors qu‚Äôun fichier est ouvert : il ne sera pas ferm√©.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">2</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">=&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="nb">float</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>     <span class="c1"># exception si y == 0</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur avec i = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">closed</span><span class="p">)</span>
</pre></div>
</div>
<p>Les √©critures dans le fichier se font en mode ajout <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code>,
le fichier <code class="docutils literal notranslate"><span class="pre">&quot;essai.txt&quot;</span></code> contiendra tout ce qui aura √©t√© √©crit.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>affichage</p></th>
<th class="head"><p>fichier</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mi">1</span><span class="o">/-</span><span class="mi">2</span>
<span class="mi">0</span><span class="o">/-</span><span class="mi">1</span>
<span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="n">erreur</span> <span class="n">avec</span> <span class="n">i</span> <span class="o">=</span>  <span class="mi">2</span> <span class="p">,</span> <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span> <span class="kc">False</span>
<span class="mi">2</span><span class="o">/</span><span class="mi">1</span>
<span class="mi">3</span><span class="o">/</span><span class="mi">2</span>
</pre></div>
</div>
</td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mi">1</span><span class="o">/-</span><span class="mi">2</span><span class="o">=</span><span class="mf">0.5</span>
<span class="mi">0</span><span class="o">/-</span><span class="mi">1</span><span class="o">=-</span><span class="mf">0.0</span>
<span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">=</span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">=</span><span class="mf">2.0</span>
<span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="o">=</span><span class="mf">1.5</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p id="index-14">La troisi√®me ligne du fichier est tronqu√©e puisque l‚Äôerreur est
intervenue juste avant l‚Äôaffichage. On voit aussi
que <code class="docutils literal notranslate"><span class="pre">f.closed</span></code> est faux. Cela signifie que le fichier n‚Äôest pas ferm√©.
Pour se pr√©munir contre les exceptions lorsqu‚Äôon √©crit un fichier,
il faut utiliser le mot cl√©
<a class="reference external" href="https://www.python.org/dev/peps/pep-0343/">with</a> :</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">2</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;essai.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">=&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="n">y</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># exception si y == 0</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;erreur avec i = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">closed</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">-</span><span class="mi">1</span><span class="o">/-</span><span class="mi">2</span>
    <span class="mi">0</span><span class="o">/-</span><span class="mi">1</span>
    <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
    <span class="n">erreur</span> <span class="n">avec</span> <span class="n">i</span> <span class="o">=</span>  <span class="mi">2</span> <span class="p">,</span> <span class="nb">float</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span> <span class="kc">True</span>
    <span class="mi">2</span><span class="o">/</span><span class="mi">1</span>
    <span class="mi">3</span><span class="o">/</span><span class="mi">2</span>
</pre></div>
</div>
<p>Pour en savoir un peu plus :
<a class="reference external" href="http://sametmax.com/les-context-managers-et-le-mot-cle-with-en-python/">Les context managers et le mot cl√© with en Python</a>.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="exception_ext.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Usage</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Exceptions</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2016-2023, Xavier Dupr√©
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Exceptions</a><ul>
<li><a class="reference internal" href="#principe-des-exceptions">Principe des exceptions</a><ul>
<li><a class="reference internal" href="#attraper-toutes-les-erreurs">Attraper toutes les erreurs</a></li>
<li><a class="reference internal" href="#obtenir-le-type-d-erreur-attraper-un-type-d-exception">Obtenir le type d‚Äôerreur, attraper un type d‚Äôexception</a></li>
<li><a class="reference internal" href="#lancer-une-exception">Lancer une exception</a></li>
<li><a class="reference internal" href="#heritage-et-exception">H√©ritage et exception</a></li>
<li><a class="reference internal" href="#instructions-try-except-imbriquees">Instructions <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">except</span></code> imbriqu√©es</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definir-ses-propres-exceptions">D√©finir ses propres exceptions</a><ul>
<li><a class="reference internal" href="#deriver-une-classe-d-exception">D√©river une classe d‚Äôexception</a></li>
<li><a class="reference internal" href="#personnalisation-d-une-classe-d-exception">Personnalisation d‚Äôune classe d‚Äôexception</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exemples-d-utilisation-des-exceptions">Exemples d‚Äôutilisation des exceptions</a><ul>
<li><a class="reference internal" href="#les-iterateurs">Les it√©rateurs</a></li>
<li><a class="reference internal" href="#exception-ou-valeur-aberrante">Exception ou valeur aberrante</a></li>
<li><a class="reference internal" href="#le-piege-des-exceptions">Le pi√®ge des exceptions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=06258ee3"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/translations.js?v=d99ca74e"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>