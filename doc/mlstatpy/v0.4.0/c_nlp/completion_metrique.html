
<!DOCTYPE html>


<html lang="fr" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Nouvelle métrique &#8212; Documentation mlstatpy 0.4.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=72ff47bc"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/translations.js?v=d99ca74e"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'c_nlp/completion_metrique';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Propriétés mathématiques" href="completion_propriete.html" />
    <link rel="prev" title="Fausses idées reçues" href="completion_fausse.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Passer au contenu principal</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/project_ico.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/project_ico.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Navigation du site">
    Navigation du site
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_clus/index.html">
                        Clustering
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index.html">
                        Non linéaire
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index_reg_lin.html">
                        Régression linéaire
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index_reg_log.html">
                        Régression logistique
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        NLP
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    More
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_metric/index.html">
                        Métriques
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_algo/index.html">
                        Algorithmes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_garden/index.html">
                        Pérégrinations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../api/index.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../i_ex.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../defthe_index.html">
                        Listes des définitions et théorèmes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../auto_examples/index.html">
                        Gallery of examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../notebooks/index.html">
                        Galleries de notebooks
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../glossary.html">
                        Glossary
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../CHANGELOGS.html">
                        Change Logs
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Recherche</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Recherche</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Navigation du site">
    Navigation du site
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_clus/index.html">
                        Clustering
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index.html">
                        Non linéaire
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index_reg_lin.html">
                        Régression linéaire
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../c_ml/index_reg_log.html">
                        Régression logistique
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        NLP
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    More
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_metric/index.html">
                        Métriques
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_algo/index.html">
                        Algorithmes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../c_garden/index.html">
                        Pérégrinations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../api/index.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../i_ex.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../defthe_index.html">
                        Listes des définitions et théorèmes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../auto_examples/index.html">
                        Gallery of examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../notebooks/index.html">
                        Galleries de notebooks
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../glossary.html">
                        Glossary
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../CHANGELOGS.html">
                        Change Logs
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../license.html">
                        License
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Navigation de la section">
  <p class="bd-links__title" role="heading" aria-level="1">Navigation de la section</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="completion.html">Complétion</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="completion_formalisation.html">Formalisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion_fausse.html">Fausses idées reçues</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Nouvelle métrique</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion_propriete.html">Propriétés mathématiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion_optimisation.html">Problème d’optimisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion_implementation.html">Implémentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion_digression.html">Digressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/nlp/completion_trie.html">Complétion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/nlp/completion_profiling.html">Completion profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/nlp/completion_trie_long.html">Completion Trie and metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/nlp/completion_simple.html">Complétion Simple</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Fil d'Ariane">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Accueil">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">NLP</a></li>
    
    
    <li class="breadcrumb-item"><a href="completion.html" class="nav-link">Complétion</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Nouvelle métrique</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="nouvelle-metrique">
<h1>Nouvelle métrique<a class="headerlink" href="#nouvelle-metrique" title="Lien permanent vers cette rubrique">#</a></h1>
<nav class="contents local" id="sommaire">
<ul class="simple">
<li><p><a class="reference internal" href="#intuitions" id="id1">Intuitions</a></p></li>
<li><p><a class="reference internal" href="#formalisation" id="id2">Formalisation</a></p></li>
<li><p><a class="reference internal" href="#quelques-resultats" id="id3">Quelques résultats</a></p></li>
<li><p><a class="reference internal" href="#definition-avancee" id="id4">Définition avancée</a></p></li>
<li><p><a class="reference internal" href="#questions" id="id5">Questions</a></p></li>
</ul>
</nav>
<section id="intuitions">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Intuitions</a><a class="headerlink" href="#intuitions" title="Lien permanent vers cette rubrique">#</a></h2>
<ol class="arabic simple">
<li><p>La métrique actuelle n’est pas la meilleure.</p></li>
<li><p>Si les mots n’ont pas de long préfixes en commun, il vaut mieux
placer le mot le plus fréquent en première position.
Pour les mots de fréquence identique, l’ordre a peu d’importance.</p></li>
<li><p>S’il existe une séquence de mots emboîtés, les gains sont minimes
à moins d’enlever des mots ou de poser les grandes complétions d’abord.</p></li>
</ol>
<p>Les intuitions 2 et 3 seront sans doute remise en question en considérant
une nouvelle métrique.
On considère l’ensemble des complétions
<img class="math" src="../_images/math/02d33d8a2d2c23238f1631066f0ced17db9634b2.svg" alt="S"/> composé de deux mots <em>actuellement</em>, <em>actualité</em>.
Le gain moyen par mots est de 9 caractères économisés.
Si on ajoute le grand préfixe commun à la liste <em>actu</em>,
ce gain moyen tombe à 6.33 (voir <a class="reference internal" href="../notebooks/nlp/completion_trie.html"><span class="std std-ref">Complétion</span></a>) quelque
soit l’ordre choisi pour les complétions. Toutefois, si on ne prend pas
en compte le gain sur le mot <em>actu</em> car ce n’est pas un mot
correct mais plus un mot qui aide la lecture de la liste, ce gain
moyen tombe à 8 seulement. En conclusion, si l’utilisateur
tape la lettre <strong>a</strong> et qu’on lui montre ceci :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">actu</span>
<span class="n">actualité</span>
<span class="n">actuellement</span>
</pre></div>
</div>
<p>Au lieu de :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">actualité</span>
<span class="n">actuellement</span>
</pre></div>
</div>
<p>Il doit taper en moyenne un caractère de plus pour obtenir le mot qu’il cherche.
Et la métrique ne montre pas réellement de préférence pour l’ordre d’affichage
des complétions. Pourtant, l’utilisateur pourrait très bien utiliser la
séquence de touches suivantes :</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>touche</p></th>
<th class="head"><p>mot composé</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>a</p></td>
</tr>
<tr class="row-odd"><td><p>bas</p></td>
<td><p>actu (complétion)</p></td>
</tr>
<tr class="row-even"><td><p>e</p></td>
<td><p>actue</p></td>
</tr>
<tr class="row-odd"><td><p>bas</p></td>
<td><p>actuellement</p></td>
</tr>
</tbody>
</table>
<p>Dans cet exemple aussi petit, on ne gagnerait pas grand-chose
mais cela vaut le coup d’étudier cette piste pour des vocabulaires plus
grand : se servir des préfixes commun comme <cite>tremplin</cite> pour les mots
plus grand. L’effect position perdrait un peu de son influence.</p>
</section>
<section id="formalisation">
<span id="mp-completion-metrique-formalisation"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Formalisation</a><a class="headerlink" href="#formalisation" title="Lien permanent vers cette rubrique">#</a></h2>
<p>On reprend la première métrique <a class="reference internal" href="completion_formalisation.html#equation-completion-metric1">(1)</a> :</p>
<div class="math">
<p><img src="../_images/math/55ecb0b07c915774810fcdb8c106ab756f98c0a4.svg" alt="\begin{eqnarray*}
M(q, S) &amp;=&amp; \min_{0 \infegal k \infegal l(q)}  k + K(q, k, S)
\end{eqnarray*}"/></p>
</div><p>La fonction <img class="math" src="../_images/math/5aa4583d34305932fc13e2a09f8be44c7f033098.svg" alt="K(q, k, S)"/> est définie par <a class="reference internal" href="completion_formalisation.html#equation-nlp-comp-k">(2)</a>.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Définition0">
<div class="docutils container">
</div>
<p class="admonition-title" id="def-mks2">Définition D1 : Dynamic Minimum Keystroke</p>
<p>On définit la façon optimale de saisir une requête sachant
un système de complétion <img class="math" src="../_images/math/02d33d8a2d2c23238f1631066f0ced17db9634b2.svg" alt="S"/> comme étant le
minimum obtenu :</p>
<div class="math" id="equation-completion-metric2">
<p><span class="eqno">(1)<a class="headerlink" href="#equation-completion-metric2" title="Lien permanent vers cette équation">#</a></span><img src="../_images/math/49f4a62cafd6b78e740a584e934840fe401365b4.svg" alt="\begin{eqnarray*}
M'(q, S) &amp;=&amp; \min_{0 \infegal k &lt; l(q)} \acc{ M'(q[1..k], S) +
            \min( K(q, k, S), l(q) - k) }
\end{eqnarray*}"/></p>
</div></div>
<p>On prend comme convention <img class="math" src="../_images/math/14339d9e824b280b99a71fe2767fddb7983f7b20.svg" alt="M'(\emptyset, S)=0"/>. Le calcul de la métrique
se construit comme une suite qui part des chaînes les plus courtes aux plus longues.
La métrique est donc bien définie.
Contrairement à la première métrique, le calcul dépend du résultat pour
tous les préfixes d’une complétion.</p>
<div class="admonition-mathdef admonition" id="indexmathe-propriété0">
<p class="admonition-title">propriété P1 : métriques</p>
<p><img class="math" src="../_images/math/ceedd8ff7caa46ffbc917c4f1a3723542ed4a397.svg" alt="\forall q, \; M'(q, S) \infegal M(q, S)"/></p>
</div>
<p>Si <img class="math" src="../_images/math/8bacc9453dccc02f3beb640c5e4b482e995df8ce.svg" alt="q \notin S"/>, c’est évident puisque <img class="math" src="../_images/math/e921727e176cb4a6efc0611813d4ed9ca8ec8cf8.svg" alt="M'(q, S) \infegal M'(\emptyset, S) + l(q)"/>.
Si <img class="math" src="../_images/math/2f5d343abd469fcf6b3312e3738ad8f1173db609.svg" alt="q \in S"/>, cela découle de la constation précédente puisque :
<img class="math" src="../_images/math/fd850081576927afe7857f7a329b2fd00e144e0b.svg" alt="M'(q, S) \infegal M'(q[[1..k]], S) + K(q, k, S) \infegal k + K(q, k, S)"/>.</p>
</section>
<section id="quelques-resultats">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Quelques résultats</a><a class="headerlink" href="#quelques-resultats" title="Lien permanent vers cette rubrique">#</a></h2>
<p>On considère la liste des mots <code class="docutils literal notranslate"><span class="pre">actuellement</span></code>, <code class="docutils literal notranslate"><span class="pre">actualité</span></code>, <code class="docutils literal notranslate"><span class="pre">actuel</span></code>.
On compare les ordres qui maximisent la première et la seconde
métriques ainsi que le gain obtenu. Première métrique</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">7.0</span> <span class="o">-</span> <span class="n">actuellement</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">11.0</span> <span class="o">|</span> <span class="n">actuel</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">4.0</span> <span class="o">|</span> <span class="n">actualité</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">6.0</span>
<span class="mf">7.0</span> <span class="o">-</span> <span class="n">actuellement</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">11.0</span> <span class="o">|</span> <span class="n">actualité</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">7.0</span> <span class="o">|</span> <span class="n">actuel</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">3.0</span>
<span class="mf">7.0</span> <span class="o">-</span> <span class="n">actuel</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">5.0</span> <span class="o">|</span> <span class="n">actuellement</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">10.0</span> <span class="o">|</span> <span class="n">actualité</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">6.0</span>
</pre></div>
</div>
<p>Seconde métrique</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">7.333</span> <span class="o">-</span> <span class="n">actuel</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">5.0</span> <span class="o">|</span> <span class="n">actualité</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">7.0</span> <span class="o">|</span> <span class="n">actuellement</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">10.0</span>
<span class="mf">7.0</span> <span class="o">-</span> <span class="n">actuellement</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">11.0</span> <span class="o">|</span> <span class="n">actuel</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">4.0</span> <span class="o">|</span> <span class="n">actualité</span> <span class="n">p</span><span class="o">=</span><span class="mf">1.0</span> <span class="n">g</span><span class="o">=</span><span class="mf">6.0</span>
</pre></div>
</div>
<p>On note que la seconde métrique propose un meilleur gain, ce qui est attendu
mais aussi que le mot <em>actuel</em> sera placé devant le
mot <em>actuellement</em>, plus long sans que cela souffre d’ambiguïté.</p>
</section>
<section id="definition-avancee">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Définition avancée</a><a class="headerlink" href="#definition-avancee" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Dans les faits, le Dynamic Minimum Keystroke <a class="reference internal" href="#equation-completion-metric2">(1)</a> sous-estime
le nombre de caractères nécessaires. Lorsqu’on utilise un mot comme tremplin, on
peut aisément le compléter mais il faut presser une touche ou attendre un peu
pour voir les nouvelles complétions associées à la première complétion choisie et maintenant
considéré comme préfixe. C’est ce que prend en compte la définition suivante.</p>
<div class="admonition-mathdef admonition" id="indexmathe-Définition1">
<div class="docutils container">
</div>
<p class="admonition-title" id="def-mks3">Définition D2 : Dynamic Minimum Keystroke modifié</p>
<p>On définit la façon optimale de saisir une requête sachant
un système de complétion <img class="math" src="../_images/math/02d33d8a2d2c23238f1631066f0ced17db9634b2.svg" alt="S"/> comme étant le
minimum obtenu :</p>
<div class="math" id="equation-completion-metric3">
<p><span class="eqno">(2)<a class="headerlink" href="#equation-completion-metric3" title="Lien permanent vers cette équation">#</a></span><img src="../_images/math/9cb7af5a74517149db512b641566adc45fafbb75.svg" alt="\begin{eqnarray*}
M&quot;(q, S) &amp;=&amp; \min \left\{ \begin{array}{l}
                \min_{1 \infegal k \infegal l(q)} \acc{ M&quot;(q[1..k-1], S) + 1 +\min( K(q, k, S), l(q) - k) } \\
                \min_{0 \infegal k \infegal l(q)} \acc{ M&quot;(q[1..k], S) + \delta + \min( K(q, k, S), l(q) - k) }
                \end{array} \right .
\end{eqnarray*}"/></p>
</div></div>
<p>Si on prend comme exemple la requête <em>machine learning</em>, le premier cas correspond à la séquence :</p>
<ul class="simple">
<li><p>sélection de la complétion <em>machine</em></p></li>
<li><p>pression de la touche espace</p></li>
<li><p>sélection de la complétion <em>machine learning</em></p></li>
</ul>
<p>Et le second cas à la séquence :</p>
<ul class="simple">
<li><p>sélection de la complétion <em>machine</em></p></li>
<li><p>pression de la touche droite pour afficher les nouvelles complétions</p></li>
<li><p>sélection de la complétion <em>machine learning</em></p></li>
</ul>
<p>Le coût de la pression de la touche droite est noté <img class="math" src="../_images/math/f99e4aa5fbc722a266a342e97bb0cce3acd63066.svg" alt="\delta \infegal 1"/> qu’on prendra inférieur à 1.
On remarque également qu’avec cette nouvelle métrique, il est possible
de diminuer le nombre minimum de touches à presser pour des requêtes en dehors
de l’ensemble <img class="math" src="../_images/math/02d33d8a2d2c23238f1631066f0ced17db9634b2.svg" alt="S"/> à partir du moment où elles prolongent une complétion existante.
C’est là un point très intéressant de cette métrique.
De manière évidente, <img class="math" src="../_images/math/dd45100a9c3c4f8672a227ca830eb2592acf8b10.svg" alt="\forall q, \; M'(q, S) \infegal M&quot;(q, S)"/>.</p>
</section>
<section id="questions">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Questions</a><a class="headerlink" href="#questions" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Grâce à cette métrique, on peut envisager de trouver des réponses à certaines questions :</p>
<ol class="arabic simple">
<li><p>Les différences entre les trois métriques sont-elles négligeables ou non ?</p></li>
<li><p>Ajouter des complétions non présentes dans le corpus améliore-t-elle la métrique ?
Même question pour la suppression ?</p></li>
<li><p>Existe-t-il un moyen de construire de façon itérative l’ensemble des complétions
ou plutôt l’ordre qui minimise la métrice <img class="math" src="../_images/math/456dc0b0f1a0338e3cd6d4136ce4275fdf1a799d.svg" alt="M'(q, S)"/> ?</p></li>
<li><p>Comment calculer rapidement les métriques pour les requêtes dans l’ensemble
<img class="math" src="../_images/math/02d33d8a2d2c23238f1631066f0ced17db9634b2.svg" alt="S"/> et en dehors ?</p></li>
</ol>
<p>Pour la première question, une expérience devrait donner une piste
à défaut d’y répondre. Pour la seconde, il n’est pas nécessaire d’envisager
la suppression de complétions car celles-ci devraient naturellement se positionner
en fin de liste. L’ajout correspond à la situation où beaucoup de complétions
partagent le même préfixe sans pour autant que ce préfixe fasse partie de la
liste des complétions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">macérer</span>
<span class="n">maline</span>
<span class="n">machinerie</span>
<span class="n">machinerie</span> <span class="n">infernale</span>
<span class="n">machinerie</span> <span class="n">infernalissime</span>
<span class="n">machine</span> <span class="n">artistique</span>
<span class="n">machine</span> <span class="n">automatique</span>
<span class="n">machine</span> <span class="n">chaplin</span>
<span class="n">machine</span> <span class="n">intelligente</span>
<span class="n">machine</span> <span class="n">learning</span>
</pre></div>
</div>
<p>L’idée consiste à ajouter la complétion <em>machine</em> qui sert de
préfixe commun à beaucoup de complétions et cela améliore le gain moyen
dans le cas présent (sans compter le gain sur la requête
<em>machine</em>). Enfin, la troisième et la quatrième question,
la réponse requiert la démonstration de quelques propriétés mathématiques.
Mais avant j’ajouterai que la première métrique <img class="math" src="../_images/math/e5c619f0600e251cabb3318b03870bc6f2c4870f.svg" alt="M"/> correspond
à la ligne de commande Windows et la métrique <img class="math" src="../_images/math/fe4fe50f0877cd412ed6cd7f1a87e2ae67deca8e.svg" alt="M'"/> correspond à
la ligne de commande Linux.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="completion_fausse.html"
       title="page précédente">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">précédent</p>
        <p class="prev-next-title">Fausses idées reçues</p>
      </div>
    </a>
    <a class="right-next"
       href="completion_propriete.html"
       title="page suivante">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">suivant</p>
        <p class="prev-next-title">Propriétés mathématiques</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Sur cette page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intuitions">Intuitions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formalisation">Formalisation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quelques-resultats">Quelques résultats</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definition-avancee">Définition avancée</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#questions">Questions</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/c_nlp/completion_metrique.rst">
      <i class="fa-solid fa-file-lines"></i> Montrer le code source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2016-2023, Xavier Dupré.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Construit avec le <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">Thème PyData Sphinx</a> 0.14.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>